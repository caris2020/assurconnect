function cp(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function dp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pd={exports:{}},Wa={},Td={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sn=Symbol.for("react.element"),up=Symbol.for("react.portal"),mp=Symbol.for("react.fragment"),fp=Symbol.for("react.strict_mode"),pp=Symbol.for("react.profiler"),xp=Symbol.for("react.provider"),hp=Symbol.for("react.context"),gp=Symbol.for("react.forward_ref"),vp=Symbol.for("react.suspense"),yp=Symbol.for("react.memo"),jp=Symbol.for("react.lazy"),lc=Symbol.iterator;function Np(e){return e===null||typeof e!="object"?null:(e=lc&&e[lc]||e["@@iterator"],typeof e=="function"?e:null)}var Ad={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ld=Object.assign,Dd={};function ys(e,t,r){this.props=e,this.context=t,this.refs=Dd,this.updater=r||Ad}ys.prototype.isReactComponent={};ys.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ys.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Id(){}Id.prototype=ys.prototype;function Ji(e,t,r){this.props=e,this.context=t,this.refs=Dd,this.updater=r||Ad}var Xi=Ji.prototype=new Id;Xi.constructor=Ji;Ld(Xi,ys.prototype);Xi.isPureReactComponent=!0;var ic=Array.isArray,Fd=Object.prototype.hasOwnProperty,Gi={current:null},Od={key:!0,ref:!0,__self:!0,__source:!0};function zd(e,t,r){var n,a={},l=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)Fd.call(t,n)&&!Od.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Sn,type:e,key:l,ref:i,props:a,_owner:Gi.current}}function wp(e,t){return{$$typeof:Sn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ki(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sn}function bp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var oc=/\/+/g;function bl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bp(""+e.key):t.toString(36)}function sa(e,t,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Sn:case up:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+bl(i,0):n,ic(a)?(r="",e!=null&&(r=e.replace(oc,"$&/")+"/"),sa(a,t,r,"",function(d){return d})):a!=null&&(Ki(a)&&(a=wp(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(oc,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",ic(e))for(var o=0;o<e.length;o++){l=e[o];var c=n+bl(l,o);i+=sa(l,t,r,c,a)}else if(c=Np(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=n+bl(l,o++),i+=sa(l,t,r,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function zn(e,t,r){if(e==null)return e;var n=[],a=0;return sa(e,n,"","",function(l){return t.call(r,l,a++)}),n}function kp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fe={current:null},na={transition:null},Sp={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:na,ReactCurrentOwner:Gi};function $d(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:zn,forEach:function(e,t,r){zn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return zn(e,function(){t++}),t},toArray:function(e){return zn(e,function(t){return t})||[]},only:function(e){if(!Ki(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=ys;Y.Fragment=mp;Y.Profiler=pp;Y.PureComponent=Ji;Y.StrictMode=fp;Y.Suspense=vp;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sp;Y.act=$d;Y.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ld({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=Gi.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Fd.call(t,c)&&!Od.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:Sn,type:e.type,key:a,ref:l,props:n,_owner:i}};Y.createContext=function(e){return e={$$typeof:hp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xp,_context:e},e.Consumer=e};Y.createElement=zd;Y.createFactory=function(e){var t=zd.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:gp,render:e}};Y.isValidElement=Ki;Y.lazy=function(e){return{$$typeof:jp,_payload:{_status:-1,_result:e},_init:kp}};Y.memo=function(e,t){return{$$typeof:yp,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=na.transition;na.transition={};try{e()}finally{na.transition=t}};Y.unstable_act=$d;Y.useCallback=function(e,t){return Fe.current.useCallback(e,t)};Y.useContext=function(e){return Fe.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return Fe.current.useDeferredValue(e)};Y.useEffect=function(e,t){return Fe.current.useEffect(e,t)};Y.useId=function(){return Fe.current.useId()};Y.useImperativeHandle=function(e,t,r){return Fe.current.useImperativeHandle(e,t,r)};Y.useInsertionEffect=function(e,t){return Fe.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return Fe.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return Fe.current.useMemo(e,t)};Y.useReducer=function(e,t,r){return Fe.current.useReducer(e,t,r)};Y.useRef=function(e){return Fe.current.useRef(e)};Y.useState=function(e){return Fe.current.useState(e)};Y.useSyncExternalStore=function(e,t,r){return Fe.current.useSyncExternalStore(e,t,r)};Y.useTransition=function(){return Fe.current.useTransition()};Y.version="18.3.1";Td.exports=Y;var u=Td.exports;const Ud=dp(u),Ep=cp({__proto__:null,default:Ud},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=u,Rp=Symbol.for("react.element"),_p=Symbol.for("react.fragment"),Pp=Object.prototype.hasOwnProperty,Tp=Cp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ap={key:!0,ref:!0,__self:!0,__source:!0};function Md(e,t,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Pp.call(t,n)&&!Ap.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Rp,type:e,key:l,ref:i,props:a,_owner:Tp.current}}Wa.Fragment=_p;Wa.jsx=Md;Wa.jsxs=Md;Pd.exports=Wa;var s=Pd.exports,Bd={exports:{}},Ke={},Vd={exports:{}},qd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,B){var I=_.length;_.push(B);e:for(;0<I;){var X=I-1>>>1,pe=_[X];if(0<a(pe,B))_[X]=B,_[I]=pe,I=X;else break e}}function r(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var B=_[0],I=_.pop();if(I!==B){_[0]=I;e:for(var X=0,pe=_.length,et=pe>>>1;X<et;){var dt=2*(X+1)-1,We=_[dt],ut=dt+1,ye=_[ut];if(0>a(We,I))ut<pe&&0>a(ye,We)?(_[X]=ye,_[ut]=I,X=ut):(_[X]=We,_[dt]=I,X=dt);else if(ut<pe&&0>a(ye,I))_[X]=ye,_[ut]=I,X=ut;else break e}}return B}function a(_,B){var I=_.sortIndex-B.sortIndex;return I!==0?I:_.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],d=[],x=1,m=null,h=3,j=!1,y=!1,N=!1,P=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(_){for(var B=r(d);B!==null;){if(B.callback===null)n(d);else if(B.startTime<=_)n(d),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(d)}}function b(_){if(N=!1,f(_),!y)if(r(c)!==null)y=!0,Se(k);else{var B=r(d);B!==null&&O(b,B.startTime-_)}}function k(_,B){y=!1,N&&(N=!1,g(S),S=-1),j=!0;var I=h;try{for(f(B),m=r(c);m!==null&&(!(m.expirationTime>B)||_&&!J());){var X=m.callback;if(typeof X=="function"){m.callback=null,h=m.priorityLevel;var pe=X(m.expirationTime<=B);B=e.unstable_now(),typeof pe=="function"?m.callback=pe:m===r(c)&&n(c),f(B)}else n(c);m=r(c)}if(m!==null)var et=!0;else{var dt=r(d);dt!==null&&O(b,dt.startTime-B),et=!1}return et}finally{m=null,h=I,j=!1}}var R=!1,w=null,S=-1,M=5,F=-1;function J(){return!(e.unstable_now()-F<M)}function W(){if(w!==null){var _=e.unstable_now();F=_;var B=!0;try{B=w(!0,_)}finally{B?K():(R=!1,w=null)}}else R=!1}var K;if(typeof p=="function")K=function(){p(W)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,ae=we.port2;we.port1.onmessage=W,K=function(){ae.postMessage(null)}}else K=function(){P(W,0)};function Se(_){w=_,R||(R=!0,K())}function O(_,B){S=P(function(){_(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){y||j||(y=!0,Se(k))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(_){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var I=h;h=B;try{return _()}finally{h=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,B){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var I=h;h=_;try{return B()}finally{h=I}},e.unstable_scheduleCallback=function(_,B,I){var X=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?X+I:X):I=X,_){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=I+pe,_={id:x++,callback:B,priorityLevel:_,startTime:I,expirationTime:pe,sortIndex:-1},I>X?(_.sortIndex=I,t(d,_),r(c)===null&&_===r(d)&&(N?(g(S),S=-1):N=!0,O(b,I-X))):(_.sortIndex=pe,t(c,_),y||j||(y=!0,Se(k))),_},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(_){var B=h;return function(){var I=h;h=B;try{return _.apply(this,arguments)}finally{h=I}}}})(qd);Vd.exports=qd;var Lp=Vd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp=u,Ge=Lp;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wd=new Set,an={};function Ir(e,t){us(e,t),us(e+"Capture",t)}function us(e,t){for(an[e]=t,e=0;e<t.length;e++)Wd.add(t[e])}var Ot=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gl=Object.prototype.hasOwnProperty,Ip=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cc={},dc={};function Fp(e){return Gl.call(dc,e)?!0:Gl.call(cc,e)?!1:Ip.test(e)?dc[e]=!0:(cc[e]=!0,!1)}function Op(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zp(e,t,r,n){if(t===null||typeof t>"u"||Op(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Oe(e,t,r,n,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Re[e]=new Oe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Re[t]=new Oe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Re[e]=new Oe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Re[e]=new Oe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Re[e]=new Oe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Re[e]=new Oe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Re[e]=new Oe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Re[e]=new Oe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Re[e]=new Oe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yi=/[\-:]([a-z])/g;function Zi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yi,Zi);Re[t]=new Oe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yi,Zi);Re[t]=new Oe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yi,Zi);Re[t]=new Oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Re[e]=new Oe(e,1,!1,e.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Re[e]=new Oe(e,1,!1,e.toLowerCase(),null,!0,!0)});function eo(e,t,r,n){var a=Re.hasOwnProperty(t)?Re[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zp(t,r,a,n)&&(r=null),n||a===null?Fp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Mt=Dp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$n=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),Hr=Symbol.for("react.fragment"),to=Symbol.for("react.strict_mode"),Kl=Symbol.for("react.profiler"),Hd=Symbol.for("react.provider"),Qd=Symbol.for("react.context"),ro=Symbol.for("react.forward_ref"),Yl=Symbol.for("react.suspense"),Zl=Symbol.for("react.suspense_list"),so=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),Jd=Symbol.for("react.offscreen"),uc=Symbol.iterator;function Os(e){return e===null||typeof e!="object"?null:(e=uc&&e[uc]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Object.assign,kl;function Ws(e){if(kl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);kl=t&&t[1]||""}return`
`+kl+e}var Sl=!1;function El(e,t){if(!e||Sl)return"";Sl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{Sl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ws(e):""}function $p(e){switch(e.tag){case 5:return Ws(e.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 2:case 15:return e=El(e.type,!1),e;case 11:return e=El(e.type.render,!1),e;case 1:return e=El(e.type,!0),e;default:return""}}function ei(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hr:return"Fragment";case Wr:return"Portal";case Kl:return"Profiler";case to:return"StrictMode";case Yl:return"Suspense";case Zl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qd:return(e.displayName||"Context")+".Consumer";case Hd:return(e._context.displayName||"Context")+".Provider";case ro:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case so:return t=e.displayName||null,t!==null?t:ei(e.type)||"Memo";case Xt:t=e._payload,e=e._init;try{return ei(e(t))}catch{}}return null}function Up(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ei(t);case 8:return t===to?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ur(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mp(e){var t=Xd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Un(e){e._valueTracker||(e._valueTracker=Mp(e))}function Gd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Xd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ha(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ti(e,t){var r=t.checked;return fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function mc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ur(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Kd(e,t){t=t.checked,t!=null&&eo(e,"checked",t,!1)}function ri(e,t){Kd(e,t);var r=ur(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?si(e,t.type,r):t.hasOwnProperty("defaultValue")&&si(e,t.type,ur(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function si(e,t,r){(t!=="number"||ha(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Hs=Array.isArray;function ns(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ur(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ni(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(D(92));if(Hs(r)){if(1<r.length)throw Error(D(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ur(r)}}function Yd(e,t){var r=ur(t.value),n=ur(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function xc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ai(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Mn,eu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Mn=Mn||document.createElement("div"),Mn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ln(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bp=["Webkit","ms","Moz","O"];Object.keys(Gs).forEach(function(e){Bp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gs[t]=Gs[e]})});function tu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Gs.hasOwnProperty(e)&&Gs[e]?(""+t).trim():t+"px"}function ru(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=tu(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Vp=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function li(e,t){if(t){if(Vp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function ii(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oi=null;function no(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ci=null,as=null,ls=null;function hc(e){if(e=Rn(e)){if(typeof ci!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Ga(t),ci(e.stateNode,e.type,t))}}function su(e){as?ls?ls.push(e):ls=[e]:as=e}function nu(){if(as){var e=as,t=ls;if(ls=as=null,hc(e),t)for(e=0;e<t.length;e++)hc(t[e])}}function au(e,t){return e(t)}function lu(){}var Cl=!1;function iu(e,t,r){if(Cl)return e(t,r);Cl=!0;try{return au(e,t,r)}finally{Cl=!1,(as!==null||ls!==null)&&(lu(),nu())}}function on(e,t){var r=e.stateNode;if(r===null)return null;var n=Ga(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(D(231,t,typeof r));return r}var di=!1;if(Ot)try{var zs={};Object.defineProperty(zs,"passive",{get:function(){di=!0}}),window.addEventListener("test",zs,zs),window.removeEventListener("test",zs,zs)}catch{di=!1}function qp(e,t,r,n,a,l,i,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(x){this.onError(x)}}var Ks=!1,ga=null,va=!1,ui=null,Wp={onError:function(e){Ks=!0,ga=e}};function Hp(e,t,r,n,a,l,i,o,c){Ks=!1,ga=null,qp.apply(Wp,arguments)}function Qp(e,t,r,n,a,l,i,o,c){if(Hp.apply(this,arguments),Ks){if(Ks){var d=ga;Ks=!1,ga=null}else throw Error(D(198));va||(va=!0,ui=d)}}function Fr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ou(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gc(e){if(Fr(e)!==e)throw Error(D(188))}function Jp(e){var t=e.alternate;if(!t){if(t=Fr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return gc(a),e;if(l===n)return gc(a),t;l=l.sibling}throw Error(D(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i)throw Error(D(189))}}if(r.alternate!==n)throw Error(D(190))}if(r.tag!==3)throw Error(D(188));return r.stateNode.current===r?e:t}function cu(e){return e=Jp(e),e!==null?du(e):null}function du(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=du(e);if(t!==null)return t;e=e.sibling}return null}var uu=Ge.unstable_scheduleCallback,vc=Ge.unstable_cancelCallback,Xp=Ge.unstable_shouldYield,Gp=Ge.unstable_requestPaint,ge=Ge.unstable_now,Kp=Ge.unstable_getCurrentPriorityLevel,ao=Ge.unstable_ImmediatePriority,mu=Ge.unstable_UserBlockingPriority,ya=Ge.unstable_NormalPriority,Yp=Ge.unstable_LowPriority,fu=Ge.unstable_IdlePriority,Ha=null,Rt=null;function Zp(e){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Ha,e,void 0,(e.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:rx,ex=Math.log,tx=Math.LN2;function rx(e){return e>>>=0,e===0?32:31-(ex(e)/tx|0)|0}var Bn=64,Vn=4194304;function Qs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ja(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=Qs(o):(l&=i,l!==0&&(n=Qs(l)))}else i=r&~a,i!==0?n=Qs(i):l!==0&&(n=Qs(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-yt(t),a=1<<r,n|=e[r],t&=~a;return n}function sx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nx(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-yt(l),o=1<<i,c=a[i];c===-1?(!(o&r)||o&n)&&(a[i]=sx(o,t)):c<=t&&(e.expiredLanes|=o),l&=~o}}function mi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pu(){var e=Bn;return Bn<<=1,!(Bn&4194240)&&(Bn=64),e}function Rl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function En(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yt(t),e[t]=r}function ax(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-yt(r),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function lo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-yt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var re=0;function xu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hu,io,gu,vu,yu,fi=!1,qn=[],rr=null,sr=null,nr=null,cn=new Map,dn=new Map,Kt=[],lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yc(e,t){switch(e){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":cn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dn.delete(t.pointerId)}}function $s(e,t,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=Rn(t),t!==null&&io(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function ix(e,t,r,n,a){switch(t){case"focusin":return rr=$s(rr,e,t,r,n,a),!0;case"dragenter":return sr=$s(sr,e,t,r,n,a),!0;case"mouseover":return nr=$s(nr,e,t,r,n,a),!0;case"pointerover":var l=a.pointerId;return cn.set(l,$s(cn.get(l)||null,e,t,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,dn.set(l,$s(dn.get(l)||null,e,t,r,n,a)),!0}return!1}function ju(e){var t=Sr(e.target);if(t!==null){var r=Fr(t);if(r!==null){if(t=r.tag,t===13){if(t=ou(r),t!==null){e.blockedOn=t,yu(e.priority,function(){gu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function aa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=pi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);oi=n,r.target.dispatchEvent(n),oi=null}else return t=Rn(r),t!==null&&io(t),e.blockedOn=r,!1;t.shift()}return!0}function jc(e,t,r){aa(e)&&r.delete(t)}function ox(){fi=!1,rr!==null&&aa(rr)&&(rr=null),sr!==null&&aa(sr)&&(sr=null),nr!==null&&aa(nr)&&(nr=null),cn.forEach(jc),dn.forEach(jc)}function Us(e,t){e.blockedOn===t&&(e.blockedOn=null,fi||(fi=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,ox)))}function un(e){function t(a){return Us(a,e)}if(0<qn.length){Us(qn[0],e);for(var r=1;r<qn.length;r++){var n=qn[r];n.blockedOn===e&&(n.blockedOn=null)}}for(rr!==null&&Us(rr,e),sr!==null&&Us(sr,e),nr!==null&&Us(nr,e),cn.forEach(t),dn.forEach(t),r=0;r<Kt.length;r++)n=Kt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Kt.length&&(r=Kt[0],r.blockedOn===null);)ju(r),r.blockedOn===null&&Kt.shift()}var is=Mt.ReactCurrentBatchConfig,Na=!0;function cx(e,t,r,n){var a=re,l=is.transition;is.transition=null;try{re=1,oo(e,t,r,n)}finally{re=a,is.transition=l}}function dx(e,t,r,n){var a=re,l=is.transition;is.transition=null;try{re=4,oo(e,t,r,n)}finally{re=a,is.transition=l}}function oo(e,t,r,n){if(Na){var a=pi(e,t,r,n);if(a===null)zl(e,t,n,wa,r),yc(e,n);else if(ix(a,e,t,r,n))n.stopPropagation();else if(yc(e,n),t&4&&-1<lx.indexOf(e)){for(;a!==null;){var l=Rn(a);if(l!==null&&hu(l),l=pi(e,t,r,n),l===null&&zl(e,t,n,wa,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else zl(e,t,n,null,r)}}var wa=null;function pi(e,t,r,n){if(wa=null,e=no(n),e=Sr(e),e!==null)if(t=Fr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ou(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wa=e,null}function Nu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kp()){case ao:return 1;case mu:return 4;case ya:case Yp:return 16;case fu:return 536870912;default:return 16}default:return 16}}var Zt=null,co=null,la=null;function wu(){if(la)return la;var e,t=co,r=t.length,n,a="value"in Zt?Zt.value:Zt.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[l-n];n++);return la=a.slice(e,1<n?1-n:void 0)}function ia(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wn(){return!0}function Nc(){return!1}function Ye(e){function t(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Wn:Nc,this.isPropagationStopped=Nc,this}return fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),t}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uo=Ye(js),Cn=fe({},js,{view:0,detail:0}),ux=Ye(Cn),_l,Pl,Ms,Qa=fe({},Cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ms&&(Ms&&e.type==="mousemove"?(_l=e.screenX-Ms.screenX,Pl=e.screenY-Ms.screenY):Pl=_l=0,Ms=e),_l)},movementY:function(e){return"movementY"in e?e.movementY:Pl}}),wc=Ye(Qa),mx=fe({},Qa,{dataTransfer:0}),fx=Ye(mx),px=fe({},Cn,{relatedTarget:0}),Tl=Ye(px),xx=fe({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),hx=Ye(xx),gx=fe({},js,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vx=Ye(gx),yx=fe({},js,{data:0}),bc=Ye(yx),jx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wx[e])?!!t[e]:!1}function mo(){return bx}var kx=fe({},Cn,{key:function(e){if(e.key){var t=jx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ia(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(e){return e.type==="keypress"?ia(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ia(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sx=Ye(kx),Ex=fe({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kc=Ye(Ex),Cx=fe({},Cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),Rx=Ye(Cx),_x=fe({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),Px=Ye(_x),Tx=fe({},Qa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ax=Ye(Tx),Lx=[9,13,27,32],fo=Ot&&"CompositionEvent"in window,Ys=null;Ot&&"documentMode"in document&&(Ys=document.documentMode);var Dx=Ot&&"TextEvent"in window&&!Ys,bu=Ot&&(!fo||Ys&&8<Ys&&11>=Ys),Sc=" ",Ec=!1;function ku(e,t){switch(e){case"keyup":return Lx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Su(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function Ix(e,t){switch(e){case"compositionend":return Su(t);case"keypress":return t.which!==32?null:(Ec=!0,Sc);case"textInput":return e=t.data,e===Sc&&Ec?null:e;default:return null}}function Fx(e,t){if(Qr)return e==="compositionend"||!fo&&ku(e,t)?(e=wu(),la=co=Zt=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bu&&t.locale!=="ko"?null:t.data;default:return null}}var Ox={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ox[e.type]:t==="textarea"}function Eu(e,t,r,n){su(n),t=ba(t,"onChange"),0<t.length&&(r=new uo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zs=null,mn=null;function zx(e){Ou(e,0)}function Ja(e){var t=Gr(e);if(Gd(t))return e}function $x(e,t){if(e==="change")return t}var Cu=!1;if(Ot){var Al;if(Ot){var Ll="oninput"in document;if(!Ll){var Rc=document.createElement("div");Rc.setAttribute("oninput","return;"),Ll=typeof Rc.oninput=="function"}Al=Ll}else Al=!1;Cu=Al&&(!document.documentMode||9<document.documentMode)}function _c(){Zs&&(Zs.detachEvent("onpropertychange",Ru),mn=Zs=null)}function Ru(e){if(e.propertyName==="value"&&Ja(mn)){var t=[];Eu(t,mn,e,no(e)),iu(zx,t)}}function Ux(e,t,r){e==="focusin"?(_c(),Zs=t,mn=r,Zs.attachEvent("onpropertychange",Ru)):e==="focusout"&&_c()}function Mx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ja(mn)}function Bx(e,t){if(e==="click")return Ja(t)}function Vx(e,t){if(e==="input"||e==="change")return Ja(t)}function qx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nt=typeof Object.is=="function"?Object.is:qx;function fn(e,t){if(Nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Gl.call(t,a)||!Nt(e[a],t[a]))return!1}return!0}function Pc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tc(e,t){var r=Pc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Pc(r)}}function _u(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_u(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pu(){for(var e=window,t=ha();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ha(e.document)}return t}function po(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Wx(e){var t=Pu(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&_u(r.ownerDocument.documentElement,r)){if(n!==null&&po(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=Tc(r,l);var i=Tc(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hx=Ot&&"documentMode"in document&&11>=document.documentMode,Jr=null,xi=null,en=null,hi=!1;function Ac(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;hi||Jr==null||Jr!==ha(n)||(n=Jr,"selectionStart"in n&&po(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),en&&fn(en,n)||(en=n,n=ba(xi,"onSelect"),0<n.length&&(t=new uo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Jr)))}function Hn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Xr={animationend:Hn("Animation","AnimationEnd"),animationiteration:Hn("Animation","AnimationIteration"),animationstart:Hn("Animation","AnimationStart"),transitionend:Hn("Transition","TransitionEnd")},Dl={},Tu={};Ot&&(Tu=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function Xa(e){if(Dl[e])return Dl[e];if(!Xr[e])return e;var t=Xr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Tu)return Dl[e]=t[r];return e}var Au=Xa("animationend"),Lu=Xa("animationiteration"),Du=Xa("animationstart"),Iu=Xa("transitionend"),Fu=new Map,Lc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,t){Fu.set(e,t),Ir(t,[e])}for(var Il=0;Il<Lc.length;Il++){var Fl=Lc[Il],Qx=Fl.toLowerCase(),Jx=Fl[0].toUpperCase()+Fl.slice(1);fr(Qx,"on"+Jx)}fr(Au,"onAnimationEnd");fr(Lu,"onAnimationIteration");fr(Du,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(Iu,"onTransitionEnd");us("onMouseEnter",["mouseout","mouseover"]);us("onMouseLeave",["mouseout","mouseover"]);us("onPointerEnter",["pointerout","pointerover"]);us("onPointerLeave",["pointerout","pointerover"]);Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function Dc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Qp(n,t,void 0,e),e.currentTarget=null}function Ou(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;Dc(a,o,d),l=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,d=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;Dc(a,o,d),l=c}}}if(va)throw e=ui,va=!1,ui=null,e}function ie(e,t){var r=t[Ni];r===void 0&&(r=t[Ni]=new Set);var n=e+"__bubble";r.has(n)||(zu(t,e,2,!1),r.add(n))}function Ol(e,t,r){var n=0;t&&(n|=4),zu(r,e,n,t)}var Qn="_reactListening"+Math.random().toString(36).slice(2);function pn(e){if(!e[Qn]){e[Qn]=!0,Wd.forEach(function(r){r!=="selectionchange"&&(Xx.has(r)||Ol(r,!1,e),Ol(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qn]||(t[Qn]=!0,Ol("selectionchange",!1,t))}}function zu(e,t,r,n){switch(Nu(t)){case 1:var a=cx;break;case 4:a=dx;break;default:a=oo}r=a.bind(null,t,r,e),a=void 0,!di||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function zl(e,t,r,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=Sr(o),i===null)return;if(c=i.tag,c===5||c===6){n=l=i;continue e}o=o.parentNode}}n=n.return}iu(function(){var d=l,x=no(r),m=[];e:{var h=Fu.get(e);if(h!==void 0){var j=uo,y=e;switch(e){case"keypress":if(ia(r)===0)break e;case"keydown":case"keyup":j=Sx;break;case"focusin":y="focus",j=Tl;break;case"focusout":y="blur",j=Tl;break;case"beforeblur":case"afterblur":j=Tl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Rx;break;case Au:case Lu:case Du:j=hx;break;case Iu:j=Px;break;case"scroll":j=ux;break;case"wheel":j=Ax;break;case"copy":case"cut":case"paste":j=vx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=kc}var N=(t&4)!==0,P=!N&&e==="scroll",g=N?h!==null?h+"Capture":null:h;N=[];for(var p=d,f;p!==null;){f=p;var b=f.stateNode;if(f.tag===5&&b!==null&&(f=b,g!==null&&(b=on(p,g),b!=null&&N.push(xn(p,b,f)))),P)break;p=p.return}0<N.length&&(h=new j(h,y,null,r,x),m.push({event:h,listeners:N}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",h&&r!==oi&&(y=r.relatedTarget||r.fromElement)&&(Sr(y)||y[zt]))break e;if((j||h)&&(h=x.window===x?x:(h=x.ownerDocument)?h.defaultView||h.parentWindow:window,j?(y=r.relatedTarget||r.toElement,j=d,y=y?Sr(y):null,y!==null&&(P=Fr(y),y!==P||y.tag!==5&&y.tag!==6)&&(y=null)):(j=null,y=d),j!==y)){if(N=wc,b="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(N=kc,b="onPointerLeave",g="onPointerEnter",p="pointer"),P=j==null?h:Gr(j),f=y==null?h:Gr(y),h=new N(b,p+"leave",j,r,x),h.target=P,h.relatedTarget=f,b=null,Sr(x)===d&&(N=new N(g,p+"enter",y,r,x),N.target=f,N.relatedTarget=P,b=N),P=b,j&&y)t:{for(N=j,g=y,p=0,f=N;f;f=Mr(f))p++;for(f=0,b=g;b;b=Mr(b))f++;for(;0<p-f;)N=Mr(N),p--;for(;0<f-p;)g=Mr(g),f--;for(;p--;){if(N===g||g!==null&&N===g.alternate)break t;N=Mr(N),g=Mr(g)}N=null}else N=null;j!==null&&Ic(m,h,j,N,!1),y!==null&&P!==null&&Ic(m,P,y,N,!0)}}e:{if(h=d?Gr(d):window,j=h.nodeName&&h.nodeName.toLowerCase(),j==="select"||j==="input"&&h.type==="file")var k=$x;else if(Cc(h))if(Cu)k=Vx;else{k=Mx;var R=Ux}else(j=h.nodeName)&&j.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=Bx);if(k&&(k=k(e,d))){Eu(m,k,r,x);break e}R&&R(e,h,d),e==="focusout"&&(R=h._wrapperState)&&R.controlled&&h.type==="number"&&si(h,"number",h.value)}switch(R=d?Gr(d):window,e){case"focusin":(Cc(R)||R.contentEditable==="true")&&(Jr=R,xi=d,en=null);break;case"focusout":en=xi=Jr=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,Ac(m,r,x);break;case"selectionchange":if(Hx)break;case"keydown":case"keyup":Ac(m,r,x)}var w;if(fo)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Qr?ku(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(bu&&r.locale!=="ko"&&(Qr||S!=="onCompositionStart"?S==="onCompositionEnd"&&Qr&&(w=wu()):(Zt=x,co="value"in Zt?Zt.value:Zt.textContent,Qr=!0)),R=ba(d,S),0<R.length&&(S=new bc(S,e,null,r,x),m.push({event:S,listeners:R}),w?S.data=w:(w=Su(r),w!==null&&(S.data=w)))),(w=Dx?Ix(e,r):Fx(e,r))&&(d=ba(d,"onBeforeInput"),0<d.length&&(x=new bc("onBeforeInput","beforeinput",null,r,x),m.push({event:x,listeners:d}),x.data=w))}Ou(m,t)})}function xn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ba(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=on(e,r),l!=null&&n.unshift(xn(e,l,a)),l=on(e,t),l!=null&&n.push(xn(e,l,a))),e=e.return}return n}function Mr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ic(e,t,r,n,a){for(var l=t._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=on(r,l),c!=null&&i.unshift(xn(r,c,o))):a||(c=on(r,l),c!=null&&i.push(xn(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Gx=/\r\n?/g,Kx=/\u0000|\uFFFD/g;function Fc(e){return(typeof e=="string"?e:""+e).replace(Gx,`
`).replace(Kx,"")}function Jn(e,t,r){if(t=Fc(t),Fc(e)!==t&&r)throw Error(D(425))}function ka(){}var gi=null,vi=null;function yi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ji=typeof setTimeout=="function"?setTimeout:void 0,Yx=typeof clearTimeout=="function"?clearTimeout:void 0,Oc=typeof Promise=="function"?Promise:void 0,Zx=typeof queueMicrotask=="function"?queueMicrotask:typeof Oc<"u"?function(e){return Oc.resolve(null).then(e).catch(eh)}:ji;function eh(e){setTimeout(function(){throw e})}function $l(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),un(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);un(t)}function ar(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Ns,hn="__reactProps$"+Ns,zt="__reactContainer$"+Ns,Ni="__reactEvents$"+Ns,th="__reactListeners$"+Ns,rh="__reactHandles$"+Ns;function Sr(e){var t=e[Ct];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zt]||r[Ct]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=zc(e);e!==null;){if(r=e[Ct])return r;e=zc(e)}return t}e=r,r=e.parentNode}return null}function Rn(e){return e=e[Ct]||e[zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Ga(e){return e[hn]||null}var wi=[],Kr=-1;function pr(e){return{current:e}}function oe(e){0>Kr||(e.current=wi[Kr],wi[Kr]=null,Kr--)}function le(e,t){Kr++,wi[Kr]=e.current,e.current=t}var mr={},Ae=pr(mr),Be=pr(!1),Pr=mr;function ms(e,t){var r=e.type.contextTypes;if(!r)return mr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ve(e){return e=e.childContextTypes,e!=null}function Sa(){oe(Be),oe(Ae)}function $c(e,t,r){if(Ae.current!==mr)throw Error(D(168));le(Ae,t),le(Be,r)}function $u(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(D(108,Up(e)||"Unknown",a));return fe({},r,n)}function Ea(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mr,Pr=Ae.current,le(Ae,e),le(Be,Be.current),!0}function Uc(e,t,r){var n=e.stateNode;if(!n)throw Error(D(169));r?(e=$u(e,t,Pr),n.__reactInternalMemoizedMergedChildContext=e,oe(Be),oe(Ae),le(Ae,e)):oe(Be),le(Be,r)}var At=null,Ka=!1,Ul=!1;function Uu(e){At===null?At=[e]:At.push(e)}function sh(e){Ka=!0,Uu(e)}function xr(){if(!Ul&&At!==null){Ul=!0;var e=0,t=re;try{var r=At;for(re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}At=null,Ka=!1}catch(a){throw At!==null&&(At=At.slice(e+1)),uu(ao,xr),a}finally{re=t,Ul=!1}}return null}var Yr=[],Zr=0,Ca=null,Ra=0,nt=[],at=0,Tr=null,Dt=1,It="";function br(e,t){Yr[Zr++]=Ra,Yr[Zr++]=Ca,Ca=e,Ra=t}function Mu(e,t,r){nt[at++]=Dt,nt[at++]=It,nt[at++]=Tr,Tr=e;var n=Dt;e=It;var a=32-yt(n)-1;n&=~(1<<a),r+=1;var l=32-yt(t)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Dt=1<<32-yt(t)+a|r<<a|n,It=l+e}else Dt=1<<l|r<<a|n,It=e}function xo(e){e.return!==null&&(br(e,1),Mu(e,1,0))}function ho(e){for(;e===Ca;)Ca=Yr[--Zr],Yr[Zr]=null,Ra=Yr[--Zr],Yr[Zr]=null;for(;e===Tr;)Tr=nt[--at],nt[at]=null,It=nt[--at],nt[at]=null,Dt=nt[--at],nt[at]=null}var Xe=null,Je=null,ce=!1,vt=null;function Bu(e,t){var r=lt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Mc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xe=e,Je=ar(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xe=e,Je=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Tr!==null?{id:Dt,overflow:It}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=lt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Xe=e,Je=null,!0):!1;default:return!1}}function bi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ki(e){if(ce){var t=Je;if(t){var r=t;if(!Mc(e,t)){if(bi(e))throw Error(D(418));t=ar(r.nextSibling);var n=Xe;t&&Mc(e,t)?Bu(n,r):(e.flags=e.flags&-4097|2,ce=!1,Xe=e)}}else{if(bi(e))throw Error(D(418));e.flags=e.flags&-4097|2,ce=!1,Xe=e}}}function Bc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xe=e}function Xn(e){if(e!==Xe)return!1;if(!ce)return Bc(e),ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!yi(e.type,e.memoizedProps)),t&&(t=Je)){if(bi(e))throw Vu(),Error(D(418));for(;t;)Bu(e,t),t=ar(t.nextSibling)}if(Bc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Je=ar(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Je=null}}else Je=Xe?ar(e.stateNode.nextSibling):null;return!0}function Vu(){for(var e=Je;e;)e=ar(e.nextSibling)}function fs(){Je=Xe=null,ce=!1}function go(e){vt===null?vt=[e]:vt.push(e)}var nh=Mt.ReactCurrentBatchConfig;function Bs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(D(309));var n=r.stateNode}if(!n)throw Error(D(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(D(284));if(!r._owner)throw Error(D(290,e))}return e}function Gn(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vc(e){var t=e._init;return t(e._payload)}function qu(e){function t(g,p){if(e){var f=g.deletions;f===null?(g.deletions=[p],g.flags|=16):f.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function a(g,p){return g=cr(g,p),g.index=0,g.sibling=null,g}function l(g,p,f){return g.index=f,e?(f=g.alternate,f!==null?(f=f.index,f<p?(g.flags|=2,p):f):(g.flags|=2,p)):(g.flags|=1048576,p)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,p,f,b){return p===null||p.tag!==6?(p=Ql(f,g.mode,b),p.return=g,p):(p=a(p,f),p.return=g,p)}function c(g,p,f,b){var k=f.type;return k===Hr?x(g,p,f.props.children,b,f.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Xt&&Vc(k)===p.type)?(b=a(p,f.props),b.ref=Bs(g,p,f),b.return=g,b):(b=pa(f.type,f.key,f.props,null,g.mode,b),b.ref=Bs(g,p,f),b.return=g,b)}function d(g,p,f,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==f.containerInfo||p.stateNode.implementation!==f.implementation?(p=Jl(f,g.mode,b),p.return=g,p):(p=a(p,f.children||[]),p.return=g,p)}function x(g,p,f,b,k){return p===null||p.tag!==7?(p=_r(f,g.mode,b,k),p.return=g,p):(p=a(p,f),p.return=g,p)}function m(g,p,f){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ql(""+p,g.mode,f),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case $n:return f=pa(p.type,p.key,p.props,null,g.mode,f),f.ref=Bs(g,null,p),f.return=g,f;case Wr:return p=Jl(p,g.mode,f),p.return=g,p;case Xt:var b=p._init;return m(g,b(p._payload),f)}if(Hs(p)||Os(p))return p=_r(p,g.mode,f,null),p.return=g,p;Gn(g,p)}return null}function h(g,p,f,b){var k=p!==null?p.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return k!==null?null:o(g,p,""+f,b);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case $n:return f.key===k?c(g,p,f,b):null;case Wr:return f.key===k?d(g,p,f,b):null;case Xt:return k=f._init,h(g,p,k(f._payload),b)}if(Hs(f)||Os(f))return k!==null?null:x(g,p,f,b,null);Gn(g,f)}return null}function j(g,p,f,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(f)||null,o(p,g,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $n:return g=g.get(b.key===null?f:b.key)||null,c(p,g,b,k);case Wr:return g=g.get(b.key===null?f:b.key)||null,d(p,g,b,k);case Xt:var R=b._init;return j(g,p,f,R(b._payload),k)}if(Hs(b)||Os(b))return g=g.get(f)||null,x(p,g,b,k,null);Gn(p,b)}return null}function y(g,p,f,b){for(var k=null,R=null,w=p,S=p=0,M=null;w!==null&&S<f.length;S++){w.index>S?(M=w,w=null):M=w.sibling;var F=h(g,w,f[S],b);if(F===null){w===null&&(w=M);break}e&&w&&F.alternate===null&&t(g,w),p=l(F,p,S),R===null?k=F:R.sibling=F,R=F,w=M}if(S===f.length)return r(g,w),ce&&br(g,S),k;if(w===null){for(;S<f.length;S++)w=m(g,f[S],b),w!==null&&(p=l(w,p,S),R===null?k=w:R.sibling=w,R=w);return ce&&br(g,S),k}for(w=n(g,w);S<f.length;S++)M=j(w,g,S,f[S],b),M!==null&&(e&&M.alternate!==null&&w.delete(M.key===null?S:M.key),p=l(M,p,S),R===null?k=M:R.sibling=M,R=M);return e&&w.forEach(function(J){return t(g,J)}),ce&&br(g,S),k}function N(g,p,f,b){var k=Os(f);if(typeof k!="function")throw Error(D(150));if(f=k.call(f),f==null)throw Error(D(151));for(var R=k=null,w=p,S=p=0,M=null,F=f.next();w!==null&&!F.done;S++,F=f.next()){w.index>S?(M=w,w=null):M=w.sibling;var J=h(g,w,F.value,b);if(J===null){w===null&&(w=M);break}e&&w&&J.alternate===null&&t(g,w),p=l(J,p,S),R===null?k=J:R.sibling=J,R=J,w=M}if(F.done)return r(g,w),ce&&br(g,S),k;if(w===null){for(;!F.done;S++,F=f.next())F=m(g,F.value,b),F!==null&&(p=l(F,p,S),R===null?k=F:R.sibling=F,R=F);return ce&&br(g,S),k}for(w=n(g,w);!F.done;S++,F=f.next())F=j(w,g,S,F.value,b),F!==null&&(e&&F.alternate!==null&&w.delete(F.key===null?S:F.key),p=l(F,p,S),R===null?k=F:R.sibling=F,R=F);return e&&w.forEach(function(W){return t(g,W)}),ce&&br(g,S),k}function P(g,p,f,b){if(typeof f=="object"&&f!==null&&f.type===Hr&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case $n:e:{for(var k=f.key,R=p;R!==null;){if(R.key===k){if(k=f.type,k===Hr){if(R.tag===7){r(g,R.sibling),p=a(R,f.props.children),p.return=g,g=p;break e}}else if(R.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Xt&&Vc(k)===R.type){r(g,R.sibling),p=a(R,f.props),p.ref=Bs(g,R,f),p.return=g,g=p;break e}r(g,R);break}else t(g,R);R=R.sibling}f.type===Hr?(p=_r(f.props.children,g.mode,b,f.key),p.return=g,g=p):(b=pa(f.type,f.key,f.props,null,g.mode,b),b.ref=Bs(g,p,f),b.return=g,g=b)}return i(g);case Wr:e:{for(R=f.key;p!==null;){if(p.key===R)if(p.tag===4&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){r(g,p.sibling),p=a(p,f.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=Jl(f,g.mode,b),p.return=g,g=p}return i(g);case Xt:return R=f._init,P(g,p,R(f._payload),b)}if(Hs(f))return y(g,p,f,b);if(Os(f))return N(g,p,f,b);Gn(g,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,p!==null&&p.tag===6?(r(g,p.sibling),p=a(p,f),p.return=g,g=p):(r(g,p),p=Ql(f,g.mode,b),p.return=g,g=p),i(g)):r(g,p)}return P}var ps=qu(!0),Wu=qu(!1),_a=pr(null),Pa=null,es=null,vo=null;function yo(){vo=es=Pa=null}function jo(e){var t=_a.current;oe(_a),e._currentValue=t}function Si(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function os(e,t){Pa=e,vo=es=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Me=!0),e.firstContext=null)}function ot(e){var t=e._currentValue;if(vo!==e)if(e={context:e,memoizedValue:t,next:null},es===null){if(Pa===null)throw Error(D(308));es=e,Pa.dependencies={lanes:0,firstContext:e}}else es=es.next=e;return t}var Er=null;function No(e){Er===null?Er=[e]:Er.push(e)}function Hu(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,No(t)):(r.next=a.next,a.next=r),t.interleaved=r,$t(e,n)}function $t(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Gt=!1;function wo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ft(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ee&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,$t(e,r)}return a=n.interleaved,a===null?(t.next=t,No(n)):(t.next=a.next,a.next=t),n.interleaved=t,$t(e,r)}function oa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,lo(e,r)}}function qc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ta(e,t,r,n){var a=e.updateQueue;Gt=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,i===null?l=d:i.next=d,i=c;var x=e.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==i&&(o===null?x.firstBaseUpdate=d:o.next=d,x.lastBaseUpdate=c))}if(l!==null){var m=a.baseState;i=0,x=d=c=null,o=l;do{var h=o.lane,j=o.eventTime;if((n&h)===h){x!==null&&(x=x.next={eventTime:j,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,N=o;switch(h=t,j=r,N.tag){case 1:if(y=N.payload,typeof y=="function"){m=y.call(j,m,h);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=N.payload,h=typeof y=="function"?y.call(j,m,h):y,h==null)break e;m=fe({},m,h);break e;case 2:Gt=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else j={eventTime:j,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(d=x=j,c=m):x=x.next=j,i|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(x===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=x,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Lr|=i,e.lanes=i,e.memoizedState=m}}function Wc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(D(191,a));a.call(n)}}}var _n={},_t=pr(_n),gn=pr(_n),vn=pr(_n);function Cr(e){if(e===_n)throw Error(D(174));return e}function bo(e,t){switch(le(vn,t),le(gn,e),le(_t,_n),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ai(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ai(t,e)}oe(_t),le(_t,t)}function xs(){oe(_t),oe(gn),oe(vn)}function Ju(e){Cr(vn.current);var t=Cr(_t.current),r=ai(t,e.type);t!==r&&(le(gn,e),le(_t,r))}function ko(e){gn.current===e&&(oe(_t),oe(gn))}var de=pr(0);function Aa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ml=[];function So(){for(var e=0;e<Ml.length;e++)Ml[e]._workInProgressVersionPrimary=null;Ml.length=0}var ca=Mt.ReactCurrentDispatcher,Bl=Mt.ReactCurrentBatchConfig,Ar=0,ue=null,je=null,be=null,La=!1,tn=!1,yn=0,ah=0;function _e(){throw Error(D(321))}function Eo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Nt(e[r],t[r]))return!1;return!0}function Co(e,t,r,n,a,l){if(Ar=l,ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ca.current=e===null||e.memoizedState===null?ch:dh,e=r(n,a),tn){l=0;do{if(tn=!1,yn=0,25<=l)throw Error(D(301));l+=1,be=je=null,t.updateQueue=null,ca.current=uh,e=r(n,a)}while(tn)}if(ca.current=Da,t=je!==null&&je.next!==null,Ar=0,be=je=ue=null,La=!1,t)throw Error(D(300));return e}function Ro(){var e=yn!==0;return yn=0,e}function Et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?ue.memoizedState=be=e:be=be.next=e,be}function ct(){if(je===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var t=be===null?ue.memoizedState:be.next;if(t!==null)be=t,je=e;else{if(e===null)throw Error(D(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},be===null?ue.memoizedState=be=e:be=be.next=e}return be}function jn(e,t){return typeof t=="function"?t(e):t}function Vl(e){var t=ct(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=je,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var o=i=null,c=null,d=l;do{var x=d.lane;if((Ar&x)===x)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:x,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,i=n):c=c.next=m,ue.lanes|=x,Lr|=x}d=d.next}while(d!==null&&d!==l);c===null?i=n:c.next=o,Nt(n,t.memoizedState)||(Me=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,ue.lanes|=l,Lr|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ql(e){var t=ct(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);Nt(l,t.memoizedState)||(Me=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function Xu(){}function Gu(e,t){var r=ue,n=ct(),a=t(),l=!Nt(n.memoizedState,a);if(l&&(n.memoizedState=a,Me=!0),n=n.queue,_o(Zu.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||be!==null&&be.memoizedState.tag&1){if(r.flags|=2048,Nn(9,Yu.bind(null,r,n,a,t),void 0,null),ke===null)throw Error(D(349));Ar&30||Ku(r,t,a)}return a}function Ku(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Yu(e,t,r,n){t.value=r,t.getSnapshot=n,em(t)&&tm(e)}function Zu(e,t,r){return r(function(){em(t)&&tm(e)})}function em(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Nt(e,r)}catch{return!0}}function tm(e){var t=$t(e,1);t!==null&&jt(t,e,1,-1)}function Hc(e){var t=Et();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:e},t.queue=e,e=e.dispatch=oh.bind(null,ue,e),[t.memoizedState,e]}function Nn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function rm(){return ct().memoizedState}function da(e,t,r,n){var a=Et();ue.flags|=e,a.memoizedState=Nn(1|t,r,void 0,n===void 0?null:n)}function Ya(e,t,r,n){var a=ct();n=n===void 0?null:n;var l=void 0;if(je!==null){var i=je.memoizedState;if(l=i.destroy,n!==null&&Eo(n,i.deps)){a.memoizedState=Nn(t,r,l,n);return}}ue.flags|=e,a.memoizedState=Nn(1|t,r,l,n)}function Qc(e,t){return da(8390656,8,e,t)}function _o(e,t){return Ya(2048,8,e,t)}function sm(e,t){return Ya(4,2,e,t)}function nm(e,t){return Ya(4,4,e,t)}function am(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lm(e,t,r){return r=r!=null?r.concat([e]):null,Ya(4,4,am.bind(null,t,e),r)}function Po(){}function im(e,t){var r=ct();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Eo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function om(e,t){var r=ct();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Eo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function cm(e,t,r){return Ar&21?(Nt(r,t)||(r=pu(),ue.lanes|=r,Lr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Me=!0),e.memoizedState=r)}function lh(e,t){var r=re;re=r!==0&&4>r?r:4,e(!0);var n=Bl.transition;Bl.transition={};try{e(!1),t()}finally{re=r,Bl.transition=n}}function dm(){return ct().memoizedState}function ih(e,t,r){var n=or(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},um(e))mm(t,r);else if(r=Hu(e,t,r,n),r!==null){var a=Ie();jt(r,e,n,a),fm(r,t,n)}}function oh(e,t,r){var n=or(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(um(e))mm(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,Nt(o,i)){var c=t.interleaved;c===null?(a.next=a,No(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Hu(e,t,a,n),r!==null&&(a=Ie(),jt(r,e,n,a),fm(r,t,n))}}function um(e){var t=e.alternate;return e===ue||t!==null&&t===ue}function mm(e,t){tn=La=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function fm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,lo(e,r)}}var Da={readContext:ot,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},ch={readContext:ot,useCallback:function(e,t){return Et().memoizedState=[e,t===void 0?null:t],e},useContext:ot,useEffect:Qc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,da(4194308,4,am.bind(null,t,e),r)},useLayoutEffect:function(e,t){return da(4194308,4,e,t)},useInsertionEffect:function(e,t){return da(4,2,e,t)},useMemo:function(e,t){var r=Et();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Et();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ih.bind(null,ue,e),[n.memoizedState,e]},useRef:function(e){var t=Et();return e={current:e},t.memoizedState=e},useState:Hc,useDebugValue:Po,useDeferredValue:function(e){return Et().memoizedState=e},useTransition:function(){var e=Hc(!1),t=e[0];return e=lh.bind(null,e[1]),Et().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ue,a=Et();if(ce){if(r===void 0)throw Error(D(407));r=r()}else{if(r=t(),ke===null)throw Error(D(349));Ar&30||Ku(n,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,Qc(Zu.bind(null,n,l,e),[e]),n.flags|=2048,Nn(9,Yu.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=Et(),t=ke.identifierPrefix;if(ce){var r=It,n=Dt;r=(n&~(1<<32-yt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=yn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ah++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dh={readContext:ot,useCallback:im,useContext:ot,useEffect:_o,useImperativeHandle:lm,useInsertionEffect:sm,useLayoutEffect:nm,useMemo:om,useReducer:Vl,useRef:rm,useState:function(){return Vl(jn)},useDebugValue:Po,useDeferredValue:function(e){var t=ct();return cm(t,je.memoizedState,e)},useTransition:function(){var e=Vl(jn)[0],t=ct().memoizedState;return[e,t]},useMutableSource:Xu,useSyncExternalStore:Gu,useId:dm,unstable_isNewReconciler:!1},uh={readContext:ot,useCallback:im,useContext:ot,useEffect:_o,useImperativeHandle:lm,useInsertionEffect:sm,useLayoutEffect:nm,useMemo:om,useReducer:ql,useRef:rm,useState:function(){return ql(jn)},useDebugValue:Po,useDeferredValue:function(e){var t=ct();return je===null?t.memoizedState=e:cm(t,je.memoizedState,e)},useTransition:function(){var e=ql(jn)[0],t=ct().memoizedState;return[e,t]},useMutableSource:Xu,useSyncExternalStore:Gu,useId:dm,unstable_isNewReconciler:!1};function ht(e,t){if(e&&e.defaultProps){t=fe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ei(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:fe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Za={isMounted:function(e){return(e=e._reactInternals)?Fr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ie(),a=or(e),l=Ft(n,a);l.payload=t,r!=null&&(l.callback=r),t=lr(e,l,a),t!==null&&(jt(t,e,a,n),oa(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ie(),a=or(e),l=Ft(n,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=lr(e,l,a),t!==null&&(jt(t,e,a,n),oa(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ie(),n=or(e),a=Ft(r,n);a.tag=2,t!=null&&(a.callback=t),t=lr(e,a,n),t!==null&&(jt(t,e,n,r),oa(t,e,n))}};function Jc(e,t,r,n,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):t.prototype&&t.prototype.isPureReactComponent?!fn(r,n)||!fn(a,l):!0}function pm(e,t,r){var n=!1,a=mr,l=t.contextType;return typeof l=="object"&&l!==null?l=ot(l):(a=Ve(t)?Pr:Ae.current,n=t.contextTypes,l=(n=n!=null)?ms(e,a):mr),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Za,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Xc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Za.enqueueReplaceState(t,t.state,null)}function Ci(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},wo(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=ot(l):(l=Ve(t)?Pr:Ae.current,a.context=ms(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Ei(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Za.enqueueReplaceState(a,a.state,null),Ta(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function hs(e,t){try{var r="",n=t;do r+=$p(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Wl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ri(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var mh=typeof WeakMap=="function"?WeakMap:Map;function xm(e,t,r){r=Ft(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Fa||(Fa=!0,zi=n),Ri(e,t)},r}function hm(e,t,r){r=Ft(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Ri(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Ri(e,t),typeof n!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Gc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new mh;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Eh.bind(null,e,t,r),t.then(e,e))}function Kc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yc(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ft(-1,1),t.tag=2,lr(r,t,1))),r.lanes|=1),e)}var fh=Mt.ReactCurrentOwner,Me=!1;function De(e,t,r,n){t.child=e===null?Wu(t,null,r,n):ps(t,e.child,r,n)}function Zc(e,t,r,n,a){r=r.render;var l=t.ref;return os(t,a),n=Co(e,t,r,n,l,a),r=Ro(),e!==null&&!Me?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ut(e,t,a)):(ce&&r&&xo(t),t.flags|=1,De(e,t,n,a),t.child)}function ed(e,t,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!zo(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,gm(e,t,l,n,a)):(e=pa(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:fn,r(i,n)&&e.ref===t.ref)return Ut(e,t,a)}return t.flags|=1,e=cr(l,n),e.ref=t.ref,e.return=t,t.child=e}function gm(e,t,r,n,a){if(e!==null){var l=e.memoizedProps;if(fn(l,n)&&e.ref===t.ref)if(Me=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(Me=!0);else return t.lanes=e.lanes,Ut(e,t,a)}return _i(e,t,r,n,a)}function vm(e,t,r){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(rs,Qe),Qe|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,le(rs,Qe),Qe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,le(rs,Qe),Qe|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,le(rs,Qe),Qe|=n;return De(e,t,a,r),t.child}function ym(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function _i(e,t,r,n,a){var l=Ve(r)?Pr:Ae.current;return l=ms(t,l),os(t,a),r=Co(e,t,r,n,l,a),n=Ro(),e!==null&&!Me?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ut(e,t,a)):(ce&&n&&xo(t),t.flags|=1,De(e,t,r,a),t.child)}function td(e,t,r,n,a){if(Ve(r)){var l=!0;Ea(t)}else l=!1;if(os(t,a),t.stateNode===null)ua(e,t),pm(t,r,n),Ci(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=ot(d):(d=Ve(r)?Pr:Ae.current,d=ms(t,d));var x=r.getDerivedStateFromProps,m=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==d)&&Xc(t,i,n,d),Gt=!1;var h=t.memoizedState;i.state=h,Ta(t,n,i,a),c=t.memoizedState,o!==n||h!==c||Be.current||Gt?(typeof x=="function"&&(Ei(t,r,x,n),c=t.memoizedState),(o=Gt||Jc(t,r,o,n,h,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Qu(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:ht(t.type,o),i.props=d,m=t.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=ot(c):(c=Ve(r)?Pr:Ae.current,c=ms(t,c));var j=r.getDerivedStateFromProps;(x=typeof j=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==m||h!==c)&&Xc(t,i,n,c),Gt=!1,h=t.memoizedState,i.state=h,Ta(t,n,i,a);var y=t.memoizedState;o!==m||h!==y||Be.current||Gt?(typeof j=="function"&&(Ei(t,r,j,n),y=t.memoizedState),(d=Gt||Jc(t,r,d,n,h,y,c)||!1)?(x||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),i.props=n,i.state=y,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Pi(e,t,r,n,l,a)}function Pi(e,t,r,n,a,l){ym(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&Uc(t,r,!1),Ut(e,t,l);n=t.stateNode,fh.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=ps(t,e.child,null,l),t.child=ps(t,null,o,l)):De(e,t,o,l),t.memoizedState=n.state,a&&Uc(t,r,!0),t.child}function jm(e){var t=e.stateNode;t.pendingContext?$c(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$c(e,t.context,!1),bo(e,t.containerInfo)}function rd(e,t,r,n,a){return fs(),go(a),t.flags|=256,De(e,t,r,n),t.child}var Ti={dehydrated:null,treeContext:null,retryLane:0};function Ai(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nm(e,t,r){var n=t.pendingProps,a=de.current,l=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),le(de,a&1),e===null)return ki(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,l?(n=t.mode,l=t.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=rl(i,n,0,null),e=_r(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ai(r),t.memoizedState=Ti,e):To(t,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return ph(e,t,i,n,o,a,r);if(l){l=n.fallback,i=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=cr(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=cr(o,l):(l=_r(l,i,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,i=e.child.memoizedState,i=i===null?Ai(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,t.memoizedState=Ti,n}return l=e.child,e=l.sibling,n=cr(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function To(e,t){return t=rl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Kn(e,t,r,n){return n!==null&&go(n),ps(t,e.child,null,r),e=To(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ph(e,t,r,n,a,l,i){if(r)return t.flags&256?(t.flags&=-257,n=Wl(Error(D(422))),Kn(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=rl({mode:"visible",children:n.children},a,0,null),l=_r(l,a,i,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&ps(t,e.child,null,i),t.child.memoizedState=Ai(i),t.memoizedState=Ti,l);if(!(t.mode&1))return Kn(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(D(419)),n=Wl(l,n,void 0),Kn(e,t,i,n)}if(o=(i&e.childLanes)!==0,Me||o){if(n=ke,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,$t(e,a),jt(n,e,a,-1))}return Oo(),n=Wl(Error(D(421))),Kn(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Ch.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Je=ar(a.nextSibling),Xe=t,ce=!0,vt=null,e!==null&&(nt[at++]=Dt,nt[at++]=It,nt[at++]=Tr,Dt=e.id,It=e.overflow,Tr=t),t=To(t,n.children),t.flags|=4096,t)}function sd(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Si(e.return,t,r)}function Hl(e,t,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function wm(e,t,r){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(De(e,t,n.children,r),n=de.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sd(e,r,t);else if(e.tag===19)sd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(le(de,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Aa(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Hl(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Aa(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Hl(t,!0,r,null,l);break;case"together":Hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ua(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ut(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Lr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,r=cr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=cr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function xh(e,t,r){switch(t.tag){case 3:jm(t),fs();break;case 5:Ju(t);break;case 1:Ve(t.type)&&Ea(t);break;case 4:bo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;le(_a,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(le(de,de.current&1),t.flags|=128,null):r&t.child.childLanes?Nm(e,t,r):(le(de,de.current&1),e=Ut(e,t,r),e!==null?e.sibling:null);le(de,de.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return wm(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),le(de,de.current),n)break;return null;case 22:case 23:return t.lanes=0,vm(e,t,r)}return Ut(e,t,r)}var bm,Li,km,Sm;bm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Li=function(){};km=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Cr(_t.current);var l=null;switch(r){case"input":a=ti(e,a),n=ti(e,n),l=[];break;case"select":a=fe({},a,{value:void 0}),n=fe({},n,{value:void 0}),l=[];break;case"textarea":a=ni(e,a),n=ni(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ka)}li(r,n);var i;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(an.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(an.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ie("scroll",e),l||o===c||(l=[])):(l=l||[]).push(d,c))}r&&(l=l||[]).push("style",r);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Sm=function(e,t,r,n){r!==n&&(t.flags|=4)};function Vs(e,t){if(!ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Pe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function hh(e,t,r){var n=t.pendingProps;switch(ho(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(t),null;case 1:return Ve(t.type)&&Sa(),Pe(t),null;case 3:return n=t.stateNode,xs(),oe(Be),oe(Ae),So(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vt!==null&&(Mi(vt),vt=null))),Li(e,t),Pe(t),null;case 5:ko(t);var a=Cr(vn.current);if(r=t.type,e!==null&&t.stateNode!=null)km(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(D(166));return Pe(t),null}if(e=Cr(_t.current),Xn(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[Ct]=t,n[hn]=l,e=(t.mode&1)!==0,r){case"dialog":ie("cancel",n),ie("close",n);break;case"iframe":case"object":case"embed":ie("load",n);break;case"video":case"audio":for(a=0;a<Js.length;a++)ie(Js[a],n);break;case"source":ie("error",n);break;case"img":case"image":case"link":ie("error",n),ie("load",n);break;case"details":ie("toggle",n);break;case"input":mc(n,l),ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},ie("invalid",n);break;case"textarea":pc(n,l),ie("invalid",n)}li(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&Jn(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Jn(n.textContent,o,e),a=["children",""+o]):an.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&ie("scroll",n)}switch(r){case"input":Un(n),fc(n,l,!0);break;case"textarea":Un(n),xc(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=ka)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Ct]=t,e[hn]=n,bm(e,t,!1,!1),t.stateNode=e;e:{switch(i=ii(r,n),r){case"dialog":ie("cancel",e),ie("close",e),a=n;break;case"iframe":case"object":case"embed":ie("load",e),a=n;break;case"video":case"audio":for(a=0;a<Js.length;a++)ie(Js[a],e);a=n;break;case"source":ie("error",e),a=n;break;case"img":case"image":case"link":ie("error",e),ie("load",e),a=n;break;case"details":ie("toggle",e),a=n;break;case"input":mc(e,n),a=ti(e,n),ie("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=fe({},n,{value:void 0}),ie("invalid",e);break;case"textarea":pc(e,n),a=ni(e,n),ie("invalid",e);break;default:a=n}li(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?ru(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&eu(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ln(e,c):typeof c=="number"&&ln(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(an.hasOwnProperty(l)?c!=null&&l==="onScroll"&&ie("scroll",e):c!=null&&eo(e,l,c,i))}switch(r){case"input":Un(e),fc(e,n,!1);break;case"textarea":Un(e),xc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ur(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?ns(e,!!n.multiple,l,!1):n.defaultValue!=null&&ns(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ka)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pe(t),null;case 6:if(e&&t.stateNode!=null)Sm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(D(166));if(r=Cr(vn.current),Cr(_t.current),Xn(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ct]=t,(l=n.nodeValue!==r)&&(e=Xe,e!==null))switch(e.tag){case 3:Jn(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Jn(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ct]=t,t.stateNode=n}return Pe(t),null;case 13:if(oe(de),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ce&&Je!==null&&t.mode&1&&!(t.flags&128))Vu(),fs(),t.flags|=98560,l=!1;else if(l=Xn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(D(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(D(317));l[Ct]=t}else fs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pe(t),l=!1}else vt!==null&&(Mi(vt),vt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||de.current&1?Ne===0&&(Ne=3):Oo())),t.updateQueue!==null&&(t.flags|=4),Pe(t),null);case 4:return xs(),Li(e,t),e===null&&pn(t.stateNode.containerInfo),Pe(t),null;case 10:return jo(t.type._context),Pe(t),null;case 17:return Ve(t.type)&&Sa(),Pe(t),null;case 19:if(oe(de),l=t.memoizedState,l===null)return Pe(t),null;if(n=(t.flags&128)!==0,i=l.rendering,i===null)if(n)Vs(l,!1);else{if(Ne!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Aa(e),i!==null){for(t.flags|=128,Vs(l,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return le(de,de.current&1|2),t.child}e=e.sibling}l.tail!==null&&ge()>gs&&(t.flags|=128,n=!0,Vs(l,!1),t.lanes=4194304)}else{if(!n)if(e=Aa(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!ce)return Pe(t),null}else 2*ge()-l.renderingStartTime>gs&&r!==1073741824&&(t.flags|=128,n=!0,Vs(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(r=l.last,r!==null?r.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ge(),t.sibling=null,r=de.current,le(de,n?r&1|2:r&1),t):(Pe(t),null);case 22:case 23:return Fo(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Qe&1073741824&&(Pe(t),t.subtreeFlags&6&&(t.flags|=8192)):Pe(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function gh(e,t){switch(ho(t),t.tag){case 1:return Ve(t.type)&&Sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xs(),oe(Be),oe(Ae),So(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ko(t),null;case 13:if(oe(de),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));fs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(de),null;case 4:return xs(),null;case 10:return jo(t.type._context),null;case 22:case 23:return Fo(),null;case 24:return null;default:return null}}var Yn=!1,Te=!1,vh=typeof WeakSet=="function"?WeakSet:Set,$=null;function ts(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){xe(e,t,n)}else r.current=null}function Di(e,t,r){try{r()}catch(n){xe(e,t,n)}}var nd=!1;function yh(e,t){if(gi=Na,e=Pu(),po(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,d=0,x=0,m=e,h=null;t:for(;;){for(var j;m!==r||a!==0&&m.nodeType!==3||(o=i+a),m!==l||n!==0&&m.nodeType!==3||(c=i+n),m.nodeType===3&&(i+=m.nodeValue.length),(j=m.firstChild)!==null;)h=m,m=j;for(;;){if(m===e)break t;if(h===r&&++d===a&&(o=i),h===l&&++x===n&&(c=i),(j=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=j}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(vi={focusedElem:e,selectionRange:r},Na=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var N=y.memoizedProps,P=y.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?N:ht(t.type,N),P);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(b){xe(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return y=nd,nd=!1,y}function rn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Di(t,r,l)}a=a.next}while(a!==n)}}function el(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ii(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Em(e){var t=e.alternate;t!==null&&(e.alternate=null,Em(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ct],delete t[hn],delete t[Ni],delete t[th],delete t[rh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cm(e){return e.tag===5||e.tag===3||e.tag===4}function ad(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ka));else if(n!==4&&(e=e.child,e!==null))for(Fi(e,t,r),e=e.sibling;e!==null;)Fi(e,t,r),e=e.sibling}function Oi(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Oi(e,t,r),e=e.sibling;e!==null;)Oi(e,t,r),e=e.sibling}var Ee=null,gt=!1;function Jt(e,t,r){for(r=r.child;r!==null;)Rm(e,t,r),r=r.sibling}function Rm(e,t,r){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Ha,r)}catch{}switch(r.tag){case 5:Te||ts(r,t);case 6:var n=Ee,a=gt;Ee=null,Jt(e,t,r),Ee=n,gt=a,Ee!==null&&(gt?(e=Ee,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ee.removeChild(r.stateNode));break;case 18:Ee!==null&&(gt?(e=Ee,r=r.stateNode,e.nodeType===8?$l(e.parentNode,r):e.nodeType===1&&$l(e,r),un(e)):$l(Ee,r.stateNode));break;case 4:n=Ee,a=gt,Ee=r.stateNode.containerInfo,gt=!0,Jt(e,t,r),Ee=n,gt=a;break;case 0:case 11:case 14:case 15:if(!Te&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Di(r,t,i),a=a.next}while(a!==n)}Jt(e,t,r);break;case 1:if(!Te&&(ts(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){xe(r,t,o)}Jt(e,t,r);break;case 21:Jt(e,t,r);break;case 22:r.mode&1?(Te=(n=Te)||r.memoizedState!==null,Jt(e,t,r),Te=n):Jt(e,t,r);break;default:Jt(e,t,r)}}function ld(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new vh),t.forEach(function(n){var a=Rh.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ft(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:Ee=o.stateNode,gt=!1;break e;case 3:Ee=o.stateNode.containerInfo,gt=!0;break e;case 4:Ee=o.stateNode.containerInfo,gt=!0;break e}o=o.return}if(Ee===null)throw Error(D(160));Rm(l,i,a),Ee=null,gt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){xe(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_m(t,e),t=t.sibling}function _m(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ft(t,e),bt(e),n&4){try{rn(3,e,e.return),el(3,e)}catch(N){xe(e,e.return,N)}try{rn(5,e,e.return)}catch(N){xe(e,e.return,N)}}break;case 1:ft(t,e),bt(e),n&512&&r!==null&&ts(r,r.return);break;case 5:if(ft(t,e),bt(e),n&512&&r!==null&&ts(r,r.return),e.flags&32){var a=e.stateNode;try{ln(a,"")}catch(N){xe(e,e.return,N)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Kd(a,l),ii(o,i);var d=ii(o,l);for(i=0;i<c.length;i+=2){var x=c[i],m=c[i+1];x==="style"?ru(a,m):x==="dangerouslySetInnerHTML"?eu(a,m):x==="children"?ln(a,m):eo(a,x,m,d)}switch(o){case"input":ri(a,l);break;case"textarea":Yd(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var j=l.value;j!=null?ns(a,!!l.multiple,j,!1):h!==!!l.multiple&&(l.defaultValue!=null?ns(a,!!l.multiple,l.defaultValue,!0):ns(a,!!l.multiple,l.multiple?[]:"",!1))}a[hn]=l}catch(N){xe(e,e.return,N)}}break;case 6:if(ft(t,e),bt(e),n&4){if(e.stateNode===null)throw Error(D(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(N){xe(e,e.return,N)}}break;case 3:if(ft(t,e),bt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{un(t.containerInfo)}catch(N){xe(e,e.return,N)}break;case 4:ft(t,e),bt(e);break;case 13:ft(t,e),bt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Do=ge())),n&4&&ld(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(Te=(d=Te)||x,ft(t,e),Te=d):ft(t,e),bt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!x&&e.mode&1)for($=e,x=e.child;x!==null;){for(m=$=x;$!==null;){switch(h=$,j=h.child,h.tag){case 0:case 11:case 14:case 15:rn(4,h,h.return);break;case 1:ts(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(N){xe(n,r,N)}}break;case 5:ts(h,h.return);break;case 22:if(h.memoizedState!==null){od(m);continue}}j!==null?(j.return=h,$=j):od(m)}x=x.sibling}e:for(x=null,m=e;;){if(m.tag===5){if(x===null){x=m;try{a=m.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=tu("display",i))}catch(N){xe(e,e.return,N)}}}else if(m.tag===6){if(x===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){xe(e,e.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;x===m&&(x=null),m=m.return}x===m&&(x=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ft(t,e),bt(e),n&4&&ld(e);break;case 21:break;default:ft(t,e),bt(e)}}function bt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Cm(r)){var n=r;break e}r=r.return}throw Error(D(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ln(a,""),n.flags&=-33);var l=ad(e);Oi(e,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=ad(e);Fi(e,o,i);break;default:throw Error(D(161))}}catch(c){xe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jh(e,t,r){$=e,Pm(e)}function Pm(e,t,r){for(var n=(e.mode&1)!==0;$!==null;){var a=$,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||Yn;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Te;o=Yn;var d=Te;if(Yn=i,(Te=c)&&!d)for($=a;$!==null;)i=$,c=i.child,i.tag===22&&i.memoizedState!==null?cd(a):c!==null?(c.return=i,$=c):cd(a);for(;l!==null;)$=l,Pm(l),l=l.sibling;$=a,Yn=o,Te=d}id(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,$=l):id(e)}}function id(e){for(;$!==null;){var t=$;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Te||el(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Te)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ht(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Wc(t,l,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Wc(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var x=d.memoizedState;if(x!==null){var m=x.dehydrated;m!==null&&un(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Te||t.flags&512&&Ii(t)}catch(h){xe(t,t.return,h)}}if(t===e){$=null;break}if(r=t.sibling,r!==null){r.return=t.return,$=r;break}$=t.return}}function od(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var r=t.sibling;if(r!==null){r.return=t.return,$=r;break}$=t.return}}function cd(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{el(4,t)}catch(c){xe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){xe(t,a,c)}}var l=t.return;try{Ii(t)}catch(c){xe(t,l,c)}break;case 5:var i=t.return;try{Ii(t)}catch(c){xe(t,i,c)}}}catch(c){xe(t,t.return,c)}if(t===e){$=null;break}var o=t.sibling;if(o!==null){o.return=t.return,$=o;break}$=t.return}}var Nh=Math.ceil,Ia=Mt.ReactCurrentDispatcher,Ao=Mt.ReactCurrentOwner,it=Mt.ReactCurrentBatchConfig,ee=0,ke=null,ve=null,Ce=0,Qe=0,rs=pr(0),Ne=0,wn=null,Lr=0,tl=0,Lo=0,sn=null,Ue=null,Do=0,gs=1/0,Tt=null,Fa=!1,zi=null,ir=null,Zn=!1,er=null,Oa=0,nn=0,$i=null,ma=-1,fa=0;function Ie(){return ee&6?ge():ma!==-1?ma:ma=ge()}function or(e){return e.mode&1?ee&2&&Ce!==0?Ce&-Ce:nh.transition!==null?(fa===0&&(fa=pu()),fa):(e=re,e!==0||(e=window.event,e=e===void 0?16:Nu(e.type)),e):1}function jt(e,t,r,n){if(50<nn)throw nn=0,$i=null,Error(D(185));En(e,r,n),(!(ee&2)||e!==ke)&&(e===ke&&(!(ee&2)&&(tl|=r),Ne===4&&Yt(e,Ce)),qe(e,n),r===1&&ee===0&&!(t.mode&1)&&(gs=ge()+500,Ka&&xr()))}function qe(e,t){var r=e.callbackNode;nx(e,t);var n=ja(e,e===ke?Ce:0);if(n===0)r!==null&&vc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&vc(r),t===1)e.tag===0?sh(dd.bind(null,e)):Uu(dd.bind(null,e)),Zx(function(){!(ee&6)&&xr()}),r=null;else{switch(xu(n)){case 1:r=ao;break;case 4:r=mu;break;case 16:r=ya;break;case 536870912:r=fu;break;default:r=ya}r=zm(r,Tm.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Tm(e,t){if(ma=-1,fa=0,ee&6)throw Error(D(327));var r=e.callbackNode;if(cs()&&e.callbackNode!==r)return null;var n=ja(e,e===ke?Ce:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=za(e,n);else{t=n;var a=ee;ee|=2;var l=Lm();(ke!==e||Ce!==t)&&(Tt=null,gs=ge()+500,Rr(e,t));do try{kh();break}catch(o){Am(e,o)}while(!0);yo(),Ia.current=l,ee=a,ve!==null?t=0:(ke=null,Ce=0,t=Ne)}if(t!==0){if(t===2&&(a=mi(e),a!==0&&(n=a,t=Ui(e,a))),t===1)throw r=wn,Rr(e,0),Yt(e,n),qe(e,ge()),r;if(t===6)Yt(e,n);else{if(a=e.current.alternate,!(n&30)&&!wh(a)&&(t=za(e,n),t===2&&(l=mi(e),l!==0&&(n=l,t=Ui(e,l))),t===1))throw r=wn,Rr(e,0),Yt(e,n),qe(e,ge()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(D(345));case 2:kr(e,Ue,Tt);break;case 3:if(Yt(e,n),(n&130023424)===n&&(t=Do+500-ge(),10<t)){if(ja(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ie(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ji(kr.bind(null,e,Ue,Tt),t);break}kr(e,Ue,Tt);break;case 4:if(Yt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-yt(n);l=1<<i,i=t[i],i>a&&(a=i),n&=~l}if(n=a,n=ge()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nh(n/1960))-n,10<n){e.timeoutHandle=ji(kr.bind(null,e,Ue,Tt),n);break}kr(e,Ue,Tt);break;case 5:kr(e,Ue,Tt);break;default:throw Error(D(329))}}}return qe(e,ge()),e.callbackNode===r?Tm.bind(null,e):null}function Ui(e,t){var r=sn;return e.current.memoizedState.isDehydrated&&(Rr(e,t).flags|=256),e=za(e,t),e!==2&&(t=Ue,Ue=r,t!==null&&Mi(t)),e}function Mi(e){Ue===null?Ue=e:Ue.push.apply(Ue,e)}function wh(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!Nt(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yt(e,t){for(t&=~Lo,t&=~tl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-yt(t),n=1<<r;e[r]=-1,t&=~n}}function dd(e){if(ee&6)throw Error(D(327));cs();var t=ja(e,0);if(!(t&1))return qe(e,ge()),null;var r=za(e,t);if(e.tag!==0&&r===2){var n=mi(e);n!==0&&(t=n,r=Ui(e,n))}if(r===1)throw r=wn,Rr(e,0),Yt(e,t),qe(e,ge()),r;if(r===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kr(e,Ue,Tt),qe(e,ge()),null}function Io(e,t){var r=ee;ee|=1;try{return e(t)}finally{ee=r,ee===0&&(gs=ge()+500,Ka&&xr())}}function Dr(e){er!==null&&er.tag===0&&!(ee&6)&&cs();var t=ee;ee|=1;var r=it.transition,n=re;try{if(it.transition=null,re=1,e)return e()}finally{re=n,it.transition=r,ee=t,!(ee&6)&&xr()}}function Fo(){Qe=rs.current,oe(rs)}function Rr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Yx(r)),ve!==null)for(r=ve.return;r!==null;){var n=r;switch(ho(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Sa();break;case 3:xs(),oe(Be),oe(Ae),So();break;case 5:ko(n);break;case 4:xs();break;case 13:oe(de);break;case 19:oe(de);break;case 10:jo(n.type._context);break;case 22:case 23:Fo()}r=r.return}if(ke=e,ve=e=cr(e.current,null),Ce=Qe=t,Ne=0,wn=null,Lo=tl=Lr=0,Ue=sn=null,Er!==null){for(t=0;t<Er.length;t++)if(r=Er[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}Er=null}return e}function Am(e,t){do{var r=ve;try{if(yo(),ca.current=Da,La){for(var n=ue.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}La=!1}if(Ar=0,be=je=ue=null,tn=!1,yn=0,Ao.current=null,r===null||r.return===null){Ne=1,wn=t,ve=null;break}e:{var l=e,i=r.return,o=r,c=t;if(t=Ce,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,x=o,m=x.tag;if(!(x.mode&1)&&(m===0||m===11||m===15)){var h=x.alternate;h?(x.updateQueue=h.updateQueue,x.memoizedState=h.memoizedState,x.lanes=h.lanes):(x.updateQueue=null,x.memoizedState=null)}var j=Kc(i);if(j!==null){j.flags&=-257,Yc(j,i,o,l,t),j.mode&1&&Gc(l,d,t),t=j,c=d;var y=t.updateQueue;if(y===null){var N=new Set;N.add(c),t.updateQueue=N}else y.add(c);break e}else{if(!(t&1)){Gc(l,d,t),Oo();break e}c=Error(D(426))}}else if(ce&&o.mode&1){var P=Kc(i);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Yc(P,i,o,l,t),go(hs(c,o));break e}}l=c=hs(c,o),Ne!==4&&(Ne=2),sn===null?sn=[l]:sn.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=xm(l,c,t);qc(l,g);break e;case 1:o=c;var p=l.type,f=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ir===null||!ir.has(f)))){l.flags|=65536,t&=-t,l.lanes|=t;var b=hm(l,o,t);qc(l,b);break e}}l=l.return}while(l!==null)}Im(r)}catch(k){t=k,ve===r&&r!==null&&(ve=r=r.return);continue}break}while(!0)}function Lm(){var e=Ia.current;return Ia.current=Da,e===null?Da:e}function Oo(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),ke===null||!(Lr&268435455)&&!(tl&268435455)||Yt(ke,Ce)}function za(e,t){var r=ee;ee|=2;var n=Lm();(ke!==e||Ce!==t)&&(Tt=null,Rr(e,t));do try{bh();break}catch(a){Am(e,a)}while(!0);if(yo(),ee=r,Ia.current=n,ve!==null)throw Error(D(261));return ke=null,Ce=0,Ne}function bh(){for(;ve!==null;)Dm(ve)}function kh(){for(;ve!==null&&!Xp();)Dm(ve)}function Dm(e){var t=Om(e.alternate,e,Qe);e.memoizedProps=e.pendingProps,t===null?Im(e):ve=t,Ao.current=null}function Im(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gh(r,t),r!==null){r.flags&=32767,ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ne=6,ve=null;return}}else if(r=hh(r,t,Qe),r!==null){ve=r;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);Ne===0&&(Ne=5)}function kr(e,t,r){var n=re,a=it.transition;try{it.transition=null,re=1,Sh(e,t,r,n)}finally{it.transition=a,re=n}return null}function Sh(e,t,r,n){do cs();while(er!==null);if(ee&6)throw Error(D(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(ax(e,l),e===ke&&(ve=ke=null,Ce=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zn||(Zn=!0,zm(ya,function(){return cs(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=it.transition,it.transition=null;var i=re;re=1;var o=ee;ee|=4,Ao.current=null,yh(e,r),_m(r,e),Wx(vi),Na=!!gi,vi=gi=null,e.current=r,jh(r),Gp(),ee=o,re=i,it.transition=l}else e.current=r;if(Zn&&(Zn=!1,er=e,Oa=a),l=e.pendingLanes,l===0&&(ir=null),Zp(r.stateNode),qe(e,ge()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Fa)throw Fa=!1,e=zi,zi=null,e;return Oa&1&&e.tag!==0&&cs(),l=e.pendingLanes,l&1?e===$i?nn++:(nn=0,$i=e):nn=0,xr(),null}function cs(){if(er!==null){var e=xu(Oa),t=it.transition,r=re;try{if(it.transition=null,re=16>e?16:e,er===null)var n=!1;else{if(e=er,er=null,Oa=0,ee&6)throw Error(D(331));var a=ee;for(ee|=4,$=e.current;$!==null;){var l=$,i=l.child;if($.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for($=d;$!==null;){var x=$;switch(x.tag){case 0:case 11:case 15:rn(8,x,l)}var m=x.child;if(m!==null)m.return=x,$=m;else for(;$!==null;){x=$;var h=x.sibling,j=x.return;if(Em(x),x===d){$=null;break}if(h!==null){h.return=j,$=h;break}$=j}}}var y=l.alternate;if(y!==null){var N=y.child;if(N!==null){y.child=null;do{var P=N.sibling;N.sibling=null,N=P}while(N!==null)}}$=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,$=i;else e:for(;$!==null;){if(l=$,l.flags&2048)switch(l.tag){case 0:case 11:case 15:rn(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,$=g;break e}$=l.return}}var p=e.current;for($=p;$!==null;){i=$;var f=i.child;if(i.subtreeFlags&2064&&f!==null)f.return=i,$=f;else e:for(i=p;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:el(9,o)}}catch(k){xe(o,o.return,k)}if(o===i){$=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,$=b;break e}$=o.return}}if(ee=a,xr(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Ha,e)}catch{}n=!0}return n}finally{re=r,it.transition=t}}return!1}function ud(e,t,r){t=hs(r,t),t=xm(e,t,1),e=lr(e,t,1),t=Ie(),e!==null&&(En(e,1,t),qe(e,t))}function xe(e,t,r){if(e.tag===3)ud(e,e,r);else for(;t!==null;){if(t.tag===3){ud(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ir===null||!ir.has(n))){e=hs(r,e),e=hm(t,e,1),t=lr(t,e,1),e=Ie(),t!==null&&(En(t,1,e),qe(t,e));break}}t=t.return}}function Eh(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ie(),e.pingedLanes|=e.suspendedLanes&r,ke===e&&(Ce&r)===r&&(Ne===4||Ne===3&&(Ce&130023424)===Ce&&500>ge()-Do?Rr(e,0):Lo|=r),qe(e,t)}function Fm(e,t){t===0&&(e.mode&1?(t=Vn,Vn<<=1,!(Vn&130023424)&&(Vn=4194304)):t=1);var r=Ie();e=$t(e,t),e!==null&&(En(e,t,r),qe(e,r))}function Ch(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Fm(e,r)}function Rh(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(D(314))}n!==null&&n.delete(t),Fm(e,r)}var Om;Om=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Be.current)Me=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Me=!1,xh(e,t,r);Me=!!(e.flags&131072)}else Me=!1,ce&&t.flags&1048576&&Mu(t,Ra,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ua(e,t),e=t.pendingProps;var a=ms(t,Ae.current);os(t,r),a=Co(null,t,n,e,a,r);var l=Ro();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ve(n)?(l=!0,Ea(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,wo(t),a.updater=Za,t.stateNode=a,a._reactInternals=t,Ci(t,n,e,r),t=Pi(null,t,n,!0,l,r)):(t.tag=0,ce&&l&&xo(t),De(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ua(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Ph(n),e=ht(n,e),a){case 0:t=_i(null,t,n,e,r);break e;case 1:t=td(null,t,n,e,r);break e;case 11:t=Zc(null,t,n,e,r);break e;case 14:t=ed(null,t,n,ht(n.type,e),r);break e}throw Error(D(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ht(n,a),_i(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ht(n,a),td(e,t,n,a,r);case 3:e:{if(jm(t),e===null)throw Error(D(387));n=t.pendingProps,l=t.memoizedState,a=l.element,Qu(e,t),Ta(t,n,null,r);var i=t.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=hs(Error(D(423)),t),t=rd(e,t,n,r,a);break e}else if(n!==a){a=hs(Error(D(424)),t),t=rd(e,t,n,r,a);break e}else for(Je=ar(t.stateNode.containerInfo.firstChild),Xe=t,ce=!0,vt=null,r=Wu(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fs(),n===a){t=Ut(e,t,r);break e}De(e,t,n,r)}t=t.child}return t;case 5:return Ju(t),e===null&&ki(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,yi(n,a)?i=null:l!==null&&yi(n,l)&&(t.flags|=32),ym(e,t),De(e,t,i,r),t.child;case 6:return e===null&&ki(t),null;case 13:return Nm(e,t,r);case 4:return bo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ps(t,null,n,r):De(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ht(n,a),Zc(e,t,n,a,r);case 7:return De(e,t,t.pendingProps,r),t.child;case 8:return De(e,t,t.pendingProps.children,r),t.child;case 12:return De(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,le(_a,n._currentValue),n._currentValue=i,l!==null)if(Nt(l.value,i)){if(l.children===a.children&&!Be.current){t=Ut(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=Ft(-1,r&-r),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var x=d.pending;x===null?c.next=c:(c.next=x.next,x.next=c),d.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),Si(l.return,r,t),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(D(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Si(i,r,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}De(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,os(t,r),a=ot(a),n=n(a),t.flags|=1,De(e,t,n,r),t.child;case 14:return n=t.type,a=ht(n,t.pendingProps),a=ht(n.type,a),ed(e,t,n,a,r);case 15:return gm(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ht(n,a),ua(e,t),t.tag=1,Ve(n)?(e=!0,Ea(t)):e=!1,os(t,r),pm(t,n,a),Ci(t,n,a,r),Pi(null,t,n,!0,e,r);case 19:return wm(e,t,r);case 22:return vm(e,t,r)}throw Error(D(156,t.tag))};function zm(e,t){return uu(e,t)}function _h(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(e,t,r,n){return new _h(e,t,r,n)}function zo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ph(e){if(typeof e=="function")return zo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ro)return 11;if(e===so)return 14}return 2}function cr(e,t){var r=e.alternate;return r===null?(r=lt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function pa(e,t,r,n,a,l){var i=2;if(n=e,typeof e=="function")zo(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Hr:return _r(r.children,a,l,t);case to:i=8,a|=8;break;case Kl:return e=lt(12,r,t,a|2),e.elementType=Kl,e.lanes=l,e;case Yl:return e=lt(13,r,t,a),e.elementType=Yl,e.lanes=l,e;case Zl:return e=lt(19,r,t,a),e.elementType=Zl,e.lanes=l,e;case Jd:return rl(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Hd:i=10;break e;case Qd:i=9;break e;case ro:i=11;break e;case so:i=14;break e;case Xt:i=16,n=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=lt(i,r,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function _r(e,t,r,n){return e=lt(7,e,n,t),e.lanes=r,e}function rl(e,t,r,n){return e=lt(22,e,n,t),e.elementType=Jd,e.lanes=r,e.stateNode={isHidden:!1},e}function Ql(e,t,r){return e=lt(6,e,null,t),e.lanes=r,e}function Jl(e,t,r){return t=lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Th(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rl(0),this.expirationTimes=Rl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function $o(e,t,r,n,a,l,i,o,c){return e=new Th(e,t,r,o,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=lt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wo(l),e}function Ah(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function $m(e){if(!e)return mr;e=e._reactInternals;e:{if(Fr(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ve(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var r=e.type;if(Ve(r))return $u(e,r,t)}return t}function Um(e,t,r,n,a,l,i,o,c){return e=$o(r,n,!0,e,a,l,i,o,c),e.context=$m(null),r=e.current,n=Ie(),a=or(r),l=Ft(n,a),l.callback=t??null,lr(r,l,a),e.current.lanes=a,En(e,a,n),qe(e,n),e}function sl(e,t,r,n){var a=t.current,l=Ie(),i=or(a);return r=$m(r),t.context===null?t.context=r:t.pendingContext=r,t=Ft(l,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=lr(a,t,i),e!==null&&(jt(e,a,i,l),oa(e,a,i)),i}function $a(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function md(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Uo(e,t){md(e,t),(e=e.alternate)&&md(e,t)}function Lh(){return null}var Mm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Mo(e){this._internalRoot=e}nl.prototype.render=Mo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));sl(e,t,null,null)};nl.prototype.unmount=Mo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dr(function(){sl(null,e,null,null)}),t[zt]=null}};function nl(e){this._internalRoot=e}nl.prototype.unstable_scheduleHydration=function(e){if(e){var t=vu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Kt.length&&t!==0&&t<Kt[r].priority;r++);Kt.splice(r,0,e),r===0&&ju(e)}};function Bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function al(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fd(){}function Dh(e,t,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var d=$a(i);l.call(d)}}var i=Um(t,n,e,0,null,!1,!1,"",fd);return e._reactRootContainer=i,e[zt]=i.current,pn(e.nodeType===8?e.parentNode:e),Dr(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=$a(c);o.call(d)}}var c=$o(e,0,!1,null,null,!1,!1,"",fd);return e._reactRootContainer=c,e[zt]=c.current,pn(e.nodeType===8?e.parentNode:e),Dr(function(){sl(t,c,r,n)}),c}function ll(e,t,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=$a(i);o.call(c)}}sl(t,i,e,a)}else i=Dh(r,t,e,a,n);return $a(i)}hu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Qs(t.pendingLanes);r!==0&&(lo(t,r|1),qe(t,ge()),!(ee&6)&&(gs=ge()+500,xr()))}break;case 13:Dr(function(){var n=$t(e,1);if(n!==null){var a=Ie();jt(n,e,1,a)}}),Uo(e,1)}};io=function(e){if(e.tag===13){var t=$t(e,134217728);if(t!==null){var r=Ie();jt(t,e,134217728,r)}Uo(e,134217728)}};gu=function(e){if(e.tag===13){var t=or(e),r=$t(e,t);if(r!==null){var n=Ie();jt(r,e,t,n)}Uo(e,t)}};vu=function(){return re};yu=function(e,t){var r=re;try{return re=e,t()}finally{re=r}};ci=function(e,t,r){switch(t){case"input":if(ri(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Ga(n);if(!a)throw Error(D(90));Gd(n),ri(n,a)}}}break;case"textarea":Yd(e,r);break;case"select":t=r.value,t!=null&&ns(e,!!r.multiple,t,!1)}};au=Io;lu=Dr;var Ih={usingClientEntryPoint:!1,Events:[Rn,Gr,Ga,su,nu,Io]},qs={findFiberByHostInstance:Sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fh={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cu(e),e===null?null:e.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||Lh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ea.isDisabled&&ea.supportsFiber)try{Ha=ea.inject(Fh),Rt=ea}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ih;Ke.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bo(t))throw Error(D(200));return Ah(e,t,null,r)};Ke.createRoot=function(e,t){if(!Bo(e))throw Error(D(299));var r=!1,n="",a=Mm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=$o(e,1,!1,null,null,r,!1,n,a),e[zt]=t.current,pn(e.nodeType===8?e.parentNode:e),new Mo(t)};Ke.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=cu(t),e=e===null?null:e.stateNode,e};Ke.flushSync=function(e){return Dr(e)};Ke.hydrate=function(e,t,r){if(!al(t))throw Error(D(200));return ll(null,e,t,!0,r)};Ke.hydrateRoot=function(e,t,r){if(!Bo(e))throw Error(D(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=Mm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Um(t,null,e,1,r??null,a,!1,l,i),e[zt]=t.current,pn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new nl(t)};Ke.render=function(e,t,r){if(!al(t))throw Error(D(200));return ll(null,e,t,!1,r)};Ke.unmountComponentAtNode=function(e){if(!al(e))throw Error(D(40));return e._reactRootContainer?(Dr(function(){ll(null,null,e,!1,function(){e._reactRootContainer=null,e[zt]=null})}),!0):!1};Ke.unstable_batchedUpdates=Io;Ke.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!al(r))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return ll(e,t,r,!1,n)};Ke.version="18.3.1-next-f1338f8080-20240426";function Bm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bm)}catch(e){console.error(e)}}Bm(),Bd.exports=Ke;var Oh=Bd.exports,Vm,pd=Oh;Vm=pd.createRoot,pd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bn(){return bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bn.apply(this,arguments)}var tr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(tr||(tr={}));const xd="popstate";function zh(e){e===void 0&&(e={});function t(n,a){let{pathname:l,search:i,hash:o}=n.location;return Bi("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Ua(a)}return Uh(t,r,null,e)}function me(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $h(){return Math.random().toString(36).substr(2,8)}function hd(e,t){return{usr:e.state,key:e.key,idx:t}}function Bi(e,t,r,n){return r===void 0&&(r=null),bn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ws(t):t,{state:r,key:t&&t.key||n||$h()})}function Ua(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ws(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Uh(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,i=a.history,o=tr.Pop,c=null,d=x();d==null&&(d=0,i.replaceState(bn({},i.state,{idx:d}),""));function x(){return(i.state||{idx:null}).idx}function m(){o=tr.Pop;let P=x(),g=P==null?null:P-d;d=P,c&&c({action:o,location:N.location,delta:g})}function h(P,g){o=tr.Push;let p=Bi(N.location,P,g);d=x()+1;let f=hd(p,d),b=N.createHref(p);try{i.pushState(f,"",b)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(b)}l&&c&&c({action:o,location:N.location,delta:1})}function j(P,g){o=tr.Replace;let p=Bi(N.location,P,g);d=x();let f=hd(p,d),b=N.createHref(p);i.replaceState(f,"",b),l&&c&&c({action:o,location:N.location,delta:0})}function y(P){let g=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof P=="string"?P:Ua(P);return p=p.replace(/ $/,"%20"),me(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let N={get action(){return o},get location(){return e(a,i)},listen(P){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(xd,m),c=P,()=>{a.removeEventListener(xd,m),c=null}},createHref(P){return t(a,P)},createURL:y,encodeLocation(P){let g=y(P);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:j,go(P){return i.go(P)}};return N}var gd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gd||(gd={}));function Mh(e,t,r){return r===void 0&&(r="/"),Bh(e,t,r)}function Bh(e,t,r,n){let a=typeof t=="string"?ws(t):t,l=vs(a.pathname||"/",r);if(l==null)return null;let i=Wm(e);Vh(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let d=e0(l);o=Yh(i[c],d)}return o}function Wm(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(me(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=dr([n,c.relativePath]),x=r.concat(c);l.children&&l.children.length>0&&(me(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Wm(l.children,t,x,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Gh(d,l.index),routesMeta:x})};return e.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let c of Hm(l.path))a(l,i,c)}),t}function Hm(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let i=Hm(n.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),a&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Vh(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Kh(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const qh=/^:[\w-]+$/,Wh=3,Hh=2,Qh=1,Jh=10,Xh=-2,vd=e=>e==="*";function Gh(e,t){let r=e.split("/"),n=r.length;return r.some(vd)&&(n+=Xh),t&&(n+=Hh),r.filter(a=>!vd(a)).reduce((a,l)=>a+(qh.test(l)?Wh:l===""?Qh:Jh),n)}function Kh(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Yh(e,t,r){let{routesMeta:n}=e,a={},l="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,x=l==="/"?t:t.slice(l.length)||"/",m=Vi({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},x),h=c.route;if(!m)return null;Object.assign(a,m.params),i.push({params:a,pathname:dr([l,m.pathname]),pathnameBase:n0(dr([l,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(l=dr([l,m.pathnameBase]))}return i}function Vi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Zh(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,x,m)=>{let{paramName:h,isOptional:j}=x;if(h==="*"){let N=o[m]||"";i=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const y=o[m];return j&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:i,pattern:e}}function Zh(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),qm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function e0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function vs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function t0(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?ws(e):e;return{pathname:r?r.startsWith("/")?r:r0(r,t):t,search:a0(n),hash:l0(a)}}function r0(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Xl(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s0(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Vo(e,t){let r=s0(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function qo(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ws(e):(a=bn({},e),me(!a.pathname||!a.pathname.includes("?"),Xl("?","pathname","search",a)),me(!a.pathname||!a.pathname.includes("#"),Xl("#","pathname","hash",a)),me(!a.search||!a.search.includes("#"),Xl("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=r;else{let m=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}o=m>=0?t[m]:"/"}let c=t0(a,o),d=i&&i!=="/"&&i.endsWith("/"),x=(l||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||x)&&(c.pathname+="/"),c}const dr=e=>e.join("/").replace(/\/\/+/g,"/"),n0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),a0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,l0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function i0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Qm=["post","put","patch","delete"];new Set(Qm);const o0=["get",...Qm];new Set(o0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kn(){return kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kn.apply(this,arguments)}const il=u.createContext(null),Jm=u.createContext(null),Bt=u.createContext(null),ol=u.createContext(null),hr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Xm=u.createContext(null);function c0(e,t){let{relative:r}=t===void 0?{}:t;bs()||me(!1);let{basename:n,navigator:a}=u.useContext(Bt),{hash:l,pathname:i,search:o}=cl(e,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:dr([n,i])),a.createHref({pathname:c,search:o,hash:l})}function bs(){return u.useContext(ol)!=null}function Or(){return bs()||me(!1),u.useContext(ol).location}function Gm(e){u.useContext(Bt).static||u.useLayoutEffect(e)}function gr(){let{isDataRoute:e}=u.useContext(hr);return e?w0():d0()}function d0(){bs()||me(!1);let e=u.useContext(il),{basename:t,future:r,navigator:n}=u.useContext(Bt),{matches:a}=u.useContext(hr),{pathname:l}=Or(),i=JSON.stringify(Vo(a,r.v7_relativeSplatPath)),o=u.useRef(!1);return Gm(()=>{o.current=!0}),u.useCallback(function(d,x){if(x===void 0&&(x={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let m=qo(d,JSON.parse(i),l,x.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:dr([t,m.pathname])),(x.replace?n.replace:n.push)(m,x.state,x)},[t,n,i,l,e])}function cl(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=u.useContext(Bt),{matches:a}=u.useContext(hr),{pathname:l}=Or(),i=JSON.stringify(Vo(a,n.v7_relativeSplatPath));return u.useMemo(()=>qo(e,JSON.parse(i),l,r==="path"),[e,i,l,r])}function u0(e,t){return m0(e,t)}function m0(e,t,r,n){bs()||me(!1);let{navigator:a}=u.useContext(Bt),{matches:l}=u.useContext(hr),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Or(),x;if(t){var m;let P=typeof t=="string"?ws(t):t;c==="/"||(m=P.pathname)!=null&&m.startsWith(c)||me(!1),x=P}else x=d;let h=x.pathname||"/",j=h;if(c!=="/"){let P=c.replace(/^\//,"").split("/");j="/"+h.replace(/^\//,"").split("/").slice(P.length).join("/")}let y=Mh(e,{pathname:j}),N=g0(y&&y.map(P=>Object.assign({},P,{params:Object.assign({},o,P.params),pathname:dr([c,a.encodeLocation?a.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?c:dr([c,a.encodeLocation?a.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),l,r,n);return t&&N?u.createElement(ol.Provider,{value:{location:kn({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:tr.Pop}},N):N}function f0(){let e=N0(),t=i0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),r?u.createElement("pre",{style:a},r):null,null)}const p0=u.createElement(f0,null);class x0 extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?u.createElement(hr.Provider,{value:this.props.routeContext},u.createElement(Xm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h0(e){let{routeContext:t,match:r,children:n}=e,a=u.useContext(il);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(hr.Provider,{value:t},n)}function g0(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let x=i.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);x>=0||me(!1),i=i.slice(0,Math.min(i.length,x+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let x=0;x<i.length;x++){let m=i[x];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=x),m.route.id){let{loaderData:h,errors:j}=r,y=m.route.loader&&h[m.route.id]===void 0&&(!j||j[m.route.id]===void 0);if(m.route.lazy||y){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((x,m,h)=>{let j,y=!1,N=null,P=null;r&&(j=o&&m.route.id?o[m.route.id]:void 0,N=m.route.errorElement||p0,c&&(d<0&&h===0?(b0("route-fallback"),y=!0,P=null):d===h&&(y=!0,P=m.route.hydrateFallbackElement||null)));let g=t.concat(i.slice(0,h+1)),p=()=>{let f;return j?f=N:y?f=P:m.route.Component?f=u.createElement(m.route.Component,null):m.route.element?f=m.route.element:f=x,u.createElement(h0,{match:m,routeContext:{outlet:x,matches:g,isDataRoute:r!=null},children:f})};return r&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?u.createElement(x0,{location:r.location,revalidation:r.revalidation,component:N,error:j,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var Km=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Km||{}),Ym=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ym||{});function v0(e){let t=u.useContext(il);return t||me(!1),t}function y0(e){let t=u.useContext(Jm);return t||me(!1),t}function j0(e){let t=u.useContext(hr);return t||me(!1),t}function Zm(e){let t=j0(),r=t.matches[t.matches.length-1];return r.route.id||me(!1),r.route.id}function N0(){var e;let t=u.useContext(Xm),r=y0(),n=Zm();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function w0(){let{router:e}=v0(Km.UseNavigateStable),t=Zm(Ym.UseNavigateStable),r=u.useRef(!1);return Gm(()=>{r.current=!0}),u.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,kn({fromRouteId:t},l)))},[e,t])}const yd={};function b0(e,t,r){yd[e]||(yd[e]=!0)}function k0(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function jd(e){let{to:t,replace:r,state:n,relative:a}=e;bs()||me(!1);let{future:l,static:i}=u.useContext(Bt),{matches:o}=u.useContext(hr),{pathname:c}=Or(),d=gr(),x=qo(t,Vo(o,l.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(x);return u.useEffect(()=>d(JSON.parse(m),{replace:r,state:n,relative:a}),[d,m,a,r,n]),null}function $e(e){me(!1)}function S0(e){let{basename:t="/",children:r=null,location:n,navigationType:a=tr.Pop,navigator:l,static:i=!1,future:o}=e;bs()&&me(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:l,static:i,future:kn({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof n=="string"&&(n=ws(n));let{pathname:x="/",search:m="",hash:h="",state:j=null,key:y="default"}=n,N=u.useMemo(()=>{let P=vs(x,c);return P==null?null:{location:{pathname:P,search:m,hash:h,state:j,key:y},navigationType:a}},[c,x,m,h,j,y,a]);return N==null?null:u.createElement(Bt.Provider,{value:d},u.createElement(ol.Provider,{children:r,value:N}))}function Nd(e){let{children:t,location:r}=e;return u0(qi(t),r)}new Promise(()=>{});function qi(e,t){t===void 0&&(t=[]);let r=[];return u.Children.forEach(e,(n,a)=>{if(!u.isValidElement(n))return;let l=[...t,a];if(n.type===u.Fragment){r.push.apply(r,qi(n.props.children,l));return}n.type!==$e&&me(!1),!n.props.index||!n.props.children||me(!1);let i={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=qi(n.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ma.apply(this,arguments)}function ef(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function E0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function C0(e,t){return e.button===0&&(!t||t==="_self")&&!E0(e)}function Wi(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function R0(e,t){let r=Wi(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(l=>{r.append(a,l)})}),r}const _0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],P0=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],T0="6";try{window.__reactRouterVersion=T0}catch{}const A0=u.createContext({isTransitioning:!1}),L0="startTransition",wd=Ep[L0];function D0(e){let{basename:t,children:r,future:n,window:a}=e,l=u.useRef();l.current==null&&(l.current=zh({window:a,v5Compat:!0}));let i=l.current,[o,c]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},x=u.useCallback(m=>{d&&wd?wd(()=>c(m)):c(m)},[c,d]);return u.useLayoutEffect(()=>i.listen(x),[i,x]),u.useEffect(()=>k0(n),[n]),u.createElement(S0,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const I0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",F0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hi=u.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:l,replace:i,state:o,target:c,to:d,preventScrollReset:x,viewTransition:m}=t,h=ef(t,_0),{basename:j}=u.useContext(Bt),y,N=!1;if(typeof d=="string"&&F0.test(d)&&(y=d,I0))try{let f=new URL(window.location.href),b=d.startsWith("//")?new URL(f.protocol+d):new URL(d),k=vs(b.pathname,j);b.origin===f.origin&&k!=null?d=k+b.search+b.hash:N=!0}catch{}let P=c0(d,{relative:a}),g=z0(d,{replace:i,state:o,target:c,preventScrollReset:x,relative:a,viewTransition:m});function p(f){n&&n(f),f.defaultPrevented||g(f)}return u.createElement("a",Ma({},h,{href:y||P,onClick:N||l?n:p,ref:r,target:c}))}),Vr=u.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:l="",end:i=!1,style:o,to:c,viewTransition:d,children:x}=t,m=ef(t,P0),h=cl(c,{relative:m.relative}),j=Or(),y=u.useContext(Jm),{navigator:N,basename:P}=u.useContext(Bt),g=y!=null&&$0(h)&&d===!0,p=N.encodeLocation?N.encodeLocation(h).pathname:h.pathname,f=j.pathname,b=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(f=f.toLowerCase(),b=b?b.toLowerCase():null,p=p.toLowerCase()),b&&P&&(b=vs(b,P)||b);const k=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let R=f===p||!i&&f.startsWith(p)&&f.charAt(k)==="/",w=b!=null&&(b===p||!i&&b.startsWith(p)&&b.charAt(p.length)==="/"),S={isActive:R,isPending:w,isTransitioning:g},M=R?n:void 0,F;typeof l=="function"?F=l(S):F=[l,R?"active":null,w?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let J=typeof o=="function"?o(S):o;return u.createElement(Hi,Ma({},m,{"aria-current":M,className:F,ref:r,style:J,to:c,viewTransition:d}),typeof x=="function"?x(S):x)});var Qi;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Qi||(Qi={}));var bd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(bd||(bd={}));function O0(e){let t=u.useContext(il);return t||me(!1),t}function z0(e,t){let{target:r,replace:n,state:a,preventScrollReset:l,relative:i,viewTransition:o}=t===void 0?{}:t,c=gr(),d=Or(),x=cl(e,{relative:i});return u.useCallback(m=>{if(C0(m,r)){m.preventDefault();let h=n!==void 0?n:Ua(d)===Ua(x);c(e,{replace:h,state:a,preventScrollReset:l,relative:i,viewTransition:o})}},[d,c,x,n,a,r,e,l,i,o])}function Wo(e){let t=u.useRef(Wi(e)),r=u.useRef(!1),n=Or(),a=u.useMemo(()=>R0(n.search,r.current?null:t.current),[n.search]),l=gr(),i=u.useCallback((o,c)=>{const d=Wi(typeof o=="function"?o(a):o);r.current=!0,l("?"+d,c)},[l,a]);return[a,i]}function $0(e,t){t===void 0&&(t={});let r=u.useContext(A0);r==null&&me(!1);let{basename:n}=O0(Qi.useViewTransitionState),a=cl(e,{relative:t.relative});if(!r.isTransitioning)return!1;let l=vs(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=vs(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Vi(a.pathname,i)!=null||Vi(a.pathname,l)!=null}const U0="https://assurance-connect.com",tf=u.createContext(void 0),M0=({children:e})=>{const[t,r]=u.useState(null),[n,a]=u.useState(!1);u.useEffect(()=>{const c=localStorage.getItem("assurance_user");if(c)try{const d=JSON.parse(c);r(d),a(!0)}catch(d){console.error("Erreur lors du chargement de l'utilisateur:",d),localStorage.removeItem("assurance_user")}},[]);const l=async(c,d,x)=>{try{const m=await fetch(`${U0}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,insuranceCompany:(d||"").trim(),password:x})});if(m.ok){const h=await m.json(),j=h==null?void 0:h.token,y=(h==null?void 0:h.user)??h;j&&localStorage.setItem("assurance_token",j);const N={id:y==null?void 0:y.id,name:(y==null?void 0:y.username)??(y==null?void 0:y.name),role:(y==null?void 0:y.role)==="ADMIN"?"admin":"point_focal",email:y==null?void 0:y.email,insuranceCompany:y==null?void 0:y.insuranceCompany,firstName:y==null?void 0:y.firstName,lastName:y==null?void 0:y.lastName,subscriptionStartDate:y==null?void 0:y.subscriptionStartDate,subscriptionEndDate:y==null?void 0:y.subscriptionEndDate,subscriptionActive:y==null?void 0:y.subscriptionActive,subscriptionStatus:y==null?void 0:y.subscriptionStatus,daysUntilExpiration:y==null?void 0:y.daysUntilExpiration,lastRenewalRequestDate:y==null?void 0:y.lastRenewalRequestDate};return r(N),a(!0),localStorage.setItem("assurance_user",JSON.stringify(N)),!0}else return console.error("Erreur de connexion:",m.statusText),!1}catch(m){return console.error("Erreur lors de la connexion:",m),!1}},i=()=>{r(null),a(!1),localStorage.removeItem("assurance_user"),localStorage.removeItem("assurance_token")},o=u.useMemo(()=>({user:t,isAuthenticated:n,login:l,logout:i}),[t,n]);return s.jsx(tf.Provider,{value:o,children:e})},Ze=()=>{const e=u.useContext(tf);if(!e)throw new Error("useAuth must be used within AuthStateProvider");return e},B0=({children:e})=>{const{user:t}=Ze();return s.jsx("header",{className:"bg-gradient-to-r from-brand-700 to-brand-500 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-9 w-9 rounded-lg bg-white/15 grid place-items-center",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"Assurance Connect"}),s.jsx("div",{className:"text-xs text-white/80",children:"Plateforme antifraude"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[e,s.jsxs("div",{className:"hidden md:flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"opacity-80",children:(t==null?void 0:t.firstName)||(t==null?void 0:t.name)}),s.jsxs("span",{className:"opacity-60",children:["(",(t==null?void 0:t.role)==="admin"?"Administrateur":"Point Focal",")"]})]})]})]})})};function rf(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=rf(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function V0(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=rf(e))&&(n&&(n+=" "),n+=t);return n}const U=({intent:e="primary",size:t="md",className:r,...n})=>{const a="inline-flex items-center justify-center rounded-md font-medium focus-ring disabled:opacity-50 disabled:cursor-not-allowed transition-colors",l={primary:"bg-brand-600 hover:bg-brand-700 text-white",secondary:"bg-slate-900/5 hover:bg-slate-900/10 text-slate-900 dark:text-slate-100",accent:"bg-accent-500 hover:bg-accent-600 text-slate-900",ghost:"bg-transparent hover:bg-slate-900/5 text-slate-900 dark:text-slate-100"},i={sm:"px-2.5 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"};return s.jsx("button",{className:V0(a,l[e],i[t],r),...n})},q="https://assurance-connect.com";function Z(e){try{const t=typeof localStorage<"u"?localStorage.getItem("assurance_token"):null;return{...t?{Authorization:`Bearer ${t}`}:{},...e}}catch{return e||{}}}async function Ba(){const e=await fetch(`${q}/api/reports`,{headers:Z()});if(!e.ok)throw new Error("Failed to load reports");return e.json()}async function Lt(){const e=await fetch(`${q}/api/cases`,{headers:Z()});if(!e.ok)throw new Error("Failed to load cases");return e.json()}async function sf(e){try{const t=await fetch(`${q}/api/cases/reference/${encodeURIComponent(e)}`,{headers:Z()});return t.ok?t.json():null}catch{return null}}async function nf(e,t,r=!1){const n=new URLSearchParams;n.set("createdBy",t),r&&n.set("hasFile","true");const a=await fetch(`${q}/api/reports?${n.toString()}`,{method:"POST",headers:Z({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(!a.ok){let l="Failed to create report";try{const o=await a.json();o.error&&(l=o.error)}catch{}const i=new Error(l);throw i.error=l,i}return a.json()}async function af(e,t){const r=await fetch(`${q}/api/reports/${e}`,{method:"PUT",headers:Z({"Content-Type":"application/json"}),body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update report");return r.json()}async function lf(e){if(!(await fetch(`${q}/api/reports/${e}`,{method:"DELETE",headers:Z()})).ok)throw new Error("Failed to delete report")}async function of(e){const t=await fetch(`${q}/api/download/preview/${e}`);if(!t.ok)throw new Error("Prvisualisation indisponible");const r=await t.blob(),a=(t.headers.get("content-disposition")||"").match(/filename=\"?([^\";]+)\"?/i),l=(a==null?void 0:a[1])||`rapport_${e}.bin`,i=URL.createObjectURL(r),o=t.headers.get("content-type")||r.type||"application/octet-stream";return{url:i,contentType:o,filename:l}}async function Va(e,t,r){const n=new URLSearchParams({actorName:t}),a=await fetch(`${q}/api/cases?${n.toString()}`,{method:"POST",headers:Z({"Content-Type":"application/json"}),body:JSON.stringify({type:e.type,status:e.status,dataJson:JSON.stringify(e.data??{})})});if(!a.ok){let l="";try{l=await a.text()}catch{}throw new Error(`chec de cration du dossier (${a.status}) ${l}`)}return a.json()}async function cf(e,t,r){let n=await fetch(`${q}/api/download/${e}?requesterName=${encodeURIComponent(t)}&code=${encodeURIComponent(r)}`);if(n.status===403)throw new Error("Code d'accs invalide ou expir");if(n.status===404)throw new Error("Aucun fichier trouv pour ce rapport");if(!n.ok&&(n=await fetch(`${q}/api/download/demo/${e}?requesterName=${encodeURIComponent(t)}`),!n.ok))throw new Error("Code invalide ou expir");const a=await n.blob(),i=(n.headers.get("content-disposition")||"").match(/filename=\"?([^\";]+)\"?/i);let o=(i==null?void 0:i[1])||`rapport_${e}.bin`;const c=n.headers.get("content-type")||a.type||"";/\.bin$/i.test(o)&&(/pdf/i.test(c)?o=o.replace(/\.bin$/i,".pdf"):/wordprocessingml\.document/i.test(c)?o=o.replace(/\.bin$/i,".docx"):/msword/i.test(c)?o=o.replace(/\.bin$/i,".doc"):/text\/plain/i.test(c)&&(o=o.replace(/\.bin$/i,".txt")));const d=URL.createObjectURL(a),x=document.createElement("a");x.href=d,x.download=o,x.click(),URL.revokeObjectURL(d)}async function df(e,t,r){const n=new URLSearchParams({actorName:r}),a=await fetch(`${q}/api/cases/${e}?${n.toString()}`,{method:"PUT",headers:Z({"Content-Type":"application/json"}),body:JSON.stringify({status:t})});if(!a.ok){let l="";try{l=await a.text()}catch{}throw new Error(`chec de mise  jour du statut (${a.status}) ${l}`)}return a.json()}async function uf(e,t,r){const n=new URLSearchParams({actorName:r}),a=await fetch(`${q}/api/cases/${e}?${n.toString()}`,{method:"PUT",headers:Z({"Content-Type":"application/json"}),body:JSON.stringify({dataJson:JSON.stringify(t)})});if(!a.ok){let l="";try{l=await a.text()}catch{}throw new Error(`chec de mise  jour du dossier (${a.status}) ${l}`)}return a.json()}async function ds(e,t){const r=new URLSearchParams({actorName:t}),n=await fetch(`${q}/api/cases/${e}/permissions?${r.toString()}`,{headers:Z()});if(!n.ok)throw new Error("Failed to get permissions");return n.json()}async function mf(e,t){const r=new URLSearchParams({actorName:t}),n=await fetch(`${q}/api/cases/${e}?${r.toString()}`,{method:"DELETE",headers:Z()});if(!n.ok){let a="";try{a=await n.text()}catch{}throw new Error(`chec de suppression du dossier (${n.status}) ${a}`)}return n.text()}async function ff(e,t){const r=new URLSearchParams({userName:t}),n=await fetch(`${q}/api/reports/${e}/permissions?${r.toString()}`,{headers:Z()});if(!n.ok)throw new Error("Failed to get report permissions");return n.json()}async function pf(e){const t=await fetch(`${q}/api/files/cases/${e}/attachments`,{headers:Z()});if(!t.ok){if(t.status===404)return[];throw new Error("Failed to load case attachments")}return(await t.json()).attachments||[]}async function xf(e,t,r,n){const a=new FormData;a.append("file",t),r&&a.append("description",r),a.append("category",n);const l=await fetch(`${q}/api/files/cases/${e}/upload`,{method:"POST",headers:Z(),body:a});if(!l.ok){let o="Failed to upload attachment";try{const c=await l.json();c.message&&(o=c.message)}catch{}throw new Error(o)}return(await l.json()).file}async function hf(e,t,r){const n=await fetch(`${q}/api/files/cases/${e}/attachments/${t}/download`,{headers:Z()});if(!n.ok)throw new Error("Failed to download attachment");const a=await n.blob(),l=URL.createObjectURL(a),i=document.createElement("a");i.href=l,i.download=r,i.click(),URL.revokeObjectURL(l)}async function Ho(e){const t=await fetch(`${q}/api/files/reports/${e}/files`,{headers:Z()});if(!t.ok){if(t.status===404)return[];throw new Error("Failed to load report files")}return(await t.json()).files||[]}async function q0(e,t,r,n){const a=new FormData;a.append("file",t),r&&a.append("description",r),n&&a.append("category",n);const l=await fetch(`${q}/api/files/reports/${e}/upload`,{method:"POST",headers:Z(),body:a});if(!l.ok){let o="Failed to upload report file";try{const c=await l.json();c.message&&(o=c.message)}catch{}throw new Error(o)}return(await l.json()).file}async function gf(e,t,r){const n=await fetch(`${q}/api/files/reports/${e}/files/${t}/download`,{headers:Z()});if(!n.ok)throw new Error("Failed to download report file");const a=await n.blob(),l=URL.createObjectURL(a),i=document.createElement("a");i.href=l,i.download=r,i.click(),URL.revokeObjectURL(l)}async function qa(e){const t=await fetch(`${q}/api/report-requests/owner/${e}/pending/count`,{headers:Z()});if(!t.ok)throw new Error("Failed to count pending report requests for owner");return t.json()}async function vf(e){const t=await fetch(`${q}/api/report-requests`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create report request");return t.json()}async function yf(e){const t=await fetch(`${q}/api/report-requests/owner/${e}/pending`,{headers:Z()});if(!t.ok)throw new Error("Failed to load pending report requests for owner");return t.json()}async function jf(e,t){const r=await fetch(`${q}/api/report-requests/${e}/approve?processedBy=${t}`,{method:"POST",headers:Z()});if(!r.ok)throw new Error("Failed to approve report request");return r.json()}async function Nf(e,t){const r=await fetch(`${q}/api/report-requests/${e}/reject?processedBy=${t}`,{method:"POST",headers:Z()});if(!r.ok)throw new Error("Failed to reject report request");return r.json()}async function wf(e){const t=await fetch(`${q}/api/report-requests/validate-code?validationCode=${e}`,{method:"POST"});if(!t.ok)throw new Error("Failed to validate code and download");return t.json()}async function bf(){const e=await fetch(`${q}/api/admin/dashboard`,{headers:Z()});if(!e.ok)throw new Error("Failed to load admin dashboard");return e.json()}async function kf(e){const t=await fetch(`${q}/api/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to complete registration");return t.json()}async function Sf(e){const t=await fetch(`${q}/api/users/check-username/${e}`);if(!t.ok)throw new Error("Failed to check username");return t.json()}async function Ef(){const e=await fetch(`${q}/api/users`,{headers:Z()});if(!e.ok)throw new Error("Failed to load users");return e.json()}async function Cf(e,t,r){const n=await fetch(`${q}/api/invitations`,{method:"POST",headers:Z({"Content-Type":"application/json"}),body:JSON.stringify({email:e,insuranceCompany:t,invitedBy:r})});if(!n.ok)throw new Error("Failed to create invitation");return n.json()}async function Rf(e){const t=await fetch(`${q}/api/invitations/validate/${e}`);if(!t.ok)throw new Error("Failed to validate invitation");return t.json()}async function _f(e){if(!(await fetch(`${q}/api/invitations/${e}/use`,{method:"POST"})).ok)throw new Error("Failed to use invitation")}async function Pf(){const e=await fetch(`${q}/api/invitations`,{headers:Z()});if(!e.ok)throw new Error("Failed to load invitations");return e.json()}async function Tf(e){if(!(await fetch(`${q}/api/invitations/${e}/cancel`,{method:"POST"})).ok)throw new Error("Failed to cancel invitation")}async function Af(){const e=await fetch(`${q}/api/report-stats`,{headers:Z()});if(!e.ok)throw new Error("Failed to load report stats");return e.json()}async function Lf(){const e=await fetch(`${q}/api/case-stats`,{headers:Z()});if(!e.ok)throw new Error("Failed to load case stats");return e.json()}async function Df(e){if(!(await fetch(`${q}/api/users/${e}/activate`,{method:"POST"})).ok)throw new Error("Failed to activate user")}async function If(e){if(!(await fetch(`${q}/api/users/${e}/deactivate`,{method:"POST"})).ok)throw new Error("Failed to deactivate user")}async function Ff(e){if(!(await fetch(`${q}/api/users/${e}/toggle-status`,{method:"POST"})).ok)throw new Error("Failed to toggle user status")}async function xa(e){const t=await fetch(`${q}/api/notifications/user/${e}`,{headers:Z()});if(!t.ok)throw new Error("Failed to load notifications");return t.json()}async function Of(e){const t=await fetch(`${q}/api/notifications/user/${e}/unread/count`,{headers:Z()});if(!t.ok)throw new Error("Failed to load unread notifications count");return(await t.json()).count}async function zf(e,t){const r=await fetch(`${q}/api/notifications/${e}/read?userId=${t}`,{method:"POST",headers:Z()});if(!r.ok)throw new Error("Failed to mark notification as read");return(await r.json()).success}async function $f(e){const t=await fetch(`${q}/api/notifications/user/${e}/read-all`,{method:"POST",headers:Z()});if(!t.ok)throw new Error("Failed to mark all notifications as read");return(await t.json()).success}async function Uf(e,t){const r=`${q}/api/notifications/${e}?userId=${t}`;console.log(" Appel DELETE:",r);const n=await fetch(r,{method:"DELETE",headers:Z()});if(console.log(" Statut rponse:",n.status,n.statusText),!n.ok){const l=await n.text();throw console.error(" Erreur HTTP:",n.status,l),new Error(`Failed to delete notification: ${n.status} ${l}`)}const a=await n.json();return console.log(" Donnes reues:",a),a.success}async function Mf(e){const t=await fetch(`${q}/api/notifications/user/${e}/all`,{method:"DELETE",headers:Z()});if(!t.ok)throw new Error("Failed to delete all notifications");return(await t.json()).success}async function qr(e){const t=await fetch(`${q}/api/notifications/user/${e}/trash`,{headers:Z()});if(!t.ok)throw new Error("Failed to load notifications trash");return t.json()}async function Bf(e,t){const r=await fetch(`${q}/api/notifications/${e}/restore?userId=${t}`,{method:"POST",headers:Z()});if(!r.ok)throw new Error("Failed to restore notification");return(await r.json()).success}async function Vf(e){const t=await fetch(`${q}/api/notifications/user/${e}/restore-all`,{method:"POST",headers:Z()});if(!t.ok)throw new Error("Failed to restore all notifications");return(await t.json()).restored??0}const kd=Object.freeze(Object.defineProperty({__proto__:null,activateUser:Df,approveReportRequest:jf,cancelInvitation:Tf,checkUsernameExists:Sf,completeUserRegistration:kf,countPendingReportRequestsForOwner:qa,createCaseBackend:Va,createInvitation:Cf,createReport:nf,createReportRequest:vf,deactivateUser:If,deleteAllUserNotifications:Mf,deleteCase:mf,deleteNotification:Uf,deleteReport:lf,downloadCaseAttachment:hf,downloadReportFile:gf,downloadReportSecured:cf,fetchCases:Lt,fetchReports:Ba,findCaseByReference:sf,getAdminDashboard:bf,getAllInvitations:Pf,getAllUsers:Ef,getCaseAttachments:pf,getCasePermissions:ds,getCaseStats:Lf,getPendingReportRequestsForOwner:yf,getReportFiles:Ho,getReportPermissions:ff,getReportPreviewUrl:of,getReportStats:Af,getUnreadNotificationsCount:Of,getUserNotifications:xa,getUserNotificationsTrash:qr,markAllNotificationsAsRead:$f,markNotificationAsRead:zf,rejectReportRequest:Nf,restoreAllUserNotifications:Vf,restoreNotification:Bf,toggleUserStatus:Ff,updateCase:uf,updateCaseStatus:df,updateReport:af,uploadCaseAttachment:xf,uploadReportFile:q0,useInvitation:_f,validateCodeAndDownload:wf,validateInvitation:Rf},Symbol.toStringTag,{value:"Module"})),W0=({status:e,title:t="Titre du rapport",createdAt:r="",beneficiary:n="",initiator:a="",insured:l="",subscriber:i="",unavailable:o,onDownload:c,onRequestAccess:d,onDownloadWithCode:x,onRequestReport:m,onValidateCode:h,onToggleFavorite:j,isFavorite:y,onPreview:N,caseCode:P,onEdit:g,onDelete:p,canEdit:f=!1,canDelete:b=!1,createdBy:k,currentUser:R,reportId:w})=>{const[S,M]=u.useState(!1),[F,J]=u.useState([]),[W,K]=u.useState(!1),we=async()=>{if(!w||!R||!k||R!==k){console.warn("Tentative d'accs aux fichiers par un non-propritaire");return}try{K(!0);const O=await Ho(w);J(O)}catch(O){console.error("Erreur lors du chargement des fichiers attachs:",O),J([])}finally{K(!1)}},ae=async O=>{if(w)try{await gf(w,O.id,O.fileName)}catch(_){console.error("Erreur lors du tlchargement:",_),alert("Erreur lors du tlchargement du fichier")}},Se=()=>{switch(e){case"Disponible":return s.jsx("span",{className:"inline-flex items-center rounded-full bg-accent-100 text-accent-800 px-2 py-0.5 text-xs",children:"Disponible"});case"En attente":return s.jsx("span",{className:"inline-flex items-center rounded-full bg-yellow-100 text-yellow-800 px-2 py-0.5 text-xs",children:"En attente"});case"Trait":return s.jsx("span",{className:"inline-flex items-center rounded-full bg-emerald-100 text-emerald-800 px-2 py-0.5 text-xs",children:"Trait"})}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`rounded-xl border ${o?"border-slate-200 opacity-60":"border-slate-200"} bg-white dark:bg-slate-800 hover:border-brand-200 hover:shadow-md transition`,children:s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg bg-brand-50 text-brand-700 grid place-items-center",children:""}),s.jsx("button",{type:"button",className:"float-right text-lg","aria-label":"Favori",onClick:j,children:y?"":""}),s.jsx("h3",{className:"mt-3 font-semibold",children:t}),s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Cr le ",r]}),k&&s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Par: ",s.jsx("span",{className:"font-medium",children:k}),R&&k===R&&s.jsx("span",{className:"ml-2 inline-flex items-center rounded-full bg-green-100 text-green-800 px-2 py-0.5 text-xs",children:" Votre rapport"})]}),P&&s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Dossier: ",s.jsx("span",{className:"font-mono",children:P})]}),s.jsxs("div",{className:"mt-4 space-y-1 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Bnficiaire:"}),s.jsx("span",{className:"ml-auto font-medium",children:n})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Initiateur:"}),s.jsx("span",{className:"ml-auto font-medium",children:a})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Assur:"}),s.jsx("span",{className:"ml-auto font-medium",children:l})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Souscripteur:"}),s.jsx("span",{className:"ml-auto font-medium",children:i})]})]}),s.jsx("div",{className:"mt-3 flex items-center gap-2",children:Se()}),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2",children:[s.jsx(U,{intent:"ghost",onClick:N,children:"Prvisualiser"}),R&&k&&R!==k?s.jsxs(s.Fragment,{children:[m&&s.jsx(U,{intent:"secondary",onClick:m,children:" Demander rapport"}),h&&s.jsx(U,{intent:"primary",onClick:h,children:" Valider code"})]}):R&&k&&R===k?s.jsx(U,{intent:o?"secondary":"primary",disabled:o,onClick:c,children:"Tlcharger"}):s.jsxs(s.Fragment,{children:[m&&s.jsx(U,{intent:"secondary",onClick:m,children:" Demander rapport"}),h&&s.jsx(U,{intent:"primary",onClick:h,children:" Valider code"})]}),R&&k&&R===k?s.jsx(U,{intent:"secondary",onClick:()=>{M(!0),we()},children:" Fichiers"}):s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-slate-400",children:""})})]}),(f||b)&&s.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[f&&s.jsx(U,{intent:"secondary",size:"sm",onClick:g,children:"Modifier"}),b&&s.jsx(U,{intent:"secondary",size:"sm",onClick:p,className:"text-red-600 hover:text-red-700",children:"Supprimer"})]}),!f&&!b&&R&&k&&R!==k&&s.jsxs("div",{className:"mt-2 p-2 bg-gray-50 border border-gray-200 rounded text-xs text-gray-600 text-center",children:[" Lecture seule - Rapport cr par ",k]})]})}),S&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:" Fichiers attachs au rapport"}),s.jsx("button",{onClick:()=>M(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),W?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-600 mx-auto"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-2",children:"Chargement des fichiers..."})]}):(()=>{const O=F.filter(_=>{var B,I;return _.category!=="preview"&&!((B=_.description)!=null&&B.toLowerCase().includes("prvisualisation"))&&!((I=_.description)!=null&&I.toLowerCase().includes("preview"))});return O.length>0?s.jsx("div",{className:"space-y-3",children:O.map(_=>s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 p-4 rounded-lg border border-slate-200 dark:border-slate-600",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-lg",children:[_.fileType==="pdf"&&"",_.fileType==="image"&&"",_.fileType==="document"&&"",_.fileType==="spreadsheet"&&"",_.fileType==="text"&&"",_.fileType==="other"&&""]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:_.fileName}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[_.formattedSize,"  ",_.fileType,_.category&&_.category!=="main"&&`  ${_.category}`]}),_.description&&s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:_.description})]})]})}),s.jsx(U,{intent:"secondary",size:"sm",onClick:()=>ae(_),className:"ml-3",children:" Tlcharger"})]})},_.id))}):s.jsxs("div",{className:"text-center py-6 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[s.jsx("div",{className:"text-4xl mb-2",children:""}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Aucun fichier de rapport attach"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Les fichiers de rapport apparatront ici"}),F.length>0&&F.every(_=>{var B,I;return _.category==="preview"||((B=_.description)==null?void 0:B.toLowerCase().includes("prvisualisation"))||((I=_.description)==null?void 0:I.toLowerCase().includes("preview"))})&&s.jsx("p",{className:"text-xs text-blue-600 mt-2",children:' Un fichier de prvisualisation est disponible via le bouton "Prvisualiser"'})]})})()]})})]})},Br=({open:e,title:t,onClose:r,children:n})=>(u.useEffect(()=>{if(e)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[e]),e?s.jsxs("div",{className:"fixed inset-0 z-50",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/50","aria-hidden":"true",onClick:r}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:s.jsxs("div",{role:"dialog","aria-modal":"true",className:"w-full max-w-lg rounded-xl bg-white dark:bg-slate-800 shadow-xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between flex-shrink-0",children:[s.jsx("h3",{className:"text-base font-semibold",children:t}),s.jsx(U,{intent:"ghost",onClick:r,"aria-label":"Fermer",children:""})]}),s.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:n})]})})]}):null),ss=({label:e="Choisir des fichiers",multiple:t=!0,onFilesChange:r,accept:n})=>{const a=u.useRef(null),l=()=>{var o;(o=a.current)==null||o.click()},i=o=>{const c=o.target.files?Array.from(o.target.files):[];r==null||r(c)};return s.jsxs("div",{children:[s.jsx("input",{ref:a,type:"file",className:"hidden",multiple:t,onChange:i,accept:n}),s.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-700",children:[" ",e]})]})},qf=u.createContext(void 0),H0=e=>{if(e)return`CODE${e.toString().padStart(6,"0")}`;const t=()=>Math.random().toString(36).toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,3);return`${t()}-${t()}-${t()}`},Q0=({children:e})=>{const[t,r]=u.useState([]),[n,a]=u.useState([]),[l,i]=u.useState([]),[o,c]=u.useState([]),[d,x]=u.useState([]);u.useEffect(()=>{try{const k=localStorage.getItem("assurance_app_state");if(k){const R=JSON.parse(k);R.accessRequests&&r(R.accessRequests),R.notifications&&a(R.notifications),R.cases&&i(R.cases),R.auditEvents&&c(R.auditEvents),R.favorites&&x(R.favorites)}}catch{}},[]),u.useEffect(()=>{try{const k=JSON.stringify({accessRequests:t,notifications:n,cases:l,auditEvents:o,favorites:d});localStorage.setItem("assurance_app_state",k)}catch{}},[t,n,l,o,d]);const m=(k,R,w,S,M,F,J,W)=>{const K=new Date().toISOString(),we={id:kt(),reportId:k,reportTitle:R,requesterId:w,requesterName:S,requesterEmail:M,requesterCompany:F,requesterPhone:J,reason:W,status:"pending",requestedAt:K};r(ae=>[we,...ae]),a(ae=>[{id:kt(),type:"dashboard",title:"Nouvelle demande d'accs",message:`Demande cre pour "${R}"`,createdAt:K,read:!1},...ae]),c(ae=>[{id:kt(),type:"ACCESS_REQUEST_CREATED",message:`Demande d'accs pour "${R}"`,actor:S,atISO:K},...ae])},h=(k,R,w)=>{r(S=>{const M=S.map(J=>J.id===k?{...J,status:"approved",code:H0(parseInt(k.slice(-6),16)||Math.floor(Math.random()*1e6)),expiresAt:new Date(Date.now()+864e5).toISOString(),updatedAt:new Date().toISOString()}:J),F=M.find(J=>J.id===k);return F&&(a(J=>[{id:kt(),type:"inapp",title:"Demande d'accs approuve",message:`Votre demande pour "${F.reportTitle}" a t approuve. Les codes d'accs sont disponibles dans l'interface de tlchargement.`,createdAt:new Date().toISOString(),read:!1},...J]),c(J=>[{id:kt(),type:"ACCESS_REQUEST_APPROVED",message:`Demande approuve pour "${F.reportTitle}"`,actor:R,atISO:new Date().toISOString()},...J])),M})},j=(k,R)=>{r(w=>{const S=w.map(F=>F.id===k?{...F,status:"rejected",updatedAt:new Date().toISOString()}:F),M=S.find(F=>F.id===k);return M&&c(F=>[{id:kt(),type:"ACCESS_REQUEST_REJECTED",message:`Demande rejete pour "${M.reportTitle}"`,actor:R,atISO:new Date().toISOString()},...F]),S})},y=k=>{a(R=>R.map(w=>w.id===k?{...w,read:!0}:w))},N=(k,R)=>{var S,M;const w={...k,id:kt(),code:J0(String(((S=k.data)==null?void 0:S.initiator)||((M=k.data)==null?void 0:M.initiateur)||"IN")),createdAt:new Date().toISOString()};i(F=>[w,...F]),c(F=>[{id:kt(),type:"CASE_CREATED",message:`Cration dossier (${w.type})`,actor:R,atISO:w.createdAt},...F])},P=k=>{x(R=>R.includes(k)?R.filter(w=>w!==k):[k,...R])},g=k=>d.includes(k),p=(k,R)=>t.filter(w=>w.reportTitle===k&&w.requesterName===R&&w.status==="approved").sort((w,S)=>new Date(S.requestedAt).getTime()-new Date(w.requestedAt).getTime())[0],f=(k,R)=>{a(w=>[{id:kt(),type:"dashboard",title:"Tlchargement effectu",message:`${R} a tlcharg "${k}"`,createdAt:new Date().toISOString(),read:!1},...w]),c(w=>[{id:kt(),type:"REPORT_DOWNLOADED",message:`Tlchargement de "${k}"`,actor:R,atISO:new Date().toISOString()},...w])},b=u.useMemo(()=>({accessRequests:t,notifications:n,cases:l,auditEvents:o,favorites:d,createAccessRequest:m,approveAccessRequest:h,rejectAccessRequest:j,markNotificationRead:y,createCase:N,toggleFavorite:P,isFavorite:g,getApprovedAccessFor:p,recordDownload:f}),[t,n,l,o,d]);return s.jsx(qf.Provider,{value:b,children:e})},Qo=()=>{const e=u.useContext(qf);if(!e)throw new Error("useAppState must be used within AppStateProvider");return e},kt=()=>{try{const e=crypto.getRandomValues(new Uint8Array(8));return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}catch{return Math.random().toString(36).slice(2)}},J0=e=>{const t=(e||"IN").toUpperCase().replace(/[^A-Z]/g,"").slice(0,2).padEnd(2,"X"),r=Math.floor(Math.random()*1e6).toString().padStart(6,"0");return`${t}-${r}`},Xs={INACTIVITY_TIMEOUT:18e4,WARNING_TIME:6e4,ACTIVITY_EVENTS:["mousedown","mousemove","keypress","scroll","touchstart","click"],MESSAGES:{WARNING_TITLE:"Dconnexion automatique",WARNING_TEXT:"Vous serez dconnect automatiquement en raison de l'inactivit.",EXTEND_BUTTON:"Rester connect",LOGOUT_BUTTON:"Dconnexion"}},{INACTIVITY_TIMEOUT:ta,WARNING_TIME:X0,ACTIVITY_EVENTS:Sd}=Xs,G0=()=>{const{isAuthenticated:e,logout:t}=Ze(),r=u.useRef(null),n=u.useRef(null),a=u.useRef(Date.now()),[l,i]=u.useState(0),[o,c]=u.useState(!1),d=u.useCallback(()=>{r.current&&clearTimeout(r.current),n.current&&clearTimeout(n.current),e&&(n.current=setTimeout(()=>{c(!0)},ta-X0),r.current=setTimeout(()=>{console.log("Dconnexion automatique due  l'inactivit"),c(!1),t()},ta)),a.current=Date.now(),i(ta),c(!1)},[e,t]),x=u.useCallback(()=>{d()},[d]),m=u.useCallback(()=>{d()},[d]);return u.useEffect(()=>{if(!e||!o){i(0);return}const h=setInterval(()=>{const j=Date.now()-a.current,y=Math.max(0,ta-j);i(y),y<=0&&clearInterval(h)},1e3);return()=>clearInterval(h)},[e,o]),u.useEffect(()=>{if(!e){r.current&&(clearTimeout(r.current),r.current=null),n.current&&(clearTimeout(n.current),n.current=null),c(!1),i(0);return}return Sd.forEach(h=>{document.addEventListener(h,m,!0)}),d(),()=>{Sd.forEach(h=>{document.removeEventListener(h,m,!0)}),r.current&&clearTimeout(r.current),n.current&&clearTimeout(n.current)}},[e,m,d]),u.useEffect(()=>()=>{r.current&&clearTimeout(r.current),n.current&&clearTimeout(n.current)},[]),{lastActivity:a.current,timeRemaining:l,showWarning:o,resetTimer:x,extendSession:x,logout:t}},K0=({timeRemaining:e,onExtend:t,onLogout:r})=>{const[n,a]=u.useState(!1);if(u.useEffect(()=>{e<=3e4&&e>0?a(!0):a(!1)},[e]),!n)return null;const l=Math.floor(e/6e4),i=Math.floor(e%6e4/1e3);return s.jsx("div",{className:"fixed top-4 right-4 z-50 bg-yellow-50 border border-yellow-200 rounded-lg shadow-lg p-4 max-w-sm",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:Xs.MESSAGES.WARNING_TITLE}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:s.jsxs("p",{children:[Xs.MESSAGES.WARNING_TEXT," "," ",s.jsxs("span",{className:"font-semibold",children:[l>0?`${l}m `:"",i,"s"]})]})}),s.jsxs("div",{className:"mt-4 flex space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-yellow-50 px-3 py-2 text-sm font-medium text-yellow-800 rounded-md hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",children:Xs.MESSAGES.EXTEND_BUTTON}),s.jsx("button",{type:"button",onClick:r,className:"bg-red-50 px-3 py-2 text-sm font-medium text-red-800 rounded-md hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:Xs.MESSAGES.LOGOUT_BUTTON})]})]})]})})},Y0=({timeRemaining:e,showWarning:t})=>{if(!t||e<=0)return null;const r=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3),a=()=>e<=1e4?"text-red-500":e<=2e4?"text-orange-500":"text-yellow-500";return s.jsxs("div",{className:`flex items-center gap-2 text-sm ${a()}`,children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{className:"font-mono",children:[r>0?`${r}:`:"",n.toString().padStart(2,"0")]})]})},Z0=({subscriptionStartDate:e,subscriptionEndDate:t,subscriptionActive:r,subscriptionStatus:n,daysUntilExpiration:a,onRequestRenewal:l,showRenewalButton:i=!1})=>{const o=N=>new Date(N).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),c=()=>{switch(n){case"ACTIVE":return"text-green-600 bg-green-50 border-green-200";case"EXPIRED":return"text-red-600 bg-red-50 border-red-200";case"PENDING_RENEWAL":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"SUSPENDED":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},d=()=>{switch(n){case"ACTIVE":return"Actif";case"EXPIRED":return"Expir";case"PENDING_RENEWAL":return"En attente de renouvellement";case"SUSPENDED":return"Suspendu";default:return"Inconnu"}},x=()=>{const P=j().days;return P>365?"text-blue-600":P===0?"text-red-600":P<=30?"text-yellow-600":P<=90?"text-orange-600":"text-green-600"},h=(()=>{const N=new Date(e),P=new Date(t),g=new Date,p=Math.ceil((P.getTime()-N.getTime())/(1e3*60*60*24));if(g<N)return{totalDuration:p,elapsedTime:0,percentageElapsed:0,status:"not_started"};if(g>P)return{totalDuration:p,elapsedTime:p,percentageElapsed:100,status:"expired"};const f=Math.ceil((g.getTime()-N.getTime())/(1e3*60*60*24)),b=Math.min(100,Math.max(0,f/p*100));return{totalDuration:p,elapsedTime:f,percentageElapsed:b,status:"active"}})(),j=()=>{const N=new Date(e),P=new Date(t),g=new Date;if(g<N){const f=Math.ceil((N.getTime()-g.getTime())/864e5);return{days:f,text:`Commence dans ${f} jour${f>1?"s":""}`}}if(g>P)return{days:0,text:"Expir"};const p=Math.ceil((P.getTime()-g.getTime())/(1e3*60*60*24));return p===0?{days:0,text:"Expire aujourd'hui"}:{days:p,text:`${p} jours`}},y=()=>j().text;return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Informations d'Abonnement"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Statut :"}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${c()}`,children:d()})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Date de dbut :"}),s.jsx("span",{className:"text-sm text-gray-900",children:o(e)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Date de fin :"}),s.jsx("span",{className:"text-sm text-gray-900",children:o(t)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Jours restants :"}),s.jsx("span",{className:`text-sm font-semibold ${x()}`,children:y()})]}),h.status!=="not_started"&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[s.jsx("span",{children:"Temps coul"}),s.jsxs("span",{children:[Math.round(h.percentageElapsed),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${j().days<=30?"bg-red-500":j().days<=90?"bg-yellow-500":"bg-green-500"}`,style:{width:`${h.percentageElapsed}%`}})})]}),i&&(h.status==="expired"||a<=30)&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsx("button",{onClick:l,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200 text-sm font-medium",children:" Demander le renouvellement"})}),h.status!=="not_started"&&j().days<=30&&s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-5 w-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsxs("span",{className:"text-sm text-yellow-800",children:["Votre abonnement expire dans ",j().days," jour",j().days>1?"s":"",".",i&&" Contactez l'administrateur pour le renouveler."]})]})}),h.status==="not_started"&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-5 w-5 text-blue-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-sm text-blue-800",children:"Votre abonnement n'a pas encore commenc. Il sera actif  partir de la date de dbut."})]})}),h.status==="expired"&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-5 w-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsxs("span",{className:"text-sm text-red-800",children:["Votre abonnement a expir.",i&&" Demandez le renouvellement pour continuer  utiliser l'application."]})]})})]})]})},pt="https://assurance-connect.com";function xt(e){try{const t=typeof localStorage<"u"?localStorage.getItem("assurance_token"):null;return{...t?{Authorization:`Bearer ${t}`}:{},...e}}catch{return e||{}}}const St={async checkSubscriptionStatus(e){const t=await fetch(`${pt}/api/subscriptions/check/${e}`,{headers:xt()});if(!t.ok)throw new Error("Erreur lors de la vrification du statut d'abonnement");return t.json()},async requestRenewal(e){const t=await fetch(`${pt}/api/subscriptions/request-renewal/${e}`,{method:"POST",headers:xt({"Content-Type":"application/json"})});if(!t.ok)throw new Error("Erreur lors de la demande de renouvellement");return t.json()},async renewSubscription(e){const t=await fetch(`${pt}/api/subscriptions/renew/${e}`,{method:"POST",headers:xt({"Content-Type":"application/json"})});if(!t.ok)throw new Error("Erreur lors du renouvellement de l'abonnement");return t.json()},async getPendingRenewalRequests(){const e=await fetch(`${pt}/api/subscriptions/renewal-requests/pending`,{headers:xt()});if(!e.ok)throw new Error("Erreur lors de la rcupration des demandes de renouvellement");return e.json()},async approveRenewalRequest(e,t){const r=await fetch(`${pt}/api/subscriptions/renewal-requests/${e}/approve?adminId=${t}`,{method:"POST",headers:xt({"Content-Type":"application/json"})});if(!r.ok)throw new Error("Erreur lors de l'approbation de la demande");return r.json()},async rejectRenewalRequest(e,t,r){const n=new URLSearchParams({adminId:String(t)});r&&n.set("reason",r);const a=await fetch(`${pt}/api/subscriptions/renewal-requests/${e}/reject?${n.toString()}`,{method:"POST",headers:xt({"Content-Type":"application/json"})});if(!a.ok)throw new Error("Erreur lors du rejet de la demande");return a.json()},async getExpiredSubscriptions(){const e=await fetch(`${pt}/api/subscriptions/expired`,{headers:xt()});if(!e.ok)throw new Error("Erreur lors de la rcupration des abonnements expirs");return e.json()},async getPendingRenewalSubscriptions(){const e=await fetch(`${pt}/api/subscriptions/pending-renewal`,{headers:xt()});if(!e.ok)throw new Error("Erreur lors de la rcupration des demandes de renouvellement");return e.json()},async getSubscriptionsExpiringSoon(){const e=await fetch(`${pt}/api/subscriptions/expiring-soon`,{headers:xt()});if(!e.ok)throw new Error("Erreur lors de la rcupration des abonnements expirant bientt");return e.json()},async getActiveSubscriptions(){const e=await fetch(`${pt}/api/subscriptions/active`,{headers:xt()});if(!e.ok)throw new Error("Erreur lors de la rcupration des abonnements actifs");return e.json()},async getSubscriptionStats(){const e=await fetch(`${pt}/api/subscriptions/stats`,{headers:xt()});if(!e.ok)throw new Error("Erreur lors de la rcupration des statistiques");return e.json()}},eg=({onRenewSubscription:e})=>{const{user:t}=Ze(),[r,n]=u.useState("expired"),[a,l]=u.useState([]),[i,o]=u.useState(!0),[c,d]=u.useState(!1),[x,m]=u.useState(null),[h,j]=u.useState(null),[y,N]=u.useState([]),[P,g]=u.useState(!1),[p,f]=u.useState(!1),[b,k]=u.useState(null),[R,w]=u.useState("");u.useEffect(()=>{S(),M(r)},[]),u.useEffect(()=>{M(r)},[r]);const S=async()=>{try{o(!0);const[O,_]=await Promise.all([St.getPendingRenewalRequests(),St.getSubscriptionStats()]);l(O),j(_)}catch(O){m("Erreur lors du chargement des donnes"),console.error("Erreur:",O)}finally{o(!1)}},M=async O=>{try{d(!0),N(O==="expired"?await St.getExpiredSubscriptions():O==="pending"?await St.getPendingRenewalSubscriptions():O==="expiring"?await St.getSubscriptionsExpiringSoon():O==="active"?await St.getActiveSubscriptions():await St.getExpiredSubscriptions())}catch(_){console.error("Erreur lors du chargement des utilisateurs:",_),N([])}finally{d(!1)}},F=async O=>{if(t!=null&&t.id){try{(await St.approveRenewalRequest(O.id,t.id)).success?(alert("Demande approuve avec succs"),S()):alert("Erreur lors de l'approbation")}catch(_){alert("Erreur lors de l'approbation"),console.error("Erreur:",_)}g(!1),k(null)}},J=async O=>{if(t!=null&&t.id){try{(await St.rejectRenewalRequest(O.id,t.id,R||void 0)).success?(alert("Demande rejete"),S()):alert("Erreur lors du rejet")}catch(_){alert("Erreur lors du rejet"),console.error("Erreur:",_)}f(!1),k(null),w("")}},W=O=>{k(O),g(!0)},K=O=>{k(O),f(!0)},we=O=>new Date(O).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),ae=O=>{const _=new Date(O),B=new Date,I=_.getTime()-B.getTime(),X=Math.ceil(I/(1e3*60*60*24));return X>0?X:0},Se=()=>y;return i?s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement des donnes d'abonnement..."})]})}):x?s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Erreur"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:s.jsx("p",{children:x})})]})]})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Abonnements"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Grez les demandes de renouvellement d'abonnement"})]}),h&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Demandes en attente"}),s.jsx("div",{className:"mt-2 text-3xl font-bold text-blue-600",children:h.pendingRequestsCount||0})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Abonnements expirs"}),s.jsx("div",{className:"mt-2 text-3xl font-bold text-red-600",children:h.expiredCount||0})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Expirant bientt"}),s.jsx("div",{className:"mt-2 text-3xl font-bold text-yellow-600",children:h.expiringSoonCount||0})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:"En attente de renouvellement"}),s.jsx("div",{className:"mt-2 text-3xl font-bold text-orange-600",children:h.pendingRenewalCount||0})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[r==="expired"&&"Utilisateurs avec des abonnements expirs",r==="pending"&&"Utilisateurs en attente de renouvellement",r==="expiring"&&"Utilisateurs avec des abonnements expirant bientt",r==="active"&&"Utilisateurs avec des abonnements actifs"]})}),s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("div",{className:"flex space-x-4",children:[{id:"expired",label:"Expirs",color:"text-red-600"},{id:"pending",label:"En attente",color:"text-yellow-600"},{id:"expiring",label:"Expiration proche",color:"text-orange-600"},{id:"active",label:"Actifs",color:"text-green-600"}].map(O=>s.jsx("button",{onClick:()=>n(O.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${r===O.id?"bg-blue-100 text-blue-700 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:O.label},O.id))})}),s.jsx("div",{className:"p-6",children:c?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement des utilisateurs..."})]}):Se().length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun utilisateur trouv"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[r==="expired"&&"Aucun utilisateur avec un abonnement expir.",r==="pending"&&"Aucun utilisateur en attente de renouvellement.",r==="expiring"&&"Aucun utilisateur avec un abonnement expirant bientt.",r==="active"&&"Aucun utilisateur avec un abonnement actif."]})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Socit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiration"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Se().map(O=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.username}),s.jsx("div",{className:"text-sm text-gray-500",children:O.email})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.insuranceCompany}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${O.subscriptionStatus==="ACTIVE"?"bg-green-100 text-green-800":O.subscriptionStatus==="EXPIRED"?"bg-red-100 text-red-800":O.subscriptionStatus==="PENDING_RENEWAL"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:O.subscriptionStatus})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-900",children:O.subscriptionEndDate?new Date(O.subscriptionEndDate).toLocaleDateString("fr-FR"):"N/A"}),O.subscriptionEndDate&&s.jsx("div",{className:"text-sm text-gray-500",children:O.role==="ADMIN"?"Abonnement permanent":(()=>{const _=ae(O.subscriptionEndDate);return _>0?`${_} jours restants`:"Expir"})()})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:O.role!=="ADMIN"&&s.jsx("button",{onClick:()=>e(O.id),className:"bg-blue-600 text-white px-3 py-1 rounded-md text-xs hover:bg-blue-700 transition-colors",children:"Renouveler"})})]},O.id))})]})})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Demandes de Renouvellement en Attente"})}),a.length===0?s.jsxs("div",{className:"px-6 py-12 text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune demande en attente"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Toutes les demandes de renouvellement ont t traites."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Socit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de demande"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiration"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(O=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.username}),s.jsx("div",{className:"text-sm text-gray-500",children:O.userEmail})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O.insuranceCompany}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:we(O.requestDate)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-900",children:new Date(O.subscriptionEndDate).toLocaleDateString("fr-FR")}),s.jsx("div",{className:"text-sm text-gray-500",children:(()=>{const _=ae(O.subscriptionEndDate);return _>0?`${_} jours restants`:"Expir"})()})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>W(O),className:"bg-green-600 text-white px-3 py-1 rounded-md text-xs hover:bg-green-700 transition-colors",children:"Approuver"}),s.jsx("button",{onClick:()=>K(O),className:"bg-red-600 text-white px-3 py-1 rounded-md text-xs hover:bg-red-700 transition-colors",children:"Rejeter"})]})})]},O.id))})]})})]}),P&&b&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3 text-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Approuver la demande"}),s.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["tes-vous sr de vouloir approuver la demande de renouvellement pour"," ",s.jsx("strong",{children:b.username})," ?"]}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx("button",{onClick:()=>F(b),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"Approuver"}),s.jsx("button",{onClick:()=>g(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400 transition-colors",children:"Annuler"})]})]})})}),p&&b&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rejeter la demande"}),s.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Rejeter la demande de renouvellement pour ",s.jsx("strong",{children:b.username})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raison du rejet (optionnel)"}),s.jsx("textarea",{value:R,onChange:O=>w(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Raison du rejet..."})]}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx("button",{onClick:()=>J(b),className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:"Rejeter"}),s.jsx("button",{onClick:()=>f(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400 transition-colors",children:"Annuler"})]})]})})})]})},tg="modulepreload",rg=function(e){return"/"+e},Ed={},Cd=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=rg(c),c in Ed)return;Ed[c]=!0;const d=c.endsWith(".css"),x=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${x}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":tg,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((h,j)=>{m.addEventListener("load",h),m.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&l(o.reason);return t().catch(l)})},sg=({isOpen:e,onClose:t,reportId:r,reportTitle:n,onSuccess:a})=>{const{user:l}=Ze(),[i,o]=u.useState(""),[c,d]=u.useState(!1),[x,m]=u.useState(null),h=async j=>{if(j.preventDefault(),!(l!=null&&l.name)||!(l!=null&&l.email)||!(l!=null&&l.insuranceCompany)){m("Informations utilisateur manquantes");return}if(!i.trim()){m("Veuillez indiquer le motif de votre demande");return}d(!0),m(null);try{await vf({reportId:r,reportTitle:n,requesterId:l.name,requesterName:l.name,requesterEmail:l.email,requesterCompany:l.insuranceCompany,requesterPhone:l.phone||"",reason:i.trim()}),o(""),d(!1),t(),a&&a(),alert("Votre demande de rapport a t envoye avec succs ! Vous recevrez une notification ds qu'elle sera traite.")}catch(y){d(!1),m("Erreur lors de l'envoi de la demande. Veuillez ressayer."),console.error("Erreur cration demande de rapport:",y)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Demande de rapport"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",disabled:c,children:""})]}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rapport demand"}),s.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:n})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votre nom"}),s.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:l==null?void 0:l.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votre compagnie"}),s.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:l==null?void 0:l.insuranceCompany})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votre email"}),s.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:l==null?void 0:l.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-1",children:"Motif de la demande *"}),s.jsx("textarea",{id:"reason",value:i,onChange:j=>o(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Expliquez pourquoi vous avez besoin de ce rapport...",required:!0,disabled:c})]}),x&&s.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:x}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(U,{type:"button",variant:"outline",onClick:t,disabled:c,children:"Annuler"}),s.jsx(U,{type:"submit",disabled:c,children:c?"Envoi...":"Envoyer la demande"})]})]})]})}):null},ng=({isOpen:e,onClose:t,onRefresh:r})=>{const{user:n}=Ze(),[a,l]=u.useState([]),[i,o]=u.useState(!1),[c,d]=u.useState(null),[x,m]=u.useState(null),h=async()=>{if(n!=null&&n.name){o(!0),m(null);try{const N=await yf(n.name);l(N)}catch(N){m("Erreur lors du chargement des demandes"),console.error("Erreur chargement demandes:",N)}finally{o(!1)}}};u.useEffect(()=>{e&&h()},[e,n==null?void 0:n.name]);const j=async N=>{if(n!=null&&n.name){d(N),m(null);try{await jf(N,n.name),await h(),r&&r(),alert("Demande approuve ! Un code de validation a t envoy au demandeur.")}catch(P){m("Erreur lors de l'approbation de la demande"),console.error("Erreur approbation:",P)}finally{d(null)}}},y=async N=>{if(n!=null&&n.name&&confirm("tes-vous sr de vouloir rejeter cette demande ?")){d(N),m(null);try{await Nf(N,n.name),await h(),r&&r(),alert("Demande rejete.")}catch(P){m("Erreur lors du rejet de la demande"),console.error("Erreur rejet:",P)}finally{d(null)}}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Demandes de rapport en attente"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",disabled:i,children:""})]}),x&&s.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded mb-4",children:x}),i?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-gray-500",children:"Chargement des demandes..."})}):a.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-gray-500",children:"Aucune demande en attente"})}):s.jsx("div",{className:"space-y-4",children:a.map(N=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-medium text-gray-900",children:["Demande pour : ",N.reportTitle]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Demandeur : ",N.requesterName," (",N.requesterCompany,")"]})]}),s.jsx("div",{className:"text-xs text-gray-500",children:N.requestedAt})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Email :"})," ",N.requesterEmail]}),N.requesterPhone&&s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Tlphone :"})," ",N.requesterPhone]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-gray-700",children:s.jsx("strong",{children:"Motif :"})}),s.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded mt-1",children:N.reason||"Aucun motif fourni"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(U,{variant:"outline",size:"sm",onClick:()=>y(N.id),disabled:c===N.id,children:c===N.id?"Rejet...":"Rejeter"}),s.jsx(U,{size:"sm",onClick:()=>j(N.id),disabled:c===N.id,children:c===N.id?"Approbation...":"Approuver"})]})]},N.id))}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsx(U,{variant:"outline",onClick:t,disabled:i,children:"Fermer"})})]})}):null},ag=({isOpen:e,onClose:t,reportId:r,reportTitle:n,onSuccess:a})=>{const[l,i]=u.useState(""),[o,c]=u.useState(!1),[d,x]=u.useState(null),m=async h=>{if(h.preventDefault(),!l.trim()){x("Veuillez saisir le code de validation");return}c(!0),x(null);try{await wf(l.trim());const j=`https://assurance-connect.com/api/download/${r}?validationCode=${l.trim()}`;window.open(j,"_blank"),i(""),c(!1),t(),a&&a(),alert("Code valid avec succs ! Le tlchargement a commenc.")}catch(j){c(!1),x("Code de validation invalide ou expir. Veuillez vrifier votre code."),console.error("Erreur validation code:",j)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Validation du code"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",disabled:o,children:""})]}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rapport  tlcharger"}),s.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:n})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"validationCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Code de validation *"}),s.jsx("input",{id:"validationCode",type:"text",value:l,onChange:h=>i(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Entrez votre code de validation",required:!0,disabled:o,autoComplete:"off"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Le code a t envoy par email et SMS. Il expire dans 24h."})]}),d&&s.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:d}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(U,{type:"button",variant:"outline",onClick:t,disabled:o,children:"Annuler"}),s.jsx(U,{type:"submit",disabled:o,children:o?"Validation...":"Valider et tlcharger"})]})]})]})}):null},Rd=e=>({id:String(e.id),title:e.title,createdAt:new Date(e.createdAt).toLocaleDateString("fr-FR"),status:e.status==="DISPONIBLE"?"Disponible":e.status==="EN_ATTENTE"?"En attente":"Trait",beneficiary:e.beneficiary,initiator:e.initiator,insured:e.insured,subscriber:e.subscriber,caseId:e.caseId||e.caseReference||e.caseCode,createdBy:e.createdBy}),lg=()=>{const{user:e}=Ze(),[t,r]=u.useState([]),{createAccessRequest:n,toggleFavorite:a,isFavorite:l,getApprovedAccessFor:i,recordDownload:o,cases:c}=Qo(),[d,x]=u.useState(""),[m,h]=u.useState(""),[j,y]=u.useState("Tous"),[N,P]=u.useState(!1),[g,p]=u.useState(1),f=6,[b,k]=u.useState(null),[R,w]=u.useState(!1),[S,M]=u.useState(null),[F,J]=u.useState({}),[W,K]=u.useState(!1),[we,ae]=u.useState(!1),[Se,O]=u.useState(!1),[_,B]=u.useState(null),[I,X]=u.useState(0),pe=(v,A)=>{B({id:v,title:A}),K(!0)},et=()=>{ae(!0)},dt=(v,A)=>{B({id:v,title:A}),O(!0)},We=()=>{e!=null&&e.name&&qa(e.name).then(X).catch(v=>{console.error("Erreur lors du rechargement des demandes:",v),X(0)})};u.useEffect(()=>{e!=null&&e.name&&(w(!0),Promise.all([Ba().then(async v=>{const A=v.map(Rd);k(A);const L={};for(const z of A)try{const G=await ff(Number(z.id),e.name);L[Number(z.id)]=G}catch{const V=z.createdBy===e.name,Q=e.role==="admin";L[Number(z.id)]={canEdit:V||Q,canDelete:V||Q}}J(L)}),Lt().then(v=>r(v))]).catch(v=>M(v.message||"Erreur de chargement")).finally(()=>w(!1)))},[e==null?void 0:e.name]),u.useEffect(()=>{if(!(e!=null&&e.name))return;(async()=>{try{const A=await qa(e.name);X(A)}catch(A){console.error("Erreur lors du chargement des demandes en attente:",A),X(0)}})()},[e==null?void 0:e.name]),u.useEffect(()=>{const v=localStorage.getItem("reports_search_case");v&&(console.log("Recherche automatique pour le dossier:",v),x(v),localStorage.removeItem("reports_search_case"));const A=localStorage.getItem("reports_prefill_case");if(A){try{const L=JSON.parse(A),z=typeof L=="string"?L:L==null?void 0:L.caseId,G=L==null?void 0:L.reportForm;z&&Ln(z),Pt(G?V=>({...V,title:G.title??V.title,beneficiary:G.beneficiary??V.beneficiary,insured:G.insured??V.insured,subscriber:G.subscriber??V.subscriber,initiator:G.initiator??V.initiator,caseId:z??V.caseId}):V=>({...V,caseId:z})),Ur(!0)}catch{Ln(A),Pt(L=>({...L,caseId:A})),Ur(!0)}localStorage.removeItem("reports_prefill_case")}},[]),u.useEffect(()=>{b&&t&&(console.log("Donnes charges:"),console.log("- Rapports:",b.length,"rapports"),console.log("- Dossiers:",t.length,"dossiers"),console.log("- Exemples de rapports:",b.slice(0,3).map(v=>({id:v.id,title:v.title,caseId:v.caseId,initiator:v.initiator}))),console.log("- Exemples de dossiers:",t.slice(0,3).map(v=>({id:v.id,reference:v.reference,dataJson:v.dataJson?JSON.parse(v.dataJson):null}))))},[b,t]);const[ut,ye]=u.useState(!1),[se,tt]=u.useState(null),[Vt,dl]=u.useState(""),[zr,mt]=u.useState(!1),[ks,Ss]=u.useState(!1),[wt,vr]=u.useState(""),[Es,Cs]=u.useState(""),[yr,ul]=u.useState(""),[Rs,ml]=u.useState(""),[_s,fl]=u.useState(""),[Jo,Xo]=u.useState([]),[E,C]=u.useState(!1),[T,te]=u.useState(!1),[H,ne]=u.useState(!1),[he,He]=u.useState(""),[Pn,pl]=u.useState(!1),[qt,Tn]=u.useState(!1),[Wt,$r]=u.useState([]),[Eg,Cg]=u.useState(!1),[Rg,_g]=u.useState(null),[Pg,Tg]=u.useState(""),[Ag,Lg]=u.useState(!1),[Wf,Ur]=u.useState(!1),[rt,Pt]=u.useState({title:"",status:"DISPONIBLE"}),[jr,Go]=u.useState(null),[Ps,Ko]=u.useState(null),[An,Ln]=u.useState(""),[Ts,st]=u.useState(""),[ze,Yo]=u.useState({}),[Zo,xl]=u.useState(!1),[Ht,As]=u.useState([{nom:"",prenom:"",dateNaissance:""}]),[Qt,Ls]=u.useState([{nom:"",prenom:"",dateNaissance:""}]),Hf=()=>{As([...Ht,{nom:"",prenom:"",dateNaissance:""}])},Qf=v=>{Ht.length>1&&As(Ht.filter((A,L)=>L!==v))},hl=(v,A,L)=>{const z=[...Ht];z[v]={...z[v],[A]:L},As(z)},Jf=()=>{Ls([...Qt,{nom:"",prenom:"",dateNaissance:""}])},Xf=v=>{Qt.length>1&&Ls(Qt.filter((A,L)=>L!==v))},gl=(v,A,L)=>{const z=[...Qt];z[v]={...z[v],[A]:L},Ls(z)},[Gf,Dn]=u.useState(!1),[Le,Nr]=u.useState({id:"",title:"",status:"DISPONIBLE"}),[Ds,ec]=u.useState(null),[Is,tc]=u.useState(null),[vl,rc]=u.useState(""),[In,Fn]=u.useState(""),[Kf,On]=u.useState(!1),[Fs,Yf]=u.useState(null),Zf=async v=>{if(!v.trim())return st(""),!1;try{const A=t.find(z=>z.reference===v);if(A){try{const z=await ds(A.id,(e==null?void 0:e.name)||"");if(!z.canEdit&&!z.canDelete)return st("Permissions insuffisantes. Vous n'tes pas propritaire de ce dossier."),!1}catch(z){return console.error("Erreur lors de la vrification des permissions:",z),st("Erreur lors de la vrification des permissions du dossier"),!1}return st(""),yl(A),!0}const L=await sf(v);if(L){try{const z=await ds(L.id,(e==null?void 0:e.name)||"");if(!z.canEdit&&!z.canDelete)return st("Permissions insuffisantes. Vous n'tes pas propritaire de ce dossier."),!1}catch(z){return console.error("Erreur lors de la vrification des permissions:",z),st("Erreur lors de la vrification des permissions du dossier"),!1}return st(""),yl(L),r(z=>[...z,L]),!0}else{const z=c.find(G=>G.code===v);if(z)try{const G=await Va({type:z.type==="enquete"?"ENQUETE":"FRAUDULEUX",status:z.status==="Enqute en cours"?"SOUS_ENQUETE":"FRAUDULEUX",data:z.data},(e==null?void 0:e.name)||"system");return r(V=>[...V,G]),st(""),yl(G),!0}catch(G){return console.error("Erreur lors de la cration du dossier:",G),st("Erreur lors de la cration du dossier"),!1}else return st("Dossier inexistant"),!1}}catch{return st("Erreur lors de la validation du dossier"),!1}},yl=v=>{let A={};try{A=JSON.parse(v.dataJson||"{}")}catch(Q){console.error("Erreur parsing JSON du dossier:",Q)}let L=[];A.beneficiaires&&Array.isArray(A.beneficiaires)?L=A.beneficiaires.map(Q=>({nom:Q.nom||"",prenom:Q.prenom||"",dateNaissance:Q.dateNaissance||""})):(A.beneficiaire_nom||A.beneficiaire_prenom)&&(L=[{nom:A.beneficiaire_nom||"",prenom:A.beneficiaire_prenom||"",dateNaissance:A.beneficiaire_date_naissance||""}]),L.length===0&&(L=[{nom:"",prenom:"",dateNaissance:""}]),As(L);let z=[];A.assures&&Array.isArray(A.assures)?z=A.assures.map(Q=>({nom:Q.nom||"",prenom:Q.prenom||"",dateNaissance:Q.dateNaissance||""})):(A.assure_nom||A.assure_prenom)&&(z=[{nom:A.assure_nom||"",prenom:A.assure_prenom||"",dateNaissance:A.assure_date_naissance||""}]),z.length===0&&(z=[{nom:"",prenom:"",dateNaissance:""}]),Ls(z);const G=A.souscripteur_nom&&A.souscripteur_prenom?`${A.souscripteur_nom} ${A.souscripteur_prenom}`.trim():A.souscripteur_nom||A.souscripteur_prenom||"",V=A.initiateur||A.initiator||"";Pt(Q=>({...Q,subscriber:G||Q.subscriber,initiator:V||Q.initiator}))},ep=()=>{var z,G;const v={};return rt.title.trim()||(v.title="Le titre est obligatoire"),Ht.filter(V=>V.nom.trim()&&V.prenom.trim()).length===0&&(v.beneficiaries="Au moins un bnficiaire avec nom et prnom est obligatoire"),Qt.filter(V=>V.nom.trim()&&V.prenom.trim()).length===0&&(v.insureds="Au moins un assur avec nom et prnom est obligatoire"),(z=rt.initiator)!=null&&z.trim()||(v.initiator="L'initiateur est obligatoire"),(G=rt.subscriber)!=null&&G.trim()||(v.subscriber="Le souscripteur est obligatoire"),An.trim()?Ts&&(v.caseId=Ts):v.caseId="Le numro de dossier est obligatoire",jr||(v.file="Le fichier du rapport est obligatoire"),Yo(v),Object.keys(v).length===0},tp=async()=>{if(ep()){xl(!0);try{if((b||[]).some(Q=>(Q.caseId||"").toLowerCase()===An.toLowerCase())){alert("Un rapport existe dj pour ce dossier"),xl(!1);return}const A=Ht.filter(Q=>Q.nom.trim()&&Q.prenom.trim()),L=Qt.filter(Q=>Q.nom.trim()&&Q.prenom.trim()),z={...rt,beneficiaries:JSON.stringify(A),insureds:JSON.stringify(L),caseId:An},G=await nf(z,(e==null?void 0:e.name)||"",!!jr),V=Number(G.id??(G==null?void 0:G.id));if(!Number.isNaN(V)){const{uploadReportFile:Q}=await Cd(async()=>{const{uploadReportFile:wr}=await Promise.resolve().then(()=>kd);return{uploadReportFile:wr}},void 0);jr&&await Q(V,jr,"Fichier principal du rapport","main"),Ps&&await Q(V,Ps,"Fichier de prvisualisation","preview")}Ur(!1),Pt({title:"",status:"DISPONIBLE"}),As([{nom:"",prenom:"",dateNaissance:""}]),Ls([{nom:"",prenom:"",dateNaissance:""}]),Go(null),Ko(null),Ln(""),Yo({}),jl()}catch(v){console.error("Erreur lors de la cration:",v),v.error?alert("Erreur de validation: "+v.error):alert("Erreur lors de la cration du rapport")}finally{xl(!1)}}},jl=()=>{w(!0),Promise.all([Ba().then(v=>k(v.map(Rd))),Lt().then(v=>r(v))]).catch(v=>M(v.message||"Erreur de chargement")).finally(()=>w(!1))},Nl=u.useMemo(()=>{let v=b??[];if(d.trim()){console.log("Filtrage par numro de dossier:",d);const L=d.toLowerCase().trim();v=v.filter(z=>{if(z.caseId&&z.caseId.toLowerCase().includes(L))return console.log("Correspondance directe avec caseId:",z.caseId),!0;const G=t.find(V=>V.reference.toLowerCase().includes(L));if(G){console.log("Correspondance trouve avec dossier:",G.reference);try{const V=JSON.parse(G.dataJson||"{}"),Q=String((V==null?void 0:V.initiator)||(V==null?void 0:V.initiateur)||"").toLowerCase(),wr=String(z.initiator||"").toLowerCase();if(Q&&wr&&Q===wr)return console.log("Correspondance confirme par initiateur:",Q),!0;const nc=String((V==null?void 0:V.beneficiaire_nom)||(V==null?void 0:V.beneficiaire_prenom)||"").toLowerCase(),ac=String(z.beneficiary||"").toLowerCase();if(nc&&ac&&nc.includes(ac))return console.log("Correspondance confirme par bnficiaire"),!0}catch(V){console.error("Erreur parsing JSON du dossier:",V)}}return!1}),console.log("Rapports filtrs:",v.length)}if(m.trim()&&(v=v.filter(L=>L.title.toLowerCase().includes(m.toLowerCase()))),j!=="Tous"){const L={Disponible:"Disponible","En attente":"En attente",Trait:"Trait"};v=v.filter(z=>z.status===L[j])}N&&(v=v.filter(L=>l(L.title)));const A=L=>{const[z,G,V]=L.split("/");return new Date(parseInt(V),parseInt(G)-1,parseInt(z)).getTime()};return v.sort((L,z)=>A(z.createdAt)-A(L.createdAt)),v},[b,d,m,j,N,t,l]);u.useEffect(()=>{p(1)},[d,m,j,N]);const wl=Math.max(1,Math.ceil(Nl.length/f)),rp=Nl.slice((g-1)*f,g*f),sp=v=>{tt(v),(async()=>{try{const A=await Ho(Number(v.id));console.log(" Recherche de fichier de prvisualisation pour le rapport:",v.title);const L=A.find(V=>{var Q,wr;return V.category==="preview"||((Q=V.description)==null?void 0:Q.toLowerCase().includes("prvisualisation"))||((wr=V.description)==null?void 0:wr.toLowerCase().includes("preview"))});if(L?console.log(" Fichier de prvisualisation trouv:",L.fileName):console.log(" Aucun fichier de prvisualisation trouv"),L){const V=`https://assurance-connect.com/api/reports/${v.id}/files/${L.id}/preview`,Q=window.open();Q&&(L.fileType==="pdf"||L.fileName.toLowerCase().endsWith(".pdf")?Q.document.write(`
								<html>
									<head><title>Prvisualisation - ${L.fileName}</title></head>
									<body style="margin:0;">
										<iframe src="${V}" style="width:100%;height:100vh;border:none;" frameborder="0"></iframe>
									</body>
								</html>
							`):L.fileType==="image"||/\.(png|jpg|jpeg|gif)$/i.test(L.fileName)?Q.document.write(`
								<html>
									<head><title>Prvisualisation - ${L.fileName}</title></head>
									<body style="margin:0;display:flex;justify-content:center;align-items:center;background:#f0f0f0;">
										<img src="${V}" style="max-width:100%;max-height:100vh;" alt="${L.fileName}" />
									</body>
								</html>
							`):Q.location.href=V);return}const z=await of(Number(v.id)),G=window.open();G&&(/pdf/i.test(z.contentType)?G.document.write(`<iframe src="${z.url}" style="width:100%;height:100%" frameborder="0"></iframe>`):G.location.href=z.url)}catch(A){console.error("Erreur lors de l'ouverture de la prvisualisation:",A),te(!0)}})()},np=async()=>{if(se){Ss(!0),vr("");try{const v=he.trim().toUpperCase(),A=Number(se.id);(await(await fetch("https://assurance-connect.com/api/download/validate-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:A,code:v})})).json()).valid?(mt(!0),vr(" Code valide ! Vous pouvez maintenant tlcharger le rapport.")):(mt(!1),vr(" Code invalide. Vrifiez le code d'accs fourni."))}catch(v){mt(!1),vr(" Erreur lors de la validation du code."),console.error("Erreur de validation:",v)}finally{Ss(!1)}}},ap=async()=>{if(se){if(!zr){alert("Veuillez d'abord valider le code d'accs avant de tlcharger.");return}try{const v=he.trim().replace(/\s*-\s*/g,"-").toUpperCase();await cf(Number(se.id),(e==null?void 0:e.name)||"",v),o(se.title,(e==null?void 0:e.name)||""),ne(!1)}catch(v){alert((v==null?void 0:v.message)??"Tlchargement chou")}}},sc=v=>{if(!v)return"";try{const A=JSON.parse(v);return Array.isArray(A)?A.map(L=>L.nom&&L.prenom?`${L.nom} ${L.prenom}`.trim():L.nom?L.nom:L.prenom?L.prenom:"").filter(Boolean).join(", "):A.nom||A.prenom?`${A.nom||""} ${A.prenom||""}`.trim():v}catch{return v}},lp=v=>{Nr({id:v.id,title:v.title,status:v.status==="Disponible"?"DISPONIBLE":v.status==="En attente"?"EN_ATTENTE":"TRAITE",beneficiary:sc(v.beneficiary),initiator:v.initiator,insured:sc(v.insured),subscriber:v.subscriber,caseId:""}),rc(""),Fn(""),ec(null),tc(null),Dn(!0)},ip=v=>{Yf(v),On(!0)},op=v=>v.trim()?t.find(L=>L.reference===v)?(Fn(""),!0):(Fn("Numro de dossier inexistant"),!1):(Fn(""),!1);return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16",children:[R&&s.jsx("div",{className:"mb-3 text-sm text-slate-500",children:"Chargement des rapports"}),S&&s.jsx("div",{className:"mb-3 text-sm text-red-600",children:S}),d&&s.jsxs("div",{className:"mb-3 text-sm text-blue-600 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-3",children:[" Recherche automatique effectue pour le dossier : ",s.jsx("strong",{children:d}),Nl.length===0&&s.jsx("span",{className:"block mt-1 text-slate-600",children:"Aucun rapport trouv pour ce dossier."})]}),s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsx("div",{className:"max-w-md",children:s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Numro de dossier"}),s.jsx("input",{value:d,onChange:v=>x(v.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Rechercher par numro de dossier..."})]})}),s.jsxs("div",{className:"flex gap-2",children:[I>0&&s.jsxs(U,{intent:"secondary",size:"sm",onClick:et,className:"bg-orange-500 hover:bg-orange-600",children:[" Demandes (",I,")"]}),s.jsx(U,{intent:"primary",size:"sm",onClick:()=>Ur(!0),children:"+ Ajouter un rapport"})]})]}),s.jsx("div",{className:"mb-6 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Nature du sinistre"}),s.jsx("input",{type:"text",value:m,onChange:v=>h(v.target.value),placeholder:"Rechercher par nature du sinistre...",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Statut"}),s.jsxs("select",{value:j,onChange:v=>y(v.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",children:[s.jsx("option",{value:"Tous",children:"Tous"}),s.jsx("option",{value:"Disponible",children:"Disponible"}),s.jsx("option",{value:"En attente",children:"En attente"}),s.jsx("option",{value:"Trait",children:"Trait"})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:N,onChange:v=>P(v.target.checked),className:"rounded border-slate-300 dark:border-slate-700 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-slate-600 dark:text-slate-300",children:"Favoris uniquement"})]})})]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:rp.map(v=>s.jsx(W0,{reportId:Number(v.id),status:v.status,unavailable:v.unavailable,title:v.title,createdAt:v.createdAt,beneficiary:(()=>{try{const A=JSON.parse(v.beneficiary||"[]");if(Array.isArray(A)&&A.length>0)return A.map(L=>`${L.nom} ${L.prenom}`).join(", ")}catch{}return v.beneficiary})(),initiator:v.initiator,insured:(()=>{try{const A=JSON.parse(v.insured||"[]");if(Array.isArray(A)&&A.length>0)return A.map(L=>`${L.nom} ${L.prenom}`).join(", ")}catch{}return v.insured})(),subscriber:v.subscriber,caseCode:v.caseId||"",onDownload:()=>{},onRequestReport:()=>pe(Number(v.id),v.title),onValidateCode:()=>dt(Number(v.id),v.title),onToggleFavorite:()=>a(v.title),isFavorite:l(v.title),onPreview:()=>sp(v),canEdit:(()=>{var Q;const A=(e==null?void 0:e.name)||(e==null?void 0:e.firstName)||"",L=v.createdBy||"",z=L===A||L.toLowerCase()===A.toLowerCase()||L===(e==null?void 0:e.firstName)||A==="noumano"&&L==="noumano",G=((Q=F[Number(v.id)])==null?void 0:Q.canEdit)||!1,V=z||G;return!V&&z&&console.warn(`Propritaire sans permission d'dition: ${v.title}`,{createdBy:L,userName:A,isOwner:z}),V})(),canDelete:(()=>{var Q;const A=(e==null?void 0:e.name)||(e==null?void 0:e.firstName)||"",L=v.createdBy||"",z=L===A||L.toLowerCase()===A.toLowerCase()||L===(e==null?void 0:e.firstName)||A==="noumano"&&L==="noumano",G=((Q=F[Number(v.id)])==null?void 0:Q.canDelete)||!1;return z||G})(),onEdit:()=>lp(v),onDelete:()=>ip(v),createdBy:v.createdBy,currentUser:(e==null?void 0:e.name)||""},v.id))}),s.jsxs("div",{className:"mt-8 flex items-center justify-center gap-3",children:[s.jsx(U,{intent:"secondary",size:"sm",disabled:g<=1,onClick:()=>p(v=>Math.max(1,v-1)),children:"Prcdent"}),s.jsxs("span",{className:"text-sm",children:["Page ",g," / ",wl]}),s.jsx(U,{intent:"secondary",size:"sm",disabled:g>=wl,onClick:()=>p(v=>Math.min(wl,v+1)),children:"Suivant"})]}),s.jsx(Br,{open:ut,onClose:()=>ye(!1),title:" Demande d'accs au rapport",children:s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Ce rapport ncessite une autorisation d'accs. Veuillez remplir les informations ci-dessous."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" Rapport"}),s.jsx("p",{className:"text-sm bg-slate-50 dark:bg-slate-800 p-2 rounded border",children:se==null?void 0:se.title})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" Demandeur"}),s.jsx("p",{className:"text-sm bg-slate-50 dark:bg-slate-800 p-2 rounded border",children:(e==null?void 0:e.name)||""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" Email *"}),s.jsx("input",{type:"email",value:yr,onChange:v=>ul(v.target.value),placeholder:"votre.email@exemple.com",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" Compagnie *"}),s.jsx("input",{type:"text",value:Rs,onChange:v=>ml(v.target.value),placeholder:"Nom de votre entreprise",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" Tlphone *"}),s.jsx("input",{type:"tel",value:_s,onChange:v=>fl(v.target.value),placeholder:"+225 0123456789",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" Motif de la demande *"}),s.jsx("textarea",{value:Es,onChange:v=>Cs(v.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",rows:3,placeholder:"Expliquez pourquoi vous avez besoin de ce rapport...",required:!0})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(U,{intent:"secondary",onClick:()=>ye(!1),children:"Annuler"}),s.jsx(U,{intent:"primary",onClick:()=>{if(!yr.trim()){alert("Veuillez saisir votre email");return}if(!Rs.trim()){alert("Veuillez saisir votre compagnie");return}if(!_s.trim()){alert("Veuillez saisir votre tlphone");return}if(!Es.trim()){alert("Veuillez saisir le motif de votre demande");return}se&&(n(Number(se.id),se.title,(e==null?void 0:e.name)||"",yr,Rs,"",_s,Es),ye(!1))},children:"Faire la demande"})]})]})}),s.jsx(Br,{open:H,onClose:()=>ne(!1),title:" Tlchargement scuris",children:s.jsxs("div",{className:"space-y-4 text-sm",children:[s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Veuillez saisir votre code d'accs temporaire pour tlcharger le rapport."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" Rapport"}),s.jsx("p",{className:"text-sm bg-slate-50 dark:bg-slate-800 p-2 rounded border",children:se==null?void 0:se.title})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" Code d'accs temporaire"}),s.jsx("input",{value:he,onChange:v=>{He(v.target.value.toUpperCase()),mt(!1),vr("")},className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm font-mono",placeholder:"XXX-XXX-XXX"}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Format: XXX-XXX-XXX (ex: ABC-123-DEF)"})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(U,{intent:"secondary",onClick:np,disabled:ks||!he.trim(),className:"min-w-[120px]",children:ks?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Validation..."]}):" Valider le Code"})}),wt&&s.jsx("div",{className:`p-3 rounded-md text-sm ${wt.includes("")?"bg-green-50 border border-green-200 text-green-700 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300":"bg-red-50 border border-red-200 text-red-700 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300"}`,children:wt})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(U,{intent:"secondary",onClick:()=>ne(!1),children:"Annuler"}),s.jsx(U,{intent:"accent",disabled:!zr,onClick:ap,className:zr?"":"opacity-50 cursor-not-allowed",children:" Tlcharger"})]})]})}),s.jsx(Br,{open:T,onClose:()=>te(!1),title:" Prvisualisation scurise",children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Aperu crypt des premires lignes et mtadonnes visibles."}),s.jsxs("div",{className:"rounded-md border border-slate-200 dark:border-slate-700 p-3 bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("div",{className:"font-semibold",children:se==null?void 0:se.title}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Cr le ",se==null?void 0:se.createdAt]}),s.jsxs("div",{className:"mt-2 font-mono text-xs",children:[">".repeat(8)," [APERU CHIFFR] ",".".repeat(16)]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(U,{intent:"secondary",onClick:()=>te(!1),children:"Fermer"})})]})}),s.jsx(Br,{open:Wf,onClose:()=>Ur(!1),title:" Ajouter un rapport",children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-3 text-xs text-blue-700 dark:text-blue-300",children:[s.jsx("strong",{children:"Information :"})," Vous ne pouvez crer un rapport que pour vos propres dossiers. Entrez le numro de dossier et le systme vrifiera automatiquement vos permissions. Tous les champs marqus d'un * sont obligatoires et doivent correspondre aux informations du dossier slectionn. Le fichier du rapport est galement obligatoire."]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Titre *"}),s.jsx("input",{value:rt.title,onChange:v=>Pt({...rt,title:v.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2"}),ze.title&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:ze.title})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Numro de dossier *"}),s.jsx("input",{value:An,onChange:async v=>{Ln(v.target.value),v.target.value.trim()?await Zf(v.target.value):st("")},className:`mt-1 w-full rounded-md border px-3 py-2 text-sm ${Ts?"border-red-300 bg-red-50":"border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800"}`,placeholder:"Entrez le numro de dossier"}),Ts&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:Ts}),ze.caseId&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:ze.caseId})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Statut"}),s.jsxs("select",{value:rt.status,onChange:v=>Pt({...rt,status:v.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2",children:[s.jsx("option",{value:"DISPONIBLE",children:"Disponible"}),s.jsx("option",{value:"EN_ATTENTE",children:"En attente"}),s.jsx("option",{value:"TRAITE",children:"Trait"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Bnficiaires *"}),s.jsx(U,{intent:"secondary",size:"sm",onClick:Hf,children:"+ Ajouter un bnficiaire"})]}),Ht.map((v,A)=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-md p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:["Bnficiaire ",A+1]}),Ht.length>1&&s.jsx("button",{type:"button",onClick:()=>Qf(A),className:"text-red-500 hover:text-red-700 text-sm",children:"Supprimer"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nom *"}),s.jsx("input",{value:v.nom,onChange:L=>hl(A,"nom",L.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Nom de famille"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Prnom *"}),s.jsx("input",{value:v.prenom,onChange:L=>hl(A,"prenom",L.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Prnom"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de naissance"}),s.jsx("input",{type:"date",value:v.dateNaissance,onChange:L=>hl(A,"dateNaissance",L.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]},A)),ze.beneficiaries&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:ze.beneficiaries})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Initiateur *"}),s.jsx("input",{value:rt.initiator??"",onChange:v=>Pt({...rt,initiator:v.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2"}),ze.initiator&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:ze.initiator})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Assurs *"}),s.jsx(U,{intent:"secondary",size:"sm",onClick:Jf,children:"+ Ajouter un assur"})]}),Qt.map((v,A)=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-md p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:["Assur ",A+1]}),Qt.length>1&&s.jsx("button",{type:"button",onClick:()=>Xf(A),className:"text-red-500 hover:text-red-700 text-sm",children:"Supprimer"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nom *"}),s.jsx("input",{value:v.nom,onChange:L=>gl(A,"nom",L.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Nom de famille"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Prnom *"}),s.jsx("input",{value:v.prenom,onChange:L=>gl(A,"prenom",L.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Prnom"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de naissance"}),s.jsx("input",{type:"date",value:v.dateNaissance,onChange:L=>gl(A,"dateNaissance",L.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]},A)),ze.insureds&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:ze.insureds})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Souscripteur *"}),s.jsx("input",{value:rt.subscriber??"",onChange:v=>Pt({...rt,subscriber:v.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2"}),ze.subscriber&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:ze.subscriber})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Fichier rapport *"}),s.jsx(ss,{label:"Slectionner le fichier du rapport",multiple:!1,onFilesChange:v=>Go(v[0]??null),accept:".pdf,.txt,.doc,.docx"}),jr&&s.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[jr.name,"  ",(jr.size/1024).toFixed(1)," Ko"]}),ze.file&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:ze.file})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Fichier de prvisualisation"}),s.jsx(ss,{label:"Slectionner le fichier de prvisualisation",multiple:!1,onFilesChange:v=>Ko(v[0]??null),accept:".pdf,.png,.jpg,.jpeg,.gif,.txt"}),Ps&&s.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[Ps.name,"  ",(Ps.size/1024).toFixed(1)," Ko"]}),s.jsx("div",{className:"mt-1 text-xs text-slate-400",children:"Ce fichier sera affich lors de la prvisualisation (optionnel)"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx(U,{intent:"secondary",onClick:()=>Ur(!1),children:"Annuler"}),s.jsx(U,{intent:"primary",onClick:tp,disabled:Zo,children:Zo?"Cration en cours...":"Crer"})]})]})}),s.jsx(Br,{open:Gf,onClose:()=>Dn(!1),title:" Modifier le rapport",children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Titre"}),s.jsx("input",{value:Le.title,onChange:v=>Nr({...Le,title:v.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Statut"}),s.jsxs("select",{value:Le.status,onChange:v=>Nr({...Le,status:v.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2",children:[s.jsx("option",{value:"DISPONIBLE",children:"Disponible"}),s.jsx("option",{value:"EN_ATTENTE",children:"En attente"}),s.jsx("option",{value:"TRAITE",children:"Trait"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Bnficiaire"}),s.jsx("input",{value:Le.beneficiary??"",onChange:v=>Nr({...Le,beneficiary:v.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Initiateur"}),s.jsx("input",{value:Le.initiator??"",onChange:v=>Nr({...Le,initiator:v.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Assur"}),s.jsx("input",{value:Le.insured??"",onChange:v=>Nr({...Le,insured:v.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Souscripteur"}),s.jsx("input",{value:Le.subscriber??"",onChange:v=>Nr({...Le,subscriber:v.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Numro de dossier"}),s.jsx("input",{value:vl,onChange:v=>{rc(v.target.value),op(v.target.value)},className:`mt-1 w-full rounded-md border px-3 py-2 text-sm ${In?"border-red-300 bg-red-50":"border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800"}`,placeholder:"Entrez le numro de dossier (optionnel)"}),In&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:In})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nouveau fichier rapport (optionnel)"}),s.jsx(ss,{label:"Remplacer le fichier du rapport",multiple:!1,onFilesChange:v=>ec(v[0]??null),accept:".pdf,.txt,.doc,.docx"}),Ds&&s.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[Ds.name,"  ",(Ds.size/1024).toFixed(1)," Ko"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nouveau fichier de prvisualisation (optionnel)"}),s.jsx(ss,{label:"Remplacer le fichier de prvisualisation",multiple:!1,onFilesChange:v=>tc(v[0]??null),accept:".pdf,.png,.jpg,.jpeg,.gif,.txt"}),Is&&s.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[Is.name,"  ",(Is.size/1024).toFixed(1)," Ko"]}),s.jsx("div",{className:"mt-1 text-xs text-slate-400",children:"Remplace le fichier de prvisualisation existant"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx(U,{intent:"secondary",onClick:()=>Dn(!1),children:"Annuler"}),s.jsx(U,{intent:"primary",onClick:async()=>{if(!Le.title.trim()){alert("Titre requis");return}if(vl&&In){alert("Numro de dossier invalide");return}try{const v=await af(Le.id,{...Le,caseId:vl||void 0}),A=Number(v.id??(v==null?void 0:v.id));if(!Number.isNaN(A)){const{uploadReportFile:L}=await Cd(async()=>{const{uploadReportFile:z}=await Promise.resolve().then(()=>kd);return{uploadReportFile:z}},void 0);Ds&&await L(A,Ds,"Fichier principal du rapport (mis  jour)","main"),Is&&await L(A,Is,"Fichier de prvisualisation (mis  jour)","preview")}Dn(!1),jl()}catch(v){alert((v==null?void 0:v.message)??"Erreur lors de la modification")}},children:"Modifier"})]})]})}),s.jsx(Br,{open:Kf,onClose:()=>On(!1),title:" Supprimer le rapport",children:s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:["tes-vous sr de vouloir supprimer le rapport ",s.jsxs("strong",{children:['"',Fs==null?void 0:Fs.title,'"']})," ?"]}),s.jsx("p",{className:"text-xs text-red-600",children:"Cette action est irrversible et supprimera dfinitivement le rapport et tous ses fichiers associs."}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx(U,{intent:"secondary",onClick:()=>On(!1),children:"Annuler"}),s.jsx(U,{intent:"secondary",onClick:async()=>{if(Fs)try{await lf(Fs.id),On(!1),jl()}catch(v){alert((v==null?void 0:v.message)??"Erreur lors de la suppression")}},className:"text-red-600 hover:text-red-700",children:"Supprimer"})]})]})}),s.jsx(sg,{isOpen:W,onClose:()=>K(!1),reportId:(_==null?void 0:_.id)||0,reportTitle:(_==null?void 0:_.title)||"",onSuccess:We}),s.jsx(ng,{isOpen:we,onClose:()=>ae(!1),onRefresh:We}),s.jsx(ag,{isOpen:Se,onClose:()=>O(!1),reportId:(_==null?void 0:_.id)||0,reportTitle:(_==null?void 0:_.title)||"",onSuccess:We})]})},ig=({status:e,code:t,caseId:r,createdAt:n="",createdBy:a,currentUser:l,assureNom:i,assurePrenom:o,beneficiaireNom:c,beneficiairePrenom:d,souscripteurNom:x,souscripteurPrenom:m,declarantNom:h,declarantPrenom:j,natureSinistre:y,natureFraude:N,onView:P,onViewReports:g,onStatusChange:p,onEdit:f,onDelete:b,canEditStatus:k=!1,canDelete:R=!1,data:w,hasReport:S})=>{const[M,F]=u.useState(!1),[J,W]=u.useState([]),[K,we]=u.useState(!1),ae=()=>{switch(e){case"Sous enqute":return s.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 text-blue-800 px-2 py-0.5 text-xs",children:"Sous enqute"});case"Frauduleux":return s.jsx("span",{className:"inline-flex items-center rounded-full bg-red-100 text-red-800 px-2 py-0.5 text-xs",children:"Frauduleux"});case"Preuves insuffisantes":return s.jsx("span",{className:"inline-flex items-center rounded-full bg-orange-100 text-orange-800 px-2 py-0.5 text-xs",children:"Preuves insuffisantes"})}},Se=()=>e==="Sous enqute"?y||"Dossier d'enqute":e==="Frauduleux"?N||"Dossier frauduleux":y||N||"Dossier",O=()=>{F(!0),_()},_=async()=>{if(r)try{we(!0);const I=await pf(r);W(I)}catch(I){console.error("Erreur lors du chargement des fichiers attachs:",I),W([])}finally{we(!1)}},B=async I=>{if(r)try{await hf(r,I.id,I.fileName)}catch(X){console.error("Erreur lors du tlchargement:",X),alert("Erreur lors du tlchargement du fichier")}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-xl border border-slate-200 bg-white dark:bg-slate-800 hover:border-brand-200 hover:shadow-md transition",children:s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg bg-brand-50 text-brand-700 grid place-items-center",children:e==="Sous enqute"?"":e==="Frauduleux"?"":""}),s.jsx("h3",{className:"mt-3 font-semibold",children:Se()}),s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Cr le ",n]}),a&&s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Par: ",s.jsx("span",{className:"font-medium",children:a}),l&&a===l&&s.jsx("span",{className:"ml-2 inline-flex items-center rounded-full bg-green-100 text-green-800 px-2 py-0.5 text-xs",children:" Votre dossier"})]}),t&&s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Code: ",s.jsx("span",{className:"font-mono font-medium text-brand-600",children:t})]}),s.jsxs("div",{className:"mt-4 space-y-1 text-sm",children:[i&&o&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Assur:"}),s.jsxs("span",{className:"ml-auto font-medium",children:[o," ",i]})]}),c&&d&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Bnficiaire:"}),s.jsxs("span",{className:"ml-auto font-medium",children:[d," ",c]})]}),x&&m&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Souscripteur:"}),s.jsxs("span",{className:"ml-auto font-medium",children:[m," ",x]})]}),h&&j&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Dclarant:"}),s.jsxs("span",{className:"ml-auto font-medium",children:[j," ",h]})]})]}),s.jsx("div",{className:"mt-3 flex items-center gap-2",children:ae()}),k&&p&&s.jsx("div",{className:"mt-3",children:s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Modifier le statut"}),s.jsxs("select",{value:(()=>{switch(e){case"Sous enqute":return"SOUS_ENQUETE";case"Frauduleux":return"FRAUDULEUX";case"Preuves insuffisantes":return"PREUVE_INSUFFISANTE";default:return"SOUS_ENQUETE"}})(),onChange:I=>p(I.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-2 py-1 text-xs",children:[s.jsx("option",{value:"SOUS_ENQUETE",children:"Sous enqute"}),s.jsx("option",{value:"FRAUDULEUX",children:"Frauduleux"}),s.jsx("option",{value:"PREUVE_INSUFFISANTE",children:"Preuves insuffisantes"})]})]})}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx(U,{intent:"primary",onClick:O,className:"w-full",children:"Voir le dossier"}),g&&s.jsx(U,{intent:"secondary",onClick:g,className:"w-full",children:S?" Voir rapport":" Crer rapport"}),k&&f&&s.jsx(U,{intent:"secondary",onClick:f,className:"w-full",children:" Modifier le dossier"}),R&&b&&s.jsx(U,{intent:"secondary",onClick:b,className:"w-full bg-red-50 text-red-700 border-red-200 hover:bg-red-100",children:" Supprimer le dossier"})]})]})}),M&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold",children:["Dtails du dossier ",t]}),s.jsx("button",{onClick:()=>F(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:""})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informations gnrales"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Statut:"}),s.jsx("div",{className:"mt-1",children:ae()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Date de cration:"}),s.jsx("div",{className:"font-medium",children:n})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Code de rfrence:"}),s.jsx("div",{className:"font-mono font-medium text-brand-600",children:t})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Nature du dossier"}),s.jsxs("div",{className:"space-y-3",children:[y&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Nature du sinistre:"}),s.jsx("div",{className:"font-medium",children:y})]}),N&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Nature de la fraude:"}),s.jsx("div",{className:"font-medium",children:N})]})]})]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Personnes impliques"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(w==null?void 0:w.assures)&&Array.isArray(w.assures)&&w.assures.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Assurs"}),s.jsx("div",{className:"space-y-2",children:w.assures.map((I,X)=>s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-3 rounded-md",children:[s.jsxs("div",{className:"font-medium",children:[I.prenom," ",I.nom]}),I.dateNaissance&&s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Date de naissance: ",I.dateNaissance]})]},X))})]}),(w==null?void 0:w.beneficiaires)&&Array.isArray(w.beneficiaires)&&w.beneficiaires.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Bnficiaires"}),s.jsx("div",{className:"space-y-2",children:w.beneficiaires.map((I,X)=>s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-3 rounded-md",children:[s.jsxs("div",{className:"font-medium",children:[I.prenom," ",I.nom]}),I.dateNaissance&&s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Date de naissance: ",I.dateNaissance]})]},X))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(x||m)&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Souscripteur"}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-3 rounded-md",children:[s.jsxs("div",{className:"font-medium",children:[m," ",x]}),(w==null?void 0:w.souscripteur_date_naissance)&&s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Date de naissance: ",w.souscripteur_date_naissance]})]})]}),(h||j)&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Dclarant"}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-3 rounded-md",children:[s.jsxs("div",{className:"font-medium",children:[j," ",h]}),(w==null?void 0:w.declarant_date_naissance)&&s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Date de naissance: ",w.declarant_date_naissance]})]})]})]})]}),w&&s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Informations supplmentaires"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.date_declaration&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Date de dclaration:"}),s.jsx("div",{className:"font-medium",children:w.date_declaration})]}),w.lieu_declaration&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Lieu de dclaration:"}),s.jsx("div",{className:"font-medium",children:w.lieu_declaration})]})]}),w.zones_ombre&&s.jsxs("div",{className:"mt-4",children:[s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Zones d'ombre:"}),s.jsx("div",{className:"mt-1 p-3 bg-slate-50 dark:bg-slate-700 rounded-md",children:w.zones_ombre})]})]}),s.jsxs("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:" Fichiers attachs"}),K?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-600 mx-auto"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-2",children:"Chargement des fichiers..."})]}):J.length>0?s.jsx("div",{className:"space-y-3",children:J.map(I=>s.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 p-4 rounded-lg border border-slate-200 dark:border-slate-600",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-lg",children:[I.fileType==="pdf"&&"",I.fileType==="image"&&"",I.fileType==="document"&&"",I.fileType==="spreadsheet"&&"",I.fileType==="text"&&"",I.fileType==="other"&&""]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:I.fileName}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[I.formattedSize,"  ",I.fileType,I.category&&`  ${I.category}`]}),I.description&&s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:I.description})]})]})}),s.jsx(U,{intent:"secondary",size:"sm",onClick:()=>B(I),className:"ml-3",children:" Tlcharger"})]})},I.id))}):s.jsxs("div",{className:"text-center py-6 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[s.jsx("div",{className:"text-4xl mb-2",children:""}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Aucun fichier attach  ce dossier"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Les fichiers uploads pendant la saisie apparatront ici"})]})]}),s.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[s.jsx(U,{intent:"secondary",onClick:()=>F(!1),children:"Fermer"}),k&&f&&s.jsx(U,{intent:"primary",onClick:()=>{F(!1),f()},children:"Modifier le dossier"})]})]})})})]})},og=()=>{const{cases:e,createCase:t}=Qo(),{user:r}=Ze(),n=gr(),[a,l]=u.useState([]),[i,o]=u.useState([]),[c,d]=u.useState(!0),[x,m]=u.useState(!1),[h,j]=u.useState({}),[y,N]=u.useState("new"),[P,g]=u.useState(null),[p,f]=u.useState(1),b=6,[k,R]=u.useState("SOUS_ENQUETE"),[w,S]=u.useState({}),[M,F]=u.useState([]),[J,W]=u.useState(""),[K,we]=u.useState("Tous"),[ae,Se]=u.useState("Date (rcent d'abord)"),[O,_]=u.useState(!1),[B,I]=u.useState(""),[X,pe]=u.useState(""),[et,dt]=u.useState(""),[We,ut]=u.useState("");if(!r)return null;const[ye,se]=u.useState([{nom:"",prenom:"",dateNaissance:""}]),[tt,Vt]=u.useState([{nom:"",prenom:"",dateNaissance:""}]),dl=()=>{se([...ye,{nom:"",prenom:"",dateNaissance:""}])},zr=E=>{ye.length>1&&se(ye.filter((C,T)=>T!==E))},mt=(E,C,T)=>{const te=[...ye];te[E]={...te[E],[C]:T},se(te)},ks=()=>{Vt([...tt,{nom:"",prenom:"",dateNaissance:""}])},Ss=E=>{tt.length>1&&Vt(tt.filter((C,T)=>T!==E))},wt=(E,C,T)=>{const te=[...tt];te[E]={...te[E],[C]:T},Vt(te)};u.useEffect(()=>{(async()=>{try{d(!0);const[C,T]=await Promise.all([Lt(),Ba()]);l(C),o(T);const te={};for(const H of C)try{const ne=await ds(H.id,r.name);te[H.id]=ne}catch(ne){console.error(`Erreur lors du chargement des permissions pour le dossier ${H.id}:`,ne),te[H.id]={canEdit:!1,canDelete:!1}}j(te),e.length>0&&C.length===0&&await vr()}catch(C){console.error("Erreur lors du chargement des dossiers:",C)}finally{d(!1)}})()},[e.length,r.name]);const vr=async()=>{m(!0);try{for(const C of e)try{await Va({type:C.type==="enquete"?"ENQUETE":"FRAUDULEUX",status:C.status==="Enqute en cours"?"SOUS_ENQUETE":"FRAUDULEUX",data:C.data},r.name)}catch(T){console.error(`Erreur lors de la migration du dossier ${C.code}:`,T)}const E=await Lt();l(E),localStorage.removeItem("assurance_app_state")}catch(E){console.error("Erreur lors de la migration:",E)}finally{m(!1)}},Es=E=>{E.preventDefault();const C=ye.filter(H=>H.nom.trim()&&H.prenom.trim());if(C.length===0)return alert("Au moins un bnficiaire avec nom et prnom est obligatoire");const T=tt.filter(H=>H.nom.trim()&&H.prenom.trim());if(T.length===0)return alert("Au moins un assur avec nom et prnom est obligatoire");if(!w.nature_sinistre)return alert("Renseignez au minimum: Nature du sinistre");const te={...w,beneficiaires:C,assures:T};(async()=>{try{const H=await Va({type:"ENQUETE",status:"SOUS_ENQUETE",data:te},r.name);if(M.length>0)try{for(const he of M)await xf(H.id,he,`Fichier upload lors de la cration du dossier: ${he.name}`,"justificatif");console.log(`${M.length} fichier(s) upload(s) avec succs`)}catch(he){console.error("Erreur lors de l'upload des fichiers:",he),alert("Le dossier a t cr mais il y a eu une erreur lors de l'upload des fichiers: "+(he instanceof Error?he.message:"Erreur inconnue"))}const ne=await Lt();l(ne)}catch(H){console.error("Erreur lors de la cration du dossier:",H),alert("Erreur lors de la cration du dossier: "+(H instanceof Error?H.message:"Erreur inconnue"))}})(),S({}),se([{nom:"",prenom:"",dateNaissance:""}]),Vt([{nom:"",prenom:"",dateNaissance:""}]),F([]),N("list"),f(1)},Cs=u.useMemo(()=>{let E=a.filter(C=>{var te,H,ne,he,He,Pn,pl;let T={};try{T=JSON.parse(C.dataJson||"{}")}catch(qt){console.warn("Erreur de parsing JSON pour le dossier",C.id,":",qt),T={}}if(J&&!((te=T.nature_sinistre)!=null&&te.toLowerCase().includes(J.toLowerCase())))return!1;if(K!=="Tous"){const qt={"Sous enqute":"SOUS_ENQUETE",Frauduleux:"FRAUDULEUX","Preuves insuffisantes":"PREUVE_INSUFFISANTE"};if(C.status!==qt[K])return!1}if(B){const qt=((H=T.assures)==null?void 0:H.map(Wt=>{var $r;return($r=Wt.nom)==null?void 0:$r.toLowerCase()}))||[],Tn=((ne=T.assure_nom)==null?void 0:ne.toLowerCase())||"";if(!qt.some(Wt=>Wt.includes(B.toLowerCase()))&&!Tn.includes(B.toLowerCase()))return!1}if(X){const qt=((he=T.beneficiaires)==null?void 0:he.map(Wt=>{var $r;return($r=Wt.nom)==null?void 0:$r.toLowerCase()}))||[],Tn=((He=T.beneficiaire_nom)==null?void 0:He.toLowerCase())||"";if(!qt.some(Wt=>Wt.includes(X.toLowerCase()))&&!Tn.includes(X.toLowerCase()))return!1}return!(et&&!((Pn=T.souscripteur_nom)!=null&&Pn.toLowerCase().includes(et.toLowerCase()))||We&&!((pl=C.createdBy)!=null&&pl.toLowerCase().includes(We.toLowerCase())))});return E.sort((C,T)=>{switch(ae){case"Date (rcent d'abord)":return new Date(T.createdAt).getTime()-new Date(C.createdAt).getTime();case"Date (ancien d'abord)":return new Date(C.createdAt).getTime()-new Date(T.createdAt).getTime();case"Rfrence (A-Z)":return C.reference.localeCompare(T.reference);case"Rfrence (Z-A)":return T.reference.localeCompare(C.reference);default:return new Date(T.createdAt).getTime()-new Date(C.createdAt).getTime()}}),E},[a,J,K,ae,B,X,et,We]);u.useEffect(()=>{f(1)},[J,K,ae,B,X,et,We]);const yr=Math.max(1,Math.ceil(Cs.length/b)),ul=Cs.slice((p-1)*b,p*b),Rs=async(E,C)=>{try{await df(E,C,r.name);const T=await Lt();l(T)}catch(T){console.error("Erreur lors de la mise  jour du statut:",T),alert("Erreur lors de la mise  jour du statut: "+(T instanceof Error?T.message:"Erreur inconnue"))}},ml=async E=>{if(confirm("tes-vous sr de vouloir supprimer ce dossier ? Cette action est irrversible."))try{await mf(E,r.name);const C=await Lt();l(C);const T={};for(const H of C)try{const ne=await ds(H.id,r.name);T[H.id]=ne}catch{T[H.id]={canEdit:!1,canDelete:!1}}j(T);const te=Math.max(1,Math.ceil(C.length/b));p>te&&f(te),alert("Dossier supprim avec succs")}catch(C){console.error("Erreur lors de la suppression du dossier:",C),alert("Erreur lors de la suppression du dossier: "+(C instanceof Error?C.message:"Erreur inconnue"))}},_s=E=>{g(E);let C={};try{C=JSON.parse(E.dataJson||"{}")}catch(T){console.warn("Erreur de parsing JSON pour le dossier",E.id,":",T),C={}}S({souscripteur_nom:C.souscripteur_nom||"",souscripteur_prenom:C.souscripteur_prenom||"",souscripteur_date_naissance:C.souscripteur_date_naissance||"",declarant_nom:C.declarant_nom||"",declarant_prenom:C.declarant_prenom||"",declarant_date_naissance:C.declarant_date_naissance||"",nature_sinistre:C.nature_sinistre||"",date_sinistre:C.date_sinistre||"",date_declaration:C.date_declaration||"",lieu_declaration:C.lieu_declaration||"",zones_ombre:C.zones_ombre||""}),C.beneficiaires&&Array.isArray(C.beneficiaires)?se(C.beneficiaires.length>0?C.beneficiaires:[{nom:"",prenom:"",dateNaissance:""}]):se([{nom:"",prenom:"",dateNaissance:""}]),C.assures&&Array.isArray(C.assures)?Vt(C.assures.length>0?C.assures:[{nom:"",prenom:"",dateNaissance:""}]):Vt([{nom:"",prenom:"",dateNaissance:""}]),N("edit")},fl=async E=>{if(E.preventDefault(),!P)return;const C=ye.filter(H=>H.nom.trim()&&H.prenom.trim());if(C.length===0)return alert("Au moins un bnficiaire avec nom et prnom est obligatoire");const T=tt.filter(H=>H.nom.trim()&&H.prenom.trim());if(T.length===0)return alert("Au moins un assur avec nom et prnom est obligatoire");if(!w.nature_sinistre)return alert("Renseignez au minimum: Nature du sinistre");const te={...w,beneficiaires:C,assures:T,attachments:M.map(H=>({name:H.name,size:H.size,type:H.type}))};try{await uf(P.id,te,r.name);const H=await Lt();l(H);const ne={};for(const he of H)try{const He=await ds(he.id,r.name);ne[he.id]=He}catch{ne[he.id]={canEdit:!1,canDelete:!1}}j(ne),S({}),se([{nom:"",prenom:"",dateNaissance:""}]),Vt([{nom:"",prenom:"",dateNaissance:""}]),F([]),g(null),N("list"),f(1),alert("Dossier modifi avec succs")}catch(H){console.error("Erreur lors de la modification du dossier:",H),alert("Erreur lors de la modification du dossier: "+(H instanceof Error?H.message:"Erreur inconnue"))}},Jo=(E,C,T)=>{if(C){try{localStorage.removeItem("reports_prefill_case")}catch{}try{localStorage.setItem("reports_search_case",E)}catch{}}else{const te=He=>He?[He.nom,He.prenom].filter(Boolean).join(" ").trim():"",H=Array.isArray(T==null?void 0:T.assures)&&T.assures.length>0?te(T.assures[0]):"",ne=Array.isArray(T==null?void 0:T.beneficiaires)&&T.beneficiaires.length>0?te(T.beneficiaires[0]):"",he={caseId:E,reportForm:{title:(T==null?void 0:T.titre_rapport)||(T==null?void 0:T.nature_sinistre)||"",beneficiary:(T==null?void 0:T.beneficiaire_nom)||ne,insured:(T==null?void 0:T.assure_nom)||H,subscriber:(T==null?void 0:T.souscripteur_nom)||"",initiator:(T==null?void 0:T.initiateur)||""}};try{localStorage.setItem("reports_prefill_case",JSON.stringify(he))}catch{}try{localStorage.setItem("reports_search_case",E)}catch{}}n("/rapports")},Xo=E=>{let C={};try{C=JSON.parse(E.dataJson||"{}")}catch(ne){console.warn("Erreur de parsing JSON pour le dossier",E.id,":",ne),C={}}const T=h[E.id]||{canEdit:!1,canDelete:!1};console.log(`Permissions pour le dossier ${E.reference} (ID: ${E.id}):`,T),console.log(`Cr par: ${E.createdBy}, Utilisateur actuel: ${r.name}`);const te=(E.reference||"").toLowerCase(),H=(i||[]).some(ne=>[ne.caseId,ne.caseReference,ne.caseCode].filter(Boolean).some(He=>String(He).toLowerCase()===te));return{id:E.id.toString(),code:E.reference,status:(()=>{switch(E.status){case"SOUS_ENQUETE":return"Sous enqute";case"FRAUDULEUX":return"Frauduleux";case"PREUVE_INSUFFISANTE":return"Preuves insuffisantes";default:return"Sous enqute"}})(),type:E.type==="ENQUETE"?"enquete":"frauduleux",createdAt:E.createdAt,createdBy:E.createdBy,currentUser:r.name,data:C,canEditStatus:T.canEdit,canDelete:T.canDelete,onViewReports:()=>Jo(E.reference,H,C),hasReport:H}};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx(U,{intent:y==="new"?"primary":"secondary",size:"sm",onClick:()=>{N("new"),f(1)},children:"Nouveau dossier"}),s.jsx(U,{intent:y==="list"?"primary":"secondary",size:"sm",onClick:()=>{N("list"),f(1)},children:"Liste des dossiers"}),P&&s.jsxs(U,{intent:y==="edit"?"primary":"secondary",size:"sm",onClick:()=>N("edit"),children:["Modifier le dossier ",P.reference]})]}),c&&s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-sm text-slate-500",children:"Chargement des dossiers..."})}),x&&s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-sm text-blue-500",children:"Migration des dossiers en cours..."})}),!c&&!x&&s.jsx(s.Fragment,{children:y==="new"?s.jsxs("form",{onSubmit:Es,className:"rounded-xl border border-slate-200 dark:border-slate-700 p-6 space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Dpt de dossier  Enqute"}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-3 mb-4",children:s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[" ",s.jsx("strong",{children:"Note :"}),` Seuls les dossiers d'enqute peuvent tre crs. Le statut sera automatiquement dfini  "Enqute en cours".`]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Assurs"}),s.jsx(U,{intent:"secondary",size:"sm",onClick:ks,children:"+ Ajouter un assur"})]}),tt.map((E,C)=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-md p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:["Assur ",C+1]}),tt.length>1&&s.jsx("button",{type:"button",onClick:()=>Ss(C),className:"text-red-500 hover:text-red-700 text-sm",children:"Supprimer"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nom *"}),s.jsx("input",{value:E.nom,onChange:T=>wt(C,"nom",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Nom de famille"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Prnom *"}),s.jsx("input",{value:E.prenom,onChange:T=>wt(C,"prenom",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Prnom"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de naissance"}),s.jsx("input",{type:"date",value:E.dateNaissance,onChange:T=>wt(C,"dateNaissance",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]},C))]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bnficiaires"}),s.jsx(U,{intent:"secondary",size:"sm",onClick:dl,children:"+ Ajouter un bnficiaire"})]}),ye.map((E,C)=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-md p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:["Bnficiaire ",C+1]}),ye.length>1&&s.jsx("button",{type:"button",onClick:()=>zr(C),className:"text-red-500 hover:text-red-700 text-sm",children:"Supprimer"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nom *"}),s.jsx("input",{value:E.nom,onChange:T=>mt(C,"nom",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Nom de famille"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Prnom *"}),s.jsx("input",{value:E.prenom,onChange:T=>mt(C,"prenom",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Prnom"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de naissance"}),s.jsx("input",{type:"date",value:E.dateNaissance,onChange:T=>mt(C,"dateNaissance",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]},C))]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Identit du souscripteur"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nom"}),s.jsx("input",{value:w.souscripteur_nom??"",onChange:E=>S({...w,souscripteur_nom:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Nom de famille"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Prnom"}),s.jsx("input",{value:w.souscripteur_prenom??"",onChange:E=>S({...w,souscripteur_prenom:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Prnom"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de naissance"}),s.jsx("input",{type:"date",value:w.souscripteur_date_naissance??"",onChange:E=>S({...w,souscripteur_date_naissance:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Identit du dclarant"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nom"}),s.jsx("input",{value:w.declarant_nom??"",onChange:E=>S({...w,declarant_nom:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Nom de famille"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Prnom"}),s.jsx("input",{value:w.declarant_prenom??"",onChange:E=>S({...w,declarant_prenom:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Prnom"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de naissance"}),s.jsx("input",{type:"date",value:w.declarant_date_naissance??"",onChange:E=>S({...w,declarant_date_naissance:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]}),s.jsxs("label",{className:"block md:col-span-2",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nature du sinistre"}),s.jsx("input",{value:w.nature_sinistre??"",onChange:E=>S({...w,nature_sinistre:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Ex: usurpation, dcs fictif"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:col-span-2",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date du sinistre"}),s.jsx("input",{type:"date",value:w.date_sinistre??"",onChange:E=>S({...w,date_sinistre:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de dclaration"}),s.jsx("input",{type:"date",value:w.date_declaration??"",onChange:E=>S({...w,date_declaration:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]}),s.jsxs("label",{className:"block md:col-span-2",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Zones d'ombre"}),s.jsx("textarea",{value:w.zones_ombre??"",onChange:E=>S({...w,zones_ombre:E.target.value}),rows:4,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Dcrivez les zones d'ombre"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ss,{label:"Ajouter des justificatifs",multiple:!0,onFilesChange:F,accept:".pdf,.jpg,.png"}),M.length>0&&s.jsx("ul",{className:"mt-2 text-xs text-slate-600 dark:text-slate-300 space-y-1",children:M.map(E=>s.jsxs("li",{children:[E.name,"  ",(E.size/1024).toFixed(1)," Ko"]},E.name))})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(U,{intent:"primary",type:"submit",children:"Soumettre"})})]}):y==="edit"?s.jsxs("form",{onSubmit:fl,className:"rounded-xl border border-slate-200 dark:border-slate-700 p-6 space-y-4",children:[s.jsxs("h2",{className:"text-lg font-semibold",children:["Modifier le dossier  ",P==null?void 0:P.reference]}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md p-3 mb-4",children:s.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[" ",s.jsx("strong",{children:"Note :"})," Vous modifiez le dossier ",P==null?void 0:P.reference,". Toutes les modifications seront sauvegardes."]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Assurs"}),s.jsx(U,{intent:"secondary",size:"sm",onClick:ks,children:"+ Ajouter un assur"})]}),tt.map((E,C)=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-md p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:["Assur ",C+1]}),tt.length>1&&s.jsx("button",{type:"button",onClick:()=>Ss(C),className:"text-red-500 hover:text-red-700 text-sm",children:"Supprimer"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nom *"}),s.jsx("input",{value:E.nom,onChange:T=>wt(C,"nom",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Nom de famille"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Prnom *"}),s.jsx("input",{value:E.prenom,onChange:T=>wt(C,"prenom",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Prnom"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de naissance"}),s.jsx("input",{type:"date",value:E.dateNaissance,onChange:T=>wt(C,"dateNaissance",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]},C))]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bnficiaires"}),s.jsx(U,{intent:"secondary",size:"sm",onClick:dl,children:"+ Ajouter un bnficiaire"})]}),ye.map((E,C)=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-md p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:["Bnficiaire ",C+1]}),ye.length>1&&s.jsx("button",{type:"button",onClick:()=>zr(C),className:"text-red-500 hover:text-red-700 text-sm",children:"Supprimer"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nom *"}),s.jsx("input",{value:E.nom,onChange:T=>mt(C,"nom",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Nom de famille"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Prnom *"}),s.jsx("input",{value:E.prenom,onChange:T=>mt(C,"prenom",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Prnom"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de naissance"}),s.jsx("input",{type:"date",value:E.dateNaissance,onChange:T=>mt(C,"dateNaissance",T.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]},C))]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Identit du souscripteur"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nom"}),s.jsx("input",{value:w.souscripteur_nom??"",onChange:E=>S({...w,souscripteur_nom:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Nom de famille"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Prnom"}),s.jsx("input",{value:w.souscripteur_prenom??"",onChange:E=>S({...w,souscripteur_prenom:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Prnom"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de naissance"}),s.jsx("input",{type:"date",value:w.souscripteur_date_naissance??"",onChange:E=>S({...w,souscripteur_date_naissance:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Identit du dclarant"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nom"}),s.jsx("input",{value:w.declarant_nom??"",onChange:E=>S({...w,declarant_nom:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Nom de famille"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Prnom"}),s.jsx("input",{value:w.declarant_prenom??"",onChange:E=>S({...w,declarant_prenom:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Prnom"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de naissance"}),s.jsx("input",{type:"date",value:w.declarant_date_naissance??"",onChange:E=>S({...w,declarant_date_naissance:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]}),s.jsxs("label",{className:"block md:col-span-2",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Nature du sinistre"}),s.jsx("input",{value:w.nature_sinistre??"",onChange:E=>S({...w,nature_sinistre:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Ex: usurpation, dcs fictif"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:col-span-2",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date du sinistre"}),s.jsx("input",{type:"date",value:w.date_sinistre??"",onChange:E=>S({...w,date_sinistre:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Date de dclaration"}),s.jsx("input",{type:"date",value:w.date_declaration??"",onChange:E=>S({...w,date_declaration:E.target.value}),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]}),s.jsxs("label",{className:"block md:col-span-2",children:[s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:"Zones d'ombre"}),s.jsx("textarea",{value:w.zones_ombre??"",onChange:E=>S({...w,zones_ombre:E.target.value}),rows:4,className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",placeholder:"Dcrivez les zones d'ombre"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ss,{label:"Ajouter des justificatifs",multiple:!0,onFilesChange:F,accept:".pdf,.jpg,.png"}),M.length>0&&s.jsx("ul",{className:"mt-2 text-xs text-slate-600 dark:text-slate-300 space-y-1",children:M.map(E=>s.jsxs("li",{children:[E.name,"  ",(E.size/1024).toFixed(1)," Ko"]},E.name))})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(U,{intent:"secondary",onClick:()=>{g(null),N("list")},children:"Annuler"}),s.jsx(U,{intent:"primary",type:"submit",children:"Sauvegarder les modifications"})]})]}):s.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Dossiers  Tous les dossiers"}),s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Rechercher"}),s.jsx("input",{type:"text",value:J,onChange:E=>W(E.target.value),placeholder:"Nature du sinistre...",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Filtrer par statut"}),s.jsxs("select",{value:K,onChange:E=>we(E.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",children:[s.jsx("option",{value:"Tous",children:"Tous"}),s.jsx("option",{value:"Sous enqute",children:"Sous enqute"}),s.jsx("option",{value:"Frauduleux",children:"Frauduleux"}),s.jsx("option",{value:"Preuves insuffisantes",children:"Preuves insuffisantes"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Trier"}),s.jsxs("select",{value:ae,onChange:E=>Se(E.target.value),className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm",children:[s.jsx("option",{value:"Date (rcent d'abord)",children:"Date (rcent d'abord)"}),s.jsx("option",{value:"Date (ancien d'abord)",children:"Date (ancien d'abord)"}),s.jsx("option",{value:"Rfrence (A-Z)",children:"Rfrence (A-Z)"}),s.jsx("option",{value:"Rfrence (Z-A)",children:"Rfrence (Z-A)"})]})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:O,onChange:E=>_(E.target.checked),className:"rounded border-slate-300 dark:border-slate-700 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-slate-600 dark:text-slate-300",children:"Favoris uniquement"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Assur"}),s.jsx("input",{type:"text",value:B,onChange:E=>I(E.target.value),placeholder:"Nom de l'assur",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Bnficiaire"}),s.jsx("input",{type:"text",value:X,onChange:E=>pe(E.target.value),placeholder:"Nom du bnficiaire",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Souscripteur"}),s.jsx("input",{type:"text",value:et,onChange:E=>dt(E.target.value),placeholder:"Nom du souscripteur",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-300 mb-1",children:"Initiateur"}),s.jsx("input",{type:"text",value:We,onChange:E=>ut(E.target.value),placeholder:"Nom de l'initiateur",className:"w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 px-3 py-2 text-sm"})]})]})]}),Cs.length===0?s.jsx("div",{className:"py-8 text-sm text-slate-500 text-center",children:"Aucun dossier pour l'instant"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ul.map(E=>{const C=Xo(E);return s.jsx(ig,{caseId:E.id,status:C.status,code:C.code,createdAt:new Date(C.createdAt).toLocaleDateString("fr-FR"),createdBy:C.createdBy,currentUser:C.currentUser,hasReport:C.hasReport,assureNom:C.data.assures&&Array.isArray(C.data.assures)?C.data.assures.map(T=>T.nom).join(", "):C.data.assure_nom,assurePrenom:C.data.assures&&Array.isArray(C.data.assures)?C.data.assures.map(T=>T.prenom).join(", "):C.data.assure_prenom,beneficiaireNom:C.data.beneficiaires&&Array.isArray(C.data.beneficiaires)?C.data.beneficiaires.map(T=>T.nom).join(", "):C.data.beneficiaire_nom,beneficiairePrenom:C.data.beneficiaires&&Array.isArray(C.data.beneficiaires)?C.data.beneficiaires.map(T=>T.prenom).join(", "):C.data.beneficiaire_prenom,souscripteurNom:C.data.souscripteur_nom,souscripteurPrenom:C.data.souscripteur_prenom,declarantNom:C.data.declarant_nom,declarantPrenom:C.data.declarant_prenom,natureSinistre:C.data.nature_sinistre,natureFraude:C.data.nature_fraude,onViewReports:C.onViewReports,onStatusChange:T=>Rs(E.id,T),onEdit:()=>_s(E),onDelete:()=>ml(E.id),canEditStatus:C.canEditStatus,canDelete:C.canDelete,data:C.data},E.id)})}),s.jsxs("div",{className:"mt-8 flex items-center justify-center gap-3",children:[s.jsx(U,{intent:"secondary",size:"sm",disabled:p<=1,onClick:()=>f(E=>Math.max(1,E-1)),children:"Prcdent"}),s.jsxs("span",{className:"text-sm",children:["Page ",p," / ",yr]}),s.jsx(U,{intent:"secondary",size:"sm",disabled:p>=yr,onClick:()=>f(E=>Math.min(yr,E+1)),children:"Suivant"})]})]})]})})]})},cg=()=>{const{user:e}=Ze(),[t,r]=u.useState([]),[n,a]=u.useState([]),[l,i]=u.useState("inbox"),[o,c]=u.useState(!0),[d,x]=u.useState(null),m=async()=>{if(e!=null&&e.name)try{c(!0);const[f,b]=await Promise.allSettled([xa(e.name),qr(e.name)]);f.status==="fulfilled"?r(f.value):console.error("Erreur chargement inbox:",f.reason),b.status==="fulfilled"?a(b.value):console.warn("Corbeille non charge:",b.reason),x(null)}catch(f){x("Erreur lors du chargement des notifications"),console.error("Erreur chargement notifications:",f)}finally{c(!1)}},h=async f=>{if(e!=null&&e.name)try{await zf(f,e.name)&&r(k=>k.map(R=>R.id===f?{...R,read:!0,readAt:new Date().toISOString()}:R))}catch(b){console.error("Erreur marquage notification:",b)}},j=async()=>{if(e!=null&&e.name)try{await $f(e.name)&&r(b=>b.map(k=>({...k,read:!0,readAt:new Date().toISOString()})))}catch(f){console.error("Erreur marquage toutes notifications:",f)}},y=async f=>{if(!(e!=null&&e.name)){console.error(" Utilisateur non connect");return}if(console.log(" Tentative de suppression de la notification:",f,"pour l'utilisateur:",e.name),!confirm("tes-vous sr de vouloir supprimer cette notification ?")){console.log(" Suppression annule par l'utilisateur");return}try{console.log(" Appel API deleteNotification...");const b=await Uf(f,e.name);if(console.log(" Rponse API:",b),b){console.log(" Suppression russie, mise  jour de la liste"),r(R=>R.filter(w=>w.id!==f));const k=await qr(e.name);a(k)}else console.error(" La suppression a chou ct serveur"),alert("Erreur: La suppression a chou")}catch(b){console.error(" Erreur suppression notification:",b),alert("Erreur lors de la suppression: "+b.message)}},N=async()=>{if(e!=null&&e.name&&confirm("tes-vous sr de vouloir supprimer toutes vos notifications ?"))try{if(await Mf(e.name)){r([]);const b=await qr(e.name);a(b)}}catch(f){console.error("Erreur suppression toutes notifications:",f)}},P=async f=>{if(e!=null&&e.name)try{if(await Bf(f,e.name)){a(R=>R.filter(w=>w.id!==f));const k=await xa(e.name);r(k)}}catch(b){console.error("Erreur restauration notification:",b)}},g=async()=>{if(e!=null&&e.name)try{if(await Vf(e.name)>=0){const b=await xa(e.name);r(b);const k=await qr(e.name);a(k)}}catch(f){console.error("Erreur restauration toutes notifications:",f)}};u.useEffect(()=>{m()},[e==null?void 0:e.name]),u.useEffect(()=>{l==="trash"&&(e!=null&&e.name)&&n.length===0&&qr(e.name).then(a).catch(f=>console.warn("Corbeille indisponible:",f))},[l,e==null?void 0:e.name]);const p=t.filter(f=>!f.read).length;return s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16",children:s.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Notifications"}),s.jsxs("div",{className:"flex rounded-md border border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsx("button",{className:`px-3 py-1 text-sm ${l==="inbox"?"bg-slate-100 dark:bg-slate-700":""}`,onClick:()=>i("inbox"),children:"Bote de rception"}),s.jsx("button",{className:`px-3 py-1 text-sm ${l==="trash"?"bg-slate-100 dark:bg-slate-700":""}`,onClick:()=>i("trash"),children:"Corbeille"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[l==="inbox"&&p>0&&s.jsxs(U,{intent:"secondary",size:"sm",onClick:j,children:["Marquer tout comme lu (",p,")"]}),l==="inbox"&&t.length>0&&s.jsx(U,{intent:"secondary",size:"sm",onClick:N,className:"text-red-600 hover:text-red-700",children:"Supprimer tout"}),l==="trash"&&n.length>0&&s.jsx(U,{intent:"secondary",size:"sm",onClick:g,children:"Restaurer tout"})]})]}),o&&s.jsx("div",{className:"py-8 text-sm text-slate-500",children:"Chargement des notifications..."}),d&&s.jsx("div",{className:"py-8 text-sm text-red-600",children:d}),!o&&!d&&l==="inbox"&&s.jsxs("ul",{className:"mt-4 divide-y divide-slate-200 dark:divide-slate-700",children:[t.length===0&&s.jsx("li",{className:"py-8 text-sm text-slate-500",children:"Aucune notification pour le moment"}),t.map(f=>s.jsxs("li",{className:"py-3 flex items-start gap-3",children:[s.jsx("div",{className:`h-2 w-2 rounded-full mt-2 ${f.read?"bg-slate-400":"bg-brand-500"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium",children:f.title}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:f.message}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:new Date(f.createdAt).toLocaleString("fr-FR")})]}),s.jsxs("div",{className:"flex flex-col gap-1 ml-auto",children:[!f.read&&s.jsx("button",{className:"text-xs text-brand-600 hover:underline",onClick:()=>h(f.id),children:"Marquer comme lu"}),s.jsx("button",{className:"text-xs text-red-600 hover:underline hover:text-red-700",onClick:()=>y(f.id),title:"Supprimer cette notification",children:" Supprimer"})]})]},f.id))]}),!o&&!d&&l==="trash"&&s.jsxs("ul",{className:"mt-4 divide-y divide-slate-200 dark:divide-slate-700",children:[n.length===0&&s.jsx("li",{className:"py-8 text-sm text-slate-500",children:"Corbeille vide"}),n.map(f=>s.jsxs("li",{className:"py-3 flex items-start gap-3",children:[s.jsx("div",{className:"h-2 w-2 rounded-full mt-2 bg-slate-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium",children:f.title}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:f.message}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Supprime"})]}),s.jsx("div",{className:"flex flex-col gap-1 ml-auto",children:s.jsx("button",{className:"text-xs text-brand-600 hover:underline",onClick:()=>P(f.id),children:"Restaurer"})})]},f.id))]})]})})},dg=()=>{const{cases:e,notifications:t}=Qo(),{user:r}=Ze(),[n,a]=u.useState(null),[l,i]=u.useState(0);u.useEffect(()=>{(async()=>{if(r!=null&&r.name)try{const x=await qa(r.name);i(x)}catch(x){console.error("Erreur lors du chargement des demandes en attente:",x),i(0)}})()},[r==null?void 0:r.name]);const o=u.useMemo(()=>{const d=e.length,x=e.length,m=l;return{mine:d,total:x,pending:m,pendingTotal:m}},[e,l]),c=async()=>{if(r!=null&&r.id&&confirm("tes-vous sr de vouloir demander le renouvellement de votre abonnement ?"))try{(await St.requestRenewal(r.id)).success?(a("Demande de renouvellement envoye avec succs ! L'administrateur sera notifi."),setTimeout(()=>{window.location.reload()},2e3)):a("Erreur lors de la demande de renouvellement")}catch{a("Erreur lors de la demande de renouvellement")}};return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Dossiers dposs (maison)"}),s.jsx("div",{className:"mt-1 text-2xl font-semibold",children:o.mine})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Dossiers dposs (total)"}),s.jsx("div",{className:"mt-1 text-2xl font-semibold",children:o.total})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Demandes daccs en attente (maison)"}),s.jsx("div",{className:"mt-1 text-2xl font-semibold",children:o.pending})]}),s.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Demandes daccs en attente (total)"}),s.jsx("div",{className:"mt-1 text-2xl font-semibold",children:o.pendingTotal})]})]}),r&&s.jsx("div",{className:"mt-6",children:r.role==="admin"?s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Abonnement Administrateur"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Statut :"}),s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium border text-blue-600 bg-blue-50 border-blue-200",children:"Abonnement Permanent"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Type :"}),s.jsx("span",{className:"text-sm text-gray-900",children:"Administrateur"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Expiration :"}),s.jsx("span",{className:"text-sm text-green-600 font-semibold",children:"Jamais"})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-5 w-5 text-blue-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-sm text-blue-800",children:"En tant qu'administrateur, vous avez un abonnement permanent qui ne ncessite pas de renouvellement."})]})})]})]}):r.subscriptionStartDate&&r.subscriptionEndDate?s.jsxs(s.Fragment,{children:[s.jsx(Z0,{subscriptionStartDate:r.subscriptionStartDate,subscriptionEndDate:r.subscriptionEndDate,subscriptionActive:r.subscriptionActive||!1,subscriptionStatus:r.subscriptionStatus||"ACTIVE",daysUntilExpiration:r.daysUntilExpiration||0,showRenewalButton:r.role!=="admin",onRequestRenewal:c}),n&&s.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-5 w-5 text-blue-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-sm text-blue-800",children:n})]})})]}):s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Informations d'Abonnement"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Les informations d'abonnement ne sont pas encore disponibles."})]})}),s.jsxs("div",{className:"mt-6 rounded-xl border border-slate-200 dark:border-slate-700 p-5",children:[s.jsx("div",{className:"text-sm font-semibold",children:"Dernires notifications"}),s.jsxs("ul",{className:"mt-3 space-y-2 text-sm",children:[t.slice(0,5).map(d=>s.jsxs("li",{className:"flex items-center justify-between",children:[s.jsx("span",{children:d.title}),s.jsx("span",{className:"text-xs text-slate-500",children:new Date(d.createdAt).toLocaleTimeString()})]},d.id)),t.length===0&&s.jsx("li",{className:"text-slate-500",children:"Aucune notification"})]})]})]})},ug=()=>{const{user:e}=Ze(),[t,r]=u.useState(null),[n,a]=u.useState(!0),[l,i]=u.useState("dashboard"),[o,c]=u.useState([]),[d,x]=u.useState(!1),[m,h]=u.useState(""),[j,y]=u.useState(""),[N,P]=u.useState(!1),[g,p]=u.useState([]);u.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0);const W=await bf();r(W)}catch(W){console.error("Erreur lors du chargement du tableau de bord:",W)}finally{a(!1)}},b=async()=>{try{const W=await Pf();c(W)}catch(W){console.error("Erreur lors du chargement des invitations:",W)}},k=async()=>{try{const W=await Ef();p(W)}catch(W){console.error("Erreur lors du chargement des utilisateurs:",W)}},R=async()=>{if(!m||!j){alert("Veuillez remplir tous les champs");return}try{P(!0),await Cf(m,j,(e==null?void 0:e.name)||"admin"),h(""),y(""),x(!1),b(),f(),alert("Invitation envoye avec succs!")}catch(W){console.error("Erreur lors de l'envoi de l'invitation:",W),alert("Erreur lors de l'envoi de l'invitation")}finally{P(!1)}},w=async W=>{if(confirm("tes-vous sr de vouloir supprimer cette invitation ?"))try{await Tf(W),b(),f(),alert("Invitation supprime avec succs!")}catch(K){console.error("Erreur lors de la suppression de l'invitation:",K),alert("Erreur lors de la suppression de l'invitation")}},S=async W=>{if(confirm("tes-vous sr de vouloir activer cet utilisateur ?"))try{await Df(W),k(),f(),alert("Utilisateur activ avec succs!")}catch(K){console.error("Erreur lors de l'activation de l'utilisateur:",K),alert("Erreur lors de l'activation de l'utilisateur")}},M=async W=>{if(confirm("tes-vous sr de vouloir dsactiver cet utilisateur ?"))try{await If(W),k(),f(),alert("Utilisateur dsactiv avec succs!")}catch(K){console.error("Erreur lors de la dsactivation de l'utilisateur:",K),alert("Erreur lors de la dsactivation de l'utilisateur")}},F=async W=>{try{await Ff(W),k(),f(),alert("Statut de l'utilisateur modifi avec succs!")}catch(K){console.error("Erreur lors de la modification du statut:",K),alert("Erreur lors de la modification du statut: "+K)}},J=async W=>{try{const K="https://assurance-connect.com",we=localStorage.getItem("assurance_token"),ae=await fetch(`${K}/api/subscriptions/renew/${W}`,{method:"POST",headers:{"Content-Type":"application/json",...we?{Authorization:`Bearer ${we}`}:{}}});if(ae.ok){const Se=await ae.json();Se.success?(alert("Abonnement renouvel avec succs!"),f()):alert("Erreur lors du renouvellement: "+Se.message)}else alert("Erreur lors du renouvellement de l'abonnement")}catch(K){console.error("Erreur lors du renouvellement:",K),alert("Erreur lors du renouvellement de l'abonnement")}};return u.useEffect(()=>{l==="invitations"?b():l==="users"&&k()},[l]),n?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:"Chargement du tableau de bord..."})}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Tableau de Bord Administrateur"}),s.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Gestion complte de la plateforme d'assurance"})]}),s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"dashboard",label:"Tableau de Bord",icon:""},{id:"invitations",label:"Invitations",icon:""},{id:"users",label:"Utilisateurs",icon:""},{id:"reports",label:"Rapports",icon:""},{id:"cases",label:"Dossiers",icon:""},{id:"subscriptions",label:"Abonnements",icon:""}].map(W=>s.jsxs("button",{onClick:()=>i(W.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${l===W.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[W.icon," ",W.label]},W.id))})}),l==="dashboard"&&s.jsx(mg,{data:t||{totalUsers:0,totalReports:0,totalCases:0,totalAccessRequests:0,pendingAccessRequests:0,totalInvitations:0,pendingInvitations:0,recentUsers:[],recentReports:[],recentAccessRequests:[],recentInvitations:[],reportsByCompany:{},casesByStatus:{},casesByCompany:{},usersByCompany:{},onlineUsers:[],recentlyLoggedIn:[],recentlyLoggedOut:[]}}),l==="invitations"&&s.jsx(fg,{invitations:o,showModal:d,setShowModal:x,inviteEmail:m,setInviteEmail:h,inviteCompany:j,setInviteCompany:y,onSendInvitation:R,onCancelInvitation:w,inviting:N}),l==="users"&&s.jsx(pg,{users:g,onActivateUser:S,onDeactivateUser:M,onToggleUserStatus:F,currentUserId:e==null?void 0:e.id}),l==="reports"&&s.jsx(xg,{data:t||{totalUsers:0,totalReports:0,totalCases:0,totalAccessRequests:0,pendingAccessRequests:0,totalInvitations:0,pendingInvitations:0,recentUsers:[],recentReports:[],recentAccessRequests:[],recentInvitations:[],reportsByCompany:{},casesByStatus:{},casesByCompany:{},usersByCompany:{},onlineUsers:[],recentlyLoggedIn:[],recentlyLoggedOut:[]}}),l==="cases"&&s.jsx(hg,{data:t||{totalUsers:0,totalReports:0,totalCases:0,totalAccessRequests:0,pendingAccessRequests:0,totalInvitations:0,pendingInvitations:0,recentUsers:[],recentReports:[],recentAccessRequests:[],recentInvitations:[],reportsByCompany:{},casesByStatus:{},casesByCompany:{},usersByCompany:{},onlineUsers:[],recentlyLoggedIn:[],recentlyLoggedOut:[]}}),l==="subscriptions"&&s.jsx(eg,{onRenewSubscription:J})]})},mg=({data:e})=>{const[t,r]=u.useState(null),[n,a]=u.useState(null),[l,i]=u.useState(null);return u.useEffect(()=>{(async()=>{try{const c="https://assurance-connect.com",d=localStorage.getItem("assurance_token"),x=d?{Authorization:`Bearer ${d}`}:{},m=await fetch(`${c}/api/subscriptions/stats`,{headers:x});if(m.ok){const y=await m.json();r(y)}const h=await fetch(`${c}/api/report-stats`,{headers:x});if(h.ok){const y=await h.json();a(y)}const j=await fetch(`${c}/api/case-stats`,{headers:x});if(j.ok){const y=await j.json();i(y)}}catch(c){console.error("Erreur lors du chargement des statistiques:",c)}})()},[]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900 dark:to-indigo-900 rounded-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:" Synthse complte de la plateforme"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Vue d'ensemble des statistiques de tous les modules"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(ra,{title:"Utilisateurs",value:e.totalUsers||0,icon:""}),s.jsx(ra,{title:"Rapports",value:(n==null?void 0:n.totalCreated)||e.totalReports||0,icon:""}),s.jsx(ra,{title:"Dossiers",value:(l==null?void 0:l.totalCreated)||e.totalCases||0,icon:""}),s.jsx(ra,{title:"Demandes d'accs",value:(n==null?void 0:n.totalRequests)||e.totalAccessRequests||0,icon:""})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:" Module Rapports"}),n?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Crs"}),s.jsx("span",{className:"font-semibold text-blue-600",children:n.totalCreated})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Modifis"}),s.jsx("span",{className:"font-semibold text-yellow-600",children:n.totalModified})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Supprims"}),s.jsx("span",{className:"font-semibold text-red-600",children:n.totalDeleted})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Demandes"}),s.jsx("span",{className:"font-semibold text-green-600",children:n.totalRequests})]})]}):s.jsx("p",{className:"text-gray-500 text-sm",children:"Chargement..."})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:" Module Dossiers"}),l?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Crs"}),s.jsx("span",{className:"font-semibold text-blue-600",children:l.totalCreated})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Modifis"}),s.jsx("span",{className:"font-semibold text-yellow-600",children:l.totalModified})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Supprims"}),s.jsx("span",{className:"font-semibold text-red-600",children:l.totalDeleted})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tlchargements"}),s.jsx("span",{className:"font-semibold text-green-600",children:l.totalDownloads})]})]}):s.jsx("p",{className:"text-gray-500 text-sm",children:"Chargement..."})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:" Module Abonnements"}),t?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expirs"}),s.jsx("span",{className:"font-semibold text-red-600",children:t.expiredCount})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"En attente"}),s.jsx("span",{className:"font-semibold text-yellow-600",children:t.pendingRenewalCount})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expiration proche"}),s.jsx("span",{className:"font-semibold text-orange-600",children:t.expiringSoonCount})]})]}):s.jsx("p",{className:"text-gray-500 text-sm",children:"Chargement..."})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Rpartition des rapports par compagnie"}),n&&n.companiesWithReports.length>0?s.jsx("div",{className:"space-y-2",children:n.companiesWithReports.slice(0,5).map((o,c)=>s.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[s.jsx("span",{className:"text-sm font-medium",children:o.company}),s.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[o.count," rapports"]})]},c))}):s.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune donne disponible"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Rpartition des dossiers par compagnie"}),l&&l.casesByCompany.length>0?s.jsx("div",{className:"space-y-2",children:l.casesByCompany.slice(0,5).map((o,c)=>s.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[s.jsx("span",{className:"text-sm font-medium",children:o.company}),s.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[o.count," dossiers"]})]},c))}):s.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune donne disponible"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Utilisateurs en ligne"}),s.jsx("div",{className:"space-y-2",children:e.onlineUsers.length===0?s.jsx("p",{className:"text-gray-500",children:"Aucun utilisateur en ligne"}):e.onlineUsers.map(o=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{children:[o.firstName," ",o.lastName]}),s.jsx("span",{className:"text-sm text-green-600",children:" En ligne"})]},o.id))})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Dernires connexions"}),s.jsx("div",{className:"space-y-2",children:e.recentlyLoggedIn.slice(0,5).map(o=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{children:[o.firstName," ",o.lastName]}),s.jsx("span",{className:"text-sm text-gray-500",children:o.lastLoginAt?new Date(o.lastLoginAt).toLocaleString():""})]},o.id))})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Activit rcente"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Nouveaux utilisateurs"}),s.jsx("div",{className:"space-y-1",children:e.recentUsers.slice(0,3).map(o=>s.jsxs("div",{className:"text-sm",children:[o.firstName," ",o.lastName," - ",o.insuranceCompany]},o.id))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Nouveaux rapports"}),s.jsx("div",{className:"space-y-1",children:e.recentReports.slice(0,3).map(o=>s.jsxs("div",{className:"text-sm",children:[o.title," - ",o.createdBy]},o.id))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Demandes d'accs"}),s.jsx("div",{className:"space-y-1",children:e.recentAccessRequests.slice(0,3).map(o=>s.jsxs("div",{className:"text-sm",children:[o.requesterName," - ",o.reportTitle]},o.id))})]})]})]})]})},fg=({invitations:e,showModal:t,setShowModal:r,inviteEmail:n,setInviteEmail:a,inviteCompany:l,setInviteCompany:i,onSendInvitation:o,onCancelInvitation:c,inviting:d})=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Gestion des invitations"}),s.jsx(U,{onClick:()=>r(!0),children:"Envoyer une invitation"})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compagnie"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'envoi"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expire le"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(x=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:x.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:x.insuranceCompany}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x.status==="PENDING"?"bg-yellow-100 text-yellow-800":x.status==="USED"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(x.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(x.expiresAt).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[x.status==="PENDING"&&s.jsx("button",{onClick:()=>c(x.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Supprimer l'invitation",children:" Supprimer"}),x.status==="USED"&&s.jsx("span",{className:"text-green-600 text-xs",children:" Utilise"}),x.status==="EXPIRED"&&s.jsx("button",{onClick:()=>c(x.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Supprimer l'invitation expire",children:" Supprimer"}),x.status==="CANCELLED"&&s.jsx("span",{className:"text-gray-500 text-xs",children:" Annule"})]})]},x.id))})]})}),t&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"mt-3",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Envoyer une invitation"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),s.jsx("input",{type:"email",value:n,onChange:x=>a(x.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"email@exemple.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Compagnie d'assurance"}),s.jsx("input",{type:"text",value:l,onChange:x=>i(x.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Nom de la compagnie"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx(U,{onClick:()=>r(!1),children:"Annuler"}),s.jsx(U,{onClick:o,disabled:d,children:d?"Envoi...":"Envoyer"})]})]})})})]}),pg=({users:e,onActivateUser:t,onDeactivateUser:r,onToggleUserStatus:n,currentUserId:a})=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Gestion des utilisateurs"}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Compagnie"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rle"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dernire connexion"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiration abonnement"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(l=>s.jsxs("tr",{children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[l.firstName," ",l.lastName]}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.email})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:l.insuranceCompany}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l.status==="REGISTERED"?"bg-green-100 text-green-800":l.status==="INVITED"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:l.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:l.role}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:l.lastLoginAt?new Date(l.lastLoginAt).toLocaleString():"Jamais"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:l.role==="ADMIN"?s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-blue-600",children:"Jamais (Administrateur)"}),s.jsx("div",{className:"text-xs text-gray-400",children:"Abonnement permanent"})]}):l.subscriptionEndDate?s.jsxs("div",{children:[s.jsx("div",{className:`font-medium ${l.daysUntilExpiration&&l.daysUntilExpiration<=0?"text-red-600":l.daysUntilExpiration&&l.daysUntilExpiration<=30?"text-yellow-600":"text-green-600"}`,children:new Date(l.subscriptionEndDate).toLocaleDateString("fr-FR")}),l.daysUntilExpiration!==void 0&&s.jsx("div",{className:"text-xs text-gray-400",children:l.daysUntilExpiration>0?`${l.daysUntilExpiration} jours restants`:l.daysUntilExpiration===0?"Expire aujourd'hui":"Expir"})]}):s.jsx("span",{className:"text-gray-400",children:"Non dfini"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[l.status==="INVITED"&&s.jsx("button",{onClick:()=>t(l.id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Activer l'utilisateur",children:" Activer"}),l.status==="REGISTERED"&&l.isActive&&s.jsx("button",{onClick:()=>r(l.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Dsactiver l'utilisateur",disabled:l.role==="ADMIN"&&l.id===a,children:" Dsactiver"}),l.status==="REGISTERED"&&!l.isActive&&s.jsx("button",{onClick:()=>t(l.id),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Activer l'utilisateur",children:" Activer"}),l.role==="ADMIN"&&l.id===a&&s.jsx("span",{className:"text-gray-500 text-xs",children:" Vous-mme"})]})]},l.id))})]})})]}),xg=({data:e})=>{const[t,r]=u.useState(null),[n,a]=u.useState(!0),[l,i]=u.useState(null);return u.useEffect(()=>{(async()=>{try{a(!0);const c=await Af();r(c),i(null)}catch(c){console.error("Erreur lors du chargement des statistiques des rapports:",c),i("Erreur lors du chargement des donnes")}finally{a(!1)}})()},[]),n?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-xl font-semibold",children:"Statistiques dtailles des rapports"})}),s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Chargement des statistiques..."})})]}):l?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-xl font-semibold",children:"Statistiques dtailles des rapports"})}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-red-700",children:[" ",l]})})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-xl font-semibold",children:"Statistiques dtailles des rapports"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Rapports crs"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.totalCreated})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Rapports modifis"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.totalModified})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Rapports supprims"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.totalDeleted})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Demandes envoyes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.totalRequests})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Rpartition par compagnie d'assurance"}),s.jsx("div",{className:"space-y-3",children:t.companiesWithReports.length>0?t.companiesWithReports.map((o,c)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.company})}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-blue-600",children:o.count}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"rapports"})]})]},c)):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aucune donne disponible"})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Demandes d'accs par compagnie"}),s.jsx("div",{className:"space-y-3",children:t.companiesWithRequests.length>0?t.companiesWithRequests.map((o,c)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.company})}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-green-600",children:o.count}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"demandes"})]})]},c)):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aucune demande d'accs enregistre"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Derniers rapports crs"}),s.jsx("div",{className:"space-y-3",children:t.recentReports.slice(0,5).map(o=>s.jsx("div",{className:"p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:o.title}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Par ",o.createdBy]}),s.jsx("div",{className:"text-xs text-gray-400",children:o.company})]}),s.jsx("div",{className:"text-xs text-gray-400",children:new Date(o.createdAt).toLocaleDateString("fr-FR")})]})},o.id))})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Dernires demandes d'accs"}),s.jsx("div",{className:"space-y-3",children:t.recentRequests.slice(0,5).map(o=>s.jsx("div",{className:"p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:o.reportTitle}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Demand par ",o.requesterName]}),s.jsx("div",{className:"text-xs text-gray-400",children:o.company})]}),s.jsx("div",{className:"text-xs text-gray-400",children:new Date(o.requestedAt).toLocaleDateString("fr-FR")})]})},o.id))})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-xl font-semibold",children:"Statistiques dtailles des rapports"})}),s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Aucune donne disponible"})})]})},hg=({data:e})=>{const[t,r]=u.useState(null),[n,a]=u.useState(!0),[l,i]=u.useState(null);return u.useEffect(()=>{(async()=>{try{a(!0);const c=await Lf();r(c),i(null)}catch(c){console.error("Erreur lors du chargement des statistiques des dossiers:",c),i("Erreur lors du chargement des donnes")}finally{a(!1)}})()},[]),n?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-xl font-semibold",children:"Statistiques dtailles des dossiers"})}),s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Chargement des statistiques..."})})]}):l?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-xl font-semibold",children:"Statistiques dtailles des dossiers"})}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-red-700",children:[" ",l]})})]}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-xl font-semibold",children:"Statistiques dtailles des dossiers"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Dossiers crs"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.totalCreated})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Dossiers modifis"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.totalModified})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Dossiers supprims"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.totalDeleted})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fichiers tlchargs"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t.totalDownloads})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Dossiers crs par maison d'assurance"}),s.jsx("div",{className:"space-y-3",children:t.casesByCompany.length>0?t.casesByCompany.map((o,c)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.company})}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-blue-600",children:o.count}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"dossiers"})]})]},c)):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aucune donne disponible"})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Dossiers modifis par maison d'assurance"}),s.jsx("div",{className:"space-y-3",children:t.modifiedByCompany.length>0?t.modifiedByCompany.map((o,c)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.company})}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-yellow-600",children:o.count}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"dossiers"})]})]},c)):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aucune donne disponible"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Dossiers supprims par maison d'assurance"}),s.jsx("div",{className:"space-y-3",children:t.deletedByCompany.length>0?t.deletedByCompany.map((o,c)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.company})}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-red-600",children:o.count}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"dossiers"})]})]},c)):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aucune donne disponible"})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:" Fichiers tlchargs par maison d'assurance"}),s.jsx("div",{className:"space-y-3",children:t.downloadsByCompany.length>0?t.downloadsByCompany.map((o,c)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.company})}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-green-600",children:o.count}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"fichiers"})]})]},c)):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"Aucune donne disponible"})})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-xl font-semibold",children:"Statistiques dtailles des dossiers"})}),s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-gray-500",children:"Aucune donne disponible"})})]})},ra=({title:e,value:t,icon:r})=>s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:r})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:t})]})]})}),gg=()=>{const e=gr(),[t]=Wo(),{login:r}=Ze(),[n,a]=u.useState({username:"",insuranceCompany:"",password:""}),[l,i]=u.useState(!1),[o,c]=u.useState(null),[d,x]=u.useState(null);u.useEffect(()=>{t.get("registered")==="true"&&x("Inscription russie ! Vous pouvez maintenant vous connecter.")},[t]);const m=(j,y)=>{a(N=>({...N,[j]:y})),o&&c(null)},h=async j=>{if(j.preventDefault(),!n.username||!n.insuranceCompany||!n.password){c("Veuillez remplir tous les champs");return}try{i(!0),c(null),await r(n.username,n.insuranceCompany,n.password)?e("/"):c("Identifiants incorrects. Veuillez vrifier vos informations.")}catch(y){c(y.message||"Erreur lors de la connexion")}finally{i(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Connexion"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Accdez  votre espace d'assurance"})]}),d&&s.jsx("div",{className:"bg-green-50 dark:bg-green-900 border border-green-200 dark:border-green-700 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:d})})]})}),o&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:o})})]})}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"insuranceCompany",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Compagnie d'assurance"}),s.jsx("input",{id:"insuranceCompany",name:"insuranceCompany",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-700",placeholder:"Ex: AXA, Allianz, etc.",value:n.insuranceCompany,onChange:j=>m("insuranceCompany",j.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nom d'utilisateur"}),s.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-700",placeholder:"Votre nom d'utilisateur",value:n.username,onChange:j=>m("username",j.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mot de passe"}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm dark:bg-gray-700",placeholder:"Votre mot de passe",value:n.password,onChange:j=>m("password",j.target.value)}),s.jsx("div",{className:"mt-1 text-right",children:s.jsx(Hi,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500 dark:text-blue-400",children:"Mot de passe oubli ?"})})]})]}),s.jsx("div",{children:s.jsx(U,{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Connexion...":"Se connecter"})}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pas encore de compte ?"," ",s.jsx(Hi,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400",children:"S'inscrire"})]})})]})]})})},vg=()=>{const e=gr(),[t]=Wo(),r=t.get("token"),[n,a]=u.useState(!0),[l,i]=u.useState(!1),[o,c]=u.useState(null),[d,x]=u.useState(null),[m,h]=u.useState({username:"",firstName:"",lastName:"",dateOfBirth:"",password:"",confirmPassword:"",companyLogo:""}),[j,y]=u.useState({}),[N,P]=u.useState(!1),[g,p]=u.useState(!1);u.useEffect(()=>{r?f():(x("Token d'invitation manquant"),a(!1))},[r]);const f=async()=>{try{i(!0);const S=await Rf(r);c(S),h(M=>({...M,username:S.email.split("@")[0]}))}catch{x("Token d'invitation invalide ou expir")}finally{i(!1),a(!1)}};u.useEffect(()=>{if(m.username&&m.username.length>=3){const S=setTimeout(()=>{b()},500);return()=>clearTimeout(S)}else P(!1)},[m.username]);const b=async()=>{try{p(!0);const S=await Sf(m.username);P(S)}catch(S){console.error("Erreur lors de la vrification du username:",S)}finally{p(!1)}},k=(S,M)=>{h(F=>({...F,[S]:M})),j[S]&&y(F=>({...F,[S]:""}))},R=()=>{const S={};if(m.username.trim()?m.username.length<3?S.username="Le nom d'utilisateur doit contenir au moins 3 caractres":N&&(S.username="Ce nom d'utilisateur existe dj"):S.username="Le nom d'utilisateur est requis",m.firstName.trim()||(S.firstName="Le prnom est requis"),m.lastName.trim()||(S.lastName="Le nom est requis"),!m.dateOfBirth)S.dateOfBirth="La date de naissance est requise";else{const M=new Date(m.dateOfBirth);new Date().getFullYear()-M.getFullYear()<18&&(S.dateOfBirth="Vous devez avoir au moins 18 ans")}return m.password?m.password.length<8&&(S.password="Le mot de passe doit contenir au moins 8 caractres"):S.password="Le mot de passe est requis",m.confirmPassword?m.password!==m.confirmPassword&&(S.confirmPassword="Les mots de passe ne correspondent pas"):S.confirmPassword="La confirmation du mot de passe est requise",y(S),Object.keys(S).length===0},w=async S=>{if(S.preventDefault(),!!R())try{i(!0),await _f(r),await kf({email:o.email,username:m.username,firstName:m.firstName,lastName:m.lastName,dateOfBirth:m.dateOfBirth,password:m.password,companyLogo:m.companyLogo||void 0}),e("/login?registered=true")}catch(M){x(M.message||"Erreur lors de l'inscription")}finally{i(!1)}};return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:l?"Validation de l'invitation...":"Chargement..."})]})}):d?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Erreur d'invitation"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:d}),s.jsx(U,{onClick:()=>e("/login"),children:"Retour  la connexion"})]})})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:"Finaliser votre inscription"}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["Compagnie: ",s.jsx("span",{className:"font-semibold",children:o==null?void 0:o.insuranceCompany})]})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nom d'utilisateur"}),s.jsxs("div",{className:"mt-1 relative",children:[s.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:m.username,onChange:S=>k("username",S.target.value),className:`appearance-none relative block w-full px-3 py-2 border ${j.username||N?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-1 sm:text-sm`,placeholder:"Nom d'utilisateur"}),g&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),j.username&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.username}),N&&!j.username&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Ce nom d'utilisateur existe dj"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Prnom"}),s.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:m.firstName,onChange:S=>k("firstName",S.target.value),className:`mt-1 block w-full px-3 py-2 border ${j.firstName?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-1 sm:text-sm`,placeholder:"Prnom"}),j.firstName&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.firstName})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nom"}),s.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:m.lastName,onChange:S=>k("lastName",S.target.value),className:`mt-1 block w-full px-3 py-2 border ${j.lastName?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-1 sm:text-sm`,placeholder:"Nom"}),j.lastName&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.lastName})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date de naissance"}),s.jsx("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",required:!0,value:m.dateOfBirth,onChange:S=>k("dateOfBirth",S.target.value),className:`mt-1 block w-full px-3 py-2 border ${j.dateOfBirth?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-1 sm:text-sm`}),j.dateOfBirth&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.dateOfBirth})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"companyLogo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Logo de compagnie (optionnel)"}),s.jsx("input",{id:"companyLogo",name:"companyLogo",type:"text",value:m.companyLogo,onChange:S=>k("companyLogo",S.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-1 sm:text-sm",placeholder:"URL du logo"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mot de passe"}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:m.password,onChange:S=>k("password",S.target.value),className:`mt-1 block w-full px-3 py-2 border ${j.password?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-1 sm:text-sm`,placeholder:"Mot de passe"}),j.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.password})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirmer le mot de passe"}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:m.confirmPassword,onChange:S=>k("confirmPassword",S.target.value),className:`mt-1 block w-full px-3 py-2 border ${j.confirmPassword?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-1 sm:text-sm`,placeholder:"Confirmer le mot de passe"}),j.confirmPassword&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.confirmPassword})]})]}),s.jsx("div",{children:s.jsx(U,{type:"submit",disabled:l||N||g,className:"w-full",children:l?"Finalisation...":"Finaliser l'inscription"})})]})]})})},yg=()=>{const e=gr(),[t,r]=u.useState(""),[n,a]=u.useState(""),[l,i]=u.useState(!1),[o,c]=u.useState(null),d=async x=>{x.preventDefault(),i(!0),c(null);try{const h=await(await fetch("http://localhost:8080/api/password-reset/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,insuranceCompany:n})})).json();h.success?(c({type:"success",text:h.message}),r(""),a("")):c({type:"error",text:h.message})}catch{c({type:"error",text:"Erreur lors de la demande de rinitialisation"})}finally{i(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white text-2xl",children:""})})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Mot de passe oubli"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Entrez votre email et votre compagnie d'assurance pour recevoir un lien de rinitialisation"})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:s.jsxs("form",{className:"space-y-6",onSubmit:d,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:x=>r(x.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"votre@email.com"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"insuranceCompany",className:"block text-sm font-medium text-gray-700",children:"Compagnie d'assurance"}),s.jsx("div",{className:"mt-1",children:s.jsxs("select",{id:"insuranceCompany",name:"insuranceCompany",required:!0,value:n,onChange:x=>a(x.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[s.jsx("option",{value:"",children:"Slectionnez votre compagnie"}),s.jsx("option",{value:"ALLIANZ",children:"ALLIANZ"}),s.jsx("option",{value:"AXA",children:"AXA"}),s.jsx("option",{value:"GROUPAMA",children:"GROUPAMA"}),s.jsx("option",{value:"MAIF",children:"MAIF"}),s.jsx("option",{value:"MACIF",children:"MACIF"}),s.jsx("option",{value:"MMA",children:"MMA"}),s.jsx("option",{value:"GMF",children:"GMF"}),s.jsx("option",{value:"CRAS",children:"CRAS"}),s.jsx("option",{value:"SAAR ASSURANCE",children:"SAAR ASSURANCE"}),s.jsx("option",{value:"SUNU",children:"SUNU"}),s.jsx("option",{value:"Systme",children:"Systme"})]})})]}),o&&s.jsx("div",{className:`rounded-md p-4 ${o.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:s.jsx("p",{className:`text-sm ${o.type==="success"?"text-green-800":"text-red-800"}`,children:o.text})}),s.jsx("div",{children:s.jsx(U,{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Envoi en cours...":"Envoyer le lien de rinitialisation"})}),s.jsx("div",{className:"text-center",children:s.jsx("button",{type:"button",onClick:()=>e("/login"),className:"text-sm text-blue-600 hover:text-blue-500",children:"Retour  la connexion"})})]})})})]})},jg=()=>{const e=gr(),[t]=Wo(),r=t.get("token"),[n,a]=u.useState(""),[l,i]=u.useState(""),[o,c]=u.useState(!1),[d,x]=u.useState(!0),[m,h]=u.useState(!1),[j,y]=u.useState(null);u.useEffect(()=>{if(!r){y({type:"error",text:"Token de rinitialisation manquant"}),x(!1);return}(async()=>{try{(await(await fetch(`http://localhost:8080/api/password-reset/verify/${r}`)).json()).valid?h(!0):y({type:"error",text:"Lien de rinitialisation invalide ou expir"})}catch{y({type:"error",text:"Erreur lors de la vrification du lien"})}finally{x(!1)}})()},[r]);const N=async P=>{if(P.preventDefault(),n!==l){y({type:"error",text:"Les mots de passe ne correspondent pas"});return}if(n.length<6){y({type:"error",text:"Le mot de passe doit contenir au moins 6 caractres"});return}c(!0),y(null);try{const p=await(await fetch("http://localhost:8080/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,newPassword:n})})).json();p.success?(y({type:"success",text:p.message}),setTimeout(()=>{e("/login")},2e3)):y({type:"error",text:p.message})}catch{y({type:"error",text:"Erreur lors de la rinitialisation du mot de passe"})}finally{c(!1)}};return d?s.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),s.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:"Vrification du lien de rinitialisation..."})]})}):m?s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white text-2xl",children:""})})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Nouveau mot de passe"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Entrez votre nouveau mot de passe"})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:s.jsxs("form",{className:"space-y-6",onSubmit:N,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"newPassword",name:"newPassword",type:"password",autoComplete:"new-password",required:!0,value:n,onChange:P=>a(P.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Votre nouveau mot de passe"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmer le mot de passe"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:l,onChange:P=>i(P.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"})})]}),j&&s.jsx("div",{className:`rounded-md p-4 ${j.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:s.jsx("p",{className:`text-sm ${j.type==="success"?"text-green-800":"text-red-800"}`,children:j.text})}),s.jsx("div",{children:s.jsx(U,{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Rinitialisation...":"Rinitialiser le mot de passe"})}),s.jsx("div",{className:"text-center",children:s.jsx("button",{type:"button",onClick:()=>e("/login"),className:"text-sm text-blue-600 hover:text-blue-500",children:"Retour  la connexion"})})]})})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:s.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:s.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:s.jsx("span",{className:"text-red-600 text-xl",children:""})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Lien invalide"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ce lien de rinitialisation est invalide ou a expir."}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>e("/forgot-password"),className:"text-sm text-blue-600 hover:text-blue-500",children:"Demander un nouveau lien"})})]})})})})},_d=()=>s.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-8 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Trop de requtes"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Vous avez effectu trop d'actions en peu de temps. Veuillez patienter une minute puis ressayer."}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm",children:"Ressayer"}),s.jsx(Vr,{to:"/",className:"text-sm text-blue-600 hover:underline",children:"Retour au tableau de bord"})]})]})}),Ng=({role:e,children:t})=>{const{user:r}=Ze();return!r||r.role!==e?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16",children:s.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-6 text-sm",children:["Accs refus. Cette section est rserve au rle: ",e,"."]})}):s.jsx(s.Fragment,{children:t})},wg=()=>{const[e,t]=u.useState(!1),{isAuthenticated:r,user:n,logout:a}=Ze(),{timeRemaining:l,showWarning:i,extendSession:o}=G0(),[c,d]=u.useState(0);u.useEffect(()=>{document.documentElement.classList.toggle("dark",e)},[e]),u.useEffect(()=>{if(n!=null&&n.name){const h=async()=>{try{const y=await Of(n.name);d(y)}catch(y){console.error("Erreur chargement notifications:",y)}};h();const j=setInterval(h,3e4);return()=>clearInterval(j)}},[n==null?void 0:n.name]);const x="text-white underline underline-offset-4",m="text-white/80 hover:text-white";return r?s.jsxs("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-900 dark:text-slate-100",children:[i&&s.jsx(K0,{timeRemaining:l,onExtend:o,onLogout:a}),s.jsxs(B0,{children:[s.jsxs("nav",{className:"hidden md:flex items-center gap-6 text-sm",children:[s.jsx(Vr,{to:"/",end:!0,className:({isActive:h})=>h?x:m,children:"Tableau de bord"}),s.jsx(Vr,{to:"/rapports",className:({isActive:h})=>h?x:m,children:"Rapports"}),s.jsx(Vr,{to:"/dossiers",className:({isActive:h})=>h?x:m,children:"Dossiers"}),s.jsx(Vr,{to:"/notifications",className:({isActive:h})=>h?x:m,children:s.jsxs("div",{className:"flex items-center gap-2",children:["Notifications",c>0&&s.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:c>99?"99+":c})]})}),(n==null?void 0:n.role)==="admin"&&s.jsx(Vr,{to:"/admin",className:({isActive:h})=>h?x:m,children:"Admin"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Y0,{timeRemaining:l,showWarning:i}),s.jsx("button",{onClick:a,className:"text-white/80 hover:text-white text-sm",children:"Dconnexion"})]})]}),s.jsx("main",{className:"pt-4",children:s.jsxs(Nd,{children:[s.jsx($e,{path:"/",element:s.jsx(dg,{})}),s.jsx($e,{path:"/rapports",element:s.jsx(lg,{})}),s.jsx($e,{path:"/dossiers",element:s.jsx(og,{})}),s.jsx($e,{path:"/notifications",element:s.jsx(cg,{})}),s.jsx($e,{path:"/admin",element:s.jsx(Ng,{role:"admin",children:s.jsx(ug,{})})}),s.jsx($e,{path:"/429",element:s.jsx(_d,{})}),s.jsx($e,{path:"*",element:s.jsx(jd,{to:"/",replace:!0})})]})})]}):s.jsx("div",{className:"min-h-screen bg-white text-slate-900 dark:bg-slate-900 dark:text-slate-100",children:s.jsxs(Nd,{children:[s.jsx($e,{path:"/login",element:s.jsx(gg,{})}),s.jsx($e,{path:"/register",element:s.jsx(vg,{})}),s.jsx($e,{path:"/forgot-password",element:s.jsx(yg,{})}),s.jsx($e,{path:"/reset-password",element:s.jsx(jg,{})}),s.jsx($e,{path:"/429",element:s.jsx(_d,{})}),s.jsx($e,{path:"*",element:s.jsx(jd,{to:"/login",replace:!0})})]})})},bg=()=>s.jsx(D0,{children:s.jsx(M0,{children:s.jsx(Q0,{children:s.jsx(wg,{})})})}),kg=window.fetch.bind(window);window.fetch=async(...e)=>{const t=await kg(...e);if(t&&t.status===429&&window.location.pathname!=="/429"){try{await t.text()}catch{}window.location.assign("/429")}return t};const Sg=Vm(document.getElementById("root"));Sg.render(s.jsx(Ud.StrictMode,{children:s.jsx(bg,{})}));
